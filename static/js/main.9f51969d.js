/*! For license information please see main.9f51969d.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),o=n(43),i=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var S=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function E(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=C&&e[C]||e["@@iterator"])?e:null}var T=Symbol.for("react.client.reference");function N(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===T?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case b:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return N(e(t))}catch(n){}}return null}var O,j,M=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=Object.assign;function _(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||"",j=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+O+e+j}var R=!1;function D(e,t){if(!e||R)return"";R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),s=i[0],a=i[1];if(s&&a){var l=s.split("\n"),c=a.split("\n");for(o=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(r===l.length||o===c.length)for(r=l.length-1,o=c.length-1;1<=r&&0<=o&&l[r]!==c[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==c[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==c[o]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{R=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?_(n):""}function P(e){switch(e.tag){case 26:case 27:case 5:return _(e.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 15:return e=D(e.type,!1);case 11:return e=D(e.type.render,!1);case 1:return e=D(e.type,!0);default:return""}}function L(e){try{var t="";do{t+=P(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function $(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function I(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function z(e){if($(e)!==e)throw Error(s(188))}function B(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=B(e)))return t;e=e.sibling}return null}var F=Array.isArray,V=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},U=[],W=-1;function q(e){return{current:e}}function K(e){0>W||(e.current=U[W],U[W]=null,W--)}function J(e,t){W++,U[W]=e.current,e.current=t}var G=q(null),Q=q(null),X=q(null),Y=q(null);function Z(e,t){switch(J(X,t),J(Q,e),J(G,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Qu(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Xu(e=Qu(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(G),J(G,t)}function ee(){K(G),K(Q),K(X)}function te(e){null!==e.memoizedState&&J(Y,e);var t=G.current,n=Xu(t,e.type);t!==n&&(J(Q,e),J(G,n))}function ne(e){Q.current===e&&(K(G),K(Q)),Y.current===e&&(K(Y),Ld._currentValue=H)}var re=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,se=r.unstable_shouldYield,ae=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,pe=r.unstable_LowPriority,fe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/ke|0)|0},xe=Math.log,ke=Math.LN2;var Se=128,Ce=4194304;function Ee(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&n;return 0!==a?0!==(n=a&~o)?r=Ee(n):0!==(i&=a)?r=Ee(i):e||0!==(s=a&~s)&&(r=Ee(s)):0!==(a=n&~o)?r=Ee(a):0!==i?r=Ee(i):e||0!==(s=n&~s)&&(r=Ee(s)),0===r?0:0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(s=t&-t)||32===o&&0!==(4194176&s))?t:r}function Ne(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Oe(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=Se;return 0===(4194176&(Se<<=1))&&(Se=128),e}function Me(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Pe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=V.p;return 0!==e?e:void 0===(e=window.event)?32:Xd(e.type)}var $e=Math.random().toString(36).slice(2),Ie="__reactFiber$"+$e,ze="__reactProps$"+$e,Be="__reactContainer$"+$e,Fe="__reactEvents$"+$e,Ve="__reactListeners$"+$e,He="__reactHandles$"+$e,Ue="__reactResources$"+$e,We="__reactMarker$"+$e;function qe(e){delete e[Ie],delete e[ze],delete e[Fe],delete e[Ve],delete e[He]}function Ke(e){var t=e[Ie];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Be]||n[Ie]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ld(e);null!==e;){if(n=e[Ie])return n;e=ld(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[Ie]||e[Be]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ge(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Qe(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Xe(e){e[We]=!0}var Ye=new Set,Ze={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Ze[e]=t,e=0;e<t.length;e++)Ye.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},it={};function st(e,t,n){if(o=t,re.call(it,o)||!re.call(ot,o)&&(rt.test(o)?it[o]=!0:(ot[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function at(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,o,i,s,a){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?vt(e,s,ct(t)):null!=n?vt(e,s,ct(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,o,i,s,a){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(F(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Ct(e,o,r)}else for(var i in t)t.hasOwnProperty(i)&&Ct(e,i,t[i])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ot=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jt(e){return Ot.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _t=null,Rt=null;function Dt(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[ze]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[ze]||null;if(!o)throw Error(s(90));gt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Pt=!1;function Lt(e,t,n){if(Pt)return e(t,n);Pt=!0;try{return e(t)}finally{if(Pt=!1,(null!==_t||null!==Rt)&&(Ic(),_t&&(t=_t,e=Rt,Rt=_t=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function $t(e,t){var n=e.stateNode;if(null===n)return null;var r=n[ze]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var It=!1;if(nt)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){It=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(xh){It=!1}var Bt=null,Ft=null,Vt=null;function Ht(){if(Vt)return Vt;var e,t,n=Ft,r=n.length,o="value"in Bt?Bt.value:Bt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[i-t];t++);return Vt=o.slice(e,1<t?1-t:void 0)}function Ut(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function qt(){return!1}function Kt(e){function t(t,n,r,o,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Wt:qt,this.isPropagationStopped=qt,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Jt,Gt,Qt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yt=Kt(Xt),Zt=A({},Xt,{view:0,detail:0}),en=Kt(Zt),tn=A({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(Jt=e.screenX-Qt.screenX,Gt=e.screenY-Qt.screenY):Gt=Jt=0,Qt=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Gt}}),nn=Kt(tn),rn=Kt(A({},tn,{dataTransfer:0})),on=Kt(A({},Zt,{relatedTarget:0})),sn=Kt(A({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),an=Kt(A({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Kt(A({},Xt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function pn(){return hn}var fn=Kt(A({},Zt,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ut(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Ut(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ut(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Kt(A({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Kt(A({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Kt(A({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Kt(A({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Kt(A({},Xt,{newState:0,oldState:0})),wn=[9,13,27,32],xn=nt&&"CompositionEvent"in window,kn=null;nt&&"documentMode"in document&&(kn=document.documentMode);var Sn=nt&&"TextEvent"in window&&!kn,Cn=nt&&(!xn||kn&&8<kn&&11>=kn),En=String.fromCharCode(32),Tn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function _n(e,t,n,r){_t?Rt?Rt.push(r):Rt=[r]:_t=r,0<(t=Lu(t,"onChange")).length&&(n=new Yt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rn=null,Dn=null;function Pn(e){Ou(e,0)}function Ln(e){if(ht(Ge(e)))return e}function $n(e,t){if("change"===e)return t}var In=!1;if(nt){var zn;if(nt){var Bn="oninput"in document;if(!Bn){var Fn=document.createElement("div");Fn.setAttribute("oninput","return;"),Bn="function"===typeof Fn.oninput}zn=Bn}else zn=!1;In=zn&&(!document.documentMode||9<document.documentMode)}function Vn(){Rn&&(Rn.detachEvent("onpropertychange",Hn),Dn=Rn=null)}function Hn(e){if("value"===e.propertyName&&Ln(Dn)){var t=[];_n(t,Dn,e,At(e)),Lt(Pn,t)}}function Un(e,t,n){"focusin"===e?(Vn(),Dn=n,(Rn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Vn()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(Dn)}function qn(e,t){if("click"===e)return Ln(t)}function Kn(e,t){if("input"===e||"change"===e)return Ln(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Gn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!re.call(t,o)||!Jn(e[o],t[o]))return!1}return!0}function Qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=Qn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qn(r)}}function Yn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Yn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zn(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Zn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Yn(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var o=t.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!n.extend&&i>r&&(o=r,r=i,i=o),o=Xn(t,i);var s=Xn(t,r);o&&s&&(1!==n.rangeCount||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&((e=e.createRange()).setStart(o.node,o.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,or=null,ir=null,sr=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Gn(ir,r)||(ir=r,0<(r=Lu(or,"onSelect")).length&&(t=new Yt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}nt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=hr("animationend"),fr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),et(t,[e])}var Sr=[],Cr=0,Er=0;function Tr(){for(var e=Cr,t=Er=Cr=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var o=Sr[t];Sr[t++]=null;var i=Sr[t];if(Sr[t++]=null,null!==r&&null!==o){var s=r.pending;null===s?o.next=o:(o.next=s.next,s.next=o),r.pending=o}0!==i&&Mr(n,o,i)}}function Nr(e,t,n,r){Sr[Cr++]=e,Sr[Cr++]=t,Sr[Cr++]=n,Sr[Cr++]=r,Er|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Or(e,t,n,r){return Nr(e,t,n,r),Ar(e)}function jr(e,t){return Nr(e,null,null,t),Ar(e)}function Mr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;o&&null!==t&&3===e.tag&&(i=e.stateNode,o=31-we(n),null===(e=(i=i.hiddenUpdates)[o])?i[o]=[t]:e.push(t),t.lane=536870912|n)}function Ar(e){if(50<Oc)throw Oc=0,jc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var _r={},Rr=new WeakMap;function Dr(e,t){if("object"===typeof e&&null!==e){var n=Rr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:L(t)},Rr.set(e,t),t)}return{value:e,source:t,stack:L(t)}}var Pr=[],Lr=0,$r=null,Ir=0,zr=[],Br=0,Fr=null,Vr=1,Hr="";function Ur(e,t){Pr[Lr++]=Ir,Pr[Lr++]=$r,$r=e,Ir=t}function Wr(e,t,n){zr[Br++]=Vr,zr[Br++]=Hr,zr[Br++]=Fr,Fr=e;var r=Vr;e=Hr;var o=32-we(r)-1;r&=~(1<<o),n+=1;var i=32-we(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Vr=1<<32-we(t)+o|n<<o|r,Hr=i+e}else Vr=1<<i|n<<o|r,Hr=e}function qr(e){null!==e.return&&(Ur(e,1),Wr(e,1,0))}function Kr(e){for(;e===$r;)$r=Pr[--Lr],Pr[Lr]=null,Ir=Pr[--Lr],Pr[Lr]=null;for(;e===Fr;)Fr=zr[--Br],zr[Br]=null,Hr=zr[--Br],zr[Br]=null,Vr=zr[--Br],zr[Br]=null}var Jr=null,Gr=null,Qr=!1,Xr=null,Yr=!1,Zr=Error(s(519));function eo(e){throw io(Dr(Error(s(418,"")),e)),Zr}function to(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ie]=e,t[ze]=r,n){case"dialog":ju("cancel",t),ju("close",t);break;case"iframe":case"object":case"embed":ju("load",t);break;case"video":case"audio":for(n=0;n<Tu.length;n++)ju(Tu[n],t);break;case"source":ju("error",t);break;case"img":case"image":case"link":ju("error",t),ju("load",t);break;case"details":ju("toggle",t);break;case"input":ju("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":ju("invalid",t);break;case"textarea":ju("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Vu(t.textContent,n)?(null!=r.popover&&(ju("beforetoggle",t),ju("toggle",t)),null!=r.onScroll&&ju("scroll",t),null!=r.onScrollEnd&&ju("scrollend",t),null!=r.onClick&&(t.onclick=Hu),t=!0):t=!1,t||eo(e)}function no(e){for(Jr=e.return;Jr;)switch(Jr.tag){case 3:case 27:return void(Yr=!0);case 5:case 13:return void(Yr=!1);default:Jr=Jr.return}}function ro(e){if(e!==Jr)return!1;if(!Qr)return no(e),Qr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Yu(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Gr&&eo(e),no(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Gr=ad(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Gr=null}}else Gr=Jr?ad(e.stateNode.nextSibling):null;return!0}function oo(){Gr=Jr=null,Qr=!1}function io(e){null===Xr?Xr=[e]:Xr.push(e)}var so=Error(s(460)),ao=Error(s(474)),lo={then:function(){}};function co(e){return"fulfilled"===(e=e.status)||"rejected"===e}function uo(){}function ho(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(uo,uo),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===so)throw Error(s(483));throw e;default:if("string"===typeof t.status)t.then(uo,uo);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===so)throw Error(s(483));throw e}throw po=t,so}}var po=null;function fo(){if(null===po)throw Error(s(459));var e=po;return po=null,e}var mo=null,go=0;function yo(e){var t=go;return go+=1,null===mo&&(mo=[]),ho(mo,e,t)}function vo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function bo(e,t){if(t.$$typeof===l)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=$l(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vl(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n,r){var i=n.type;return i===d?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===x&&wo(i)===t.type)?(vo(t=o(t,n.props),n),t.return=e,t):(vo(t=zl(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hl(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Bl(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Vl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return vo(n=zl(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case u:return(t=Hl(t,e.mode,n)).return=e,t;case x:return m(e,t=(0,t._init)(t._payload),n)}if(F(t)||E(t))return(t=Bl(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return m(e,yo(t),n);if(t.$$typeof===g)return m(e,Ta(e,t),n);bo(e,t)}return null}function y(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===o?h(e,t,n,r):null;case u:return n.key===o?p(e,t,n,r):null;case x:return y(e,t,n=(o=n._init)(n._payload),r)}if(F(n)||E(n))return null!==o?null:f(e,t,n,r,null);if("function"===typeof n.then)return y(e,t,yo(n),r);if(n.$$typeof===g)return y(e,t,Ta(e,n),r);bo(e,n)}return null}function v(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case c:return h(t,e=e.get(null===r.key?n:r.key)||null,r,o);case u:return p(t,e=e.get(null===r.key?n:r.key)||null,r,o);case x:return v(e,t,n,r=(0,r._init)(r._payload),o)}if(F(r)||E(r))return f(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return v(e,t,n,yo(r),o);if(r.$$typeof===g)return v(e,t,n,Ta(t,r),o);bo(t,r)}return null}function b(l,h,p,f){if("object"===typeof p&&null!==p&&p.type===d&&null===p.key&&(p=p.props.children),"object"===typeof p&&null!==p){switch(p.$$typeof){case c:e:{for(var w=p.key;null!==h;){if(h.key===w){if((w=p.type)===d){if(7===h.tag){n(l,h.sibling),(f=o(h,p.props.children)).return=l,l=f;break e}}else if(h.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===x&&wo(w)===h.type){n(l,h.sibling),vo(f=o(h,p.props),p),f.return=l,l=f;break e}n(l,h);break}t(l,h),h=h.sibling}p.type===d?((f=Bl(p.props.children,l.mode,f,p.key)).return=l,l=f):(vo(f=zl(p.type,p.key,p.props,null,l.mode,f),p),f.return=l,l=f)}return a(l);case u:e:{for(w=p.key;null!==h;){if(h.key===w){if(4===h.tag&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(l,h.sibling),(f=o(h,p.children||[])).return=l,l=f;break e}n(l,h);break}t(l,h),h=h.sibling}(f=Hl(p,l.mode,f)).return=l,l=f}return a(l);case x:return b(l,h,p=(w=p._init)(p._payload),f)}if(F(p))return function(o,s,a,l){for(var c=null,u=null,d=s,h=s=0,p=null;null!==d&&h<a.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var f=y(o,d,a[h],l);if(null===f){null===d&&(d=p);break}e&&d&&null===f.alternate&&t(o,d),s=i(f,s,h),null===u?c=f:u.sibling=f,u=f,d=p}if(h===a.length)return n(o,d),Qr&&Ur(o,h),c;if(null===d){for(;h<a.length;h++)null!==(d=m(o,a[h],l))&&(s=i(d,s,h),null===u?c=d:u.sibling=d,u=d);return Qr&&Ur(o,h),c}for(d=r(d);h<a.length;h++)null!==(p=v(d,o,h,a[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),s=i(p,s,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach((function(e){return t(o,e)})),Qr&&Ur(o,h),c}(l,h,p,f);if(E(p)){if("function"!==typeof(w=E(p)))throw Error(s(150));return function(o,a,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,h=a,p=a=0,f=null,g=l.next();null!==h&&!g.done;p++,g=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var b=y(o,h,g.value,c);if(null===b){null===h&&(h=f);break}e&&h&&null===b.alternate&&t(o,h),a=i(b,a,p),null===d?u=b:d.sibling=b,d=b,h=f}if(g.done)return n(o,h),Qr&&Ur(o,p),u;if(null===h){for(;!g.done;p++,g=l.next())null!==(g=m(o,g.value,c))&&(a=i(g,a,p),null===d?u=g:d.sibling=g,d=g);return Qr&&Ur(o,p),u}for(h=r(h);!g.done;p++,g=l.next())null!==(g=v(h,o,p,g.value,c))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),a=i(g,a,p),null===d?u=g:d.sibling=g,d=g);return e&&h.forEach((function(e){return t(o,e)})),Qr&&Ur(o,p),u}(l,h,p=w.call(p),f)}if("function"===typeof p.then)return b(l,h,yo(p),f);if(p.$$typeof===g)return b(l,h,Ta(l,p),f);bo(l,p)}return"string"===typeof p&&""!==p||"number"===typeof p||"bigint"===typeof p?(p=""+p,null!==h&&6===h.tag?(n(l,h.sibling),(f=o(h,p)).return=l,l=f):(n(l,h),(f=Vl(p,l.mode,f)).return=l,l=f),a(l)):n(l,h)}return function(e,t,n,r){try{go=0;var o=b(e,t,n,r);return mo=null,o}catch(s){if(s===so)throw s;var i=Pl(29,s,null,e.mode);return i.lanes=r,i.return=e,i}}}var ko=xo(!0),So=xo(!1),Co=q(null),Eo=q(0);function To(e,t){J(Eo,e=cc),J(Co,t),cc=e|t.baseLanes}function No(){J(Eo,cc),J(Co,Co.current)}function Oo(){cc=Eo.current,K(Co),K(Eo)}var jo=q(null),Mo=null;function Ao(e){var t=e.alternate;J(Po,1&Po.current),J(jo,e),null===Mo&&(null===t||null!==Co.current||null!==t.memoizedState)&&(Mo=e)}function _o(e){if(22===e.tag){if(J(Po,Po.current),J(jo,e),null===Mo){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Mo=e)}}else Ro()}function Ro(){J(Po,Po.current),J(jo,jo.current)}function Do(e){K(jo),Mo===e&&(Mo=null),K(Po)}var Po=q(0);function Lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $o="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Io=r.unstable_scheduleCallback,zo=r.unstable_NormalPriority,Bo={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fo(){return{controller:new $o,data:new Map,refCount:0}}function Vo(e){e.refCount--,0===e.refCount&&Io(zo,(function(){e.controller.abort()}))}var Ho=null,Uo=0,Wo=0,qo=null;function Ko(){if(0===--Uo&&null!==Ho){null!==qo&&(qo.status="fulfilled");var e=Ho;Ho=null,Wo=0,qo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Jo=M.S;M.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ho){var n=Ho=[];Uo=0,Wo=xu(),qo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Uo++,t.then(Ko,Ko)}(0,t),null!==Jo&&Jo(e,t)};var Go=q(null);function Qo(){var e=Go.current;return null!==e?e:tc.pooledCache}function Xo(e,t){J(Go,null===t?Go.current:t.pool)}function Yo(){var e=Qo();return null===e?null:{parent:Bo._currentValue,pool:e}}var Zo=0,ei=null,ti=null,ni=null,ri=!1,oi=!1,ii=!1,si=0,ai=0,li=null,ci=0;function ui(){throw Error(s(321))}function di(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function hi(e,t,n,r,o,i){return Zo=i,ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=null===e||null===e.memoizedState?Ts:Ns,ii=!1,i=n(r,o),ii=!1,oi&&(i=fi(t,n,r,o)),pi(e),i}function pi(e){M.H=Es;var t=null!==ti&&null!==ti.next;if(Zo=0,ni=ti=ei=null,ri=!1,ai=0,li=null,t)throw Error(s(300));null===e||Us||null!==(e=e.dependencies)&&Sa(e)&&(Us=!0)}function fi(e,t,n,r){ei=e;var o=0;do{if(oi&&(li=null),ai=0,oi=!1,25<=o)throw Error(s(301));if(o+=1,ni=ti=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}M.H=Os,i=t(n,r)}while(oi);return i}function mi(){var e=M.H,t=e.useState()[0];return t="function"===typeof t.then?xi(t):t,e=e.useState()[0],(null!==ti?ti.memoizedState:null)!==e&&(ei.flags|=1024),t}function gi(){var e=0!==si;return si=0,e}function yi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function vi(e){if(ri){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ri=!1}Zo=0,ni=ti=ei=null,oi=!1,ai=si=0,li=null}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ni?ei.memoizedState=ni=e:ni=ni.next=e,ni}function wi(){if(null===ti){var e=ei.alternate;e=null!==e?e.memoizedState:null}else e=ti.next;var t=null===ni?ei.memoizedState:ni.next;if(null!==t)ni=t,ti=e;else{if(null===e){if(null===ei.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(ti=e).memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},null===ni?ei.memoizedState=ni=e:ni=ni.next=e}return ni}function xi(e){var t=ai;return ai+=1,null===li&&(li=[]),e=ho(li,e,t),t=ei,null===(null===ni?t.memoizedState:ni.next)&&(t=t.alternate,M.H=null===t||null===t.memoizedState?Ts:Ns),e}function ki(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return xi(e);if(e.$$typeof===g)return Ea(e)}throw Error(s(438,String(e)))}function Si(e){var t=null,n=ei.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ei.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=S;return t.index++,n}function Ci(e,t){return"function"===typeof t?t(e):t}function Ei(e){return Ti(wi(),ti,e)}function Ti(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var o=e.baseQueue,i=r.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}t.baseQueue=o=i,r.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var l=a=null,c=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(rc&h)===h:(Zo&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Wo&&(d=!0);else{if((Zo&p)===p){u=u.next,p===Wo&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=i):c=c.next=h,ei.lanes|=p,dc|=p}h=u.action,ii&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,a=i):c=c.next=p,ei.lanes|=h,dc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=i:c.next=l,!Jn(i,e.memoizedState)&&(Us=!0,d&&null!==(n=qo)))throw n;e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ni(e){var t=wi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{i=e(i,a.action),a=a.next}while(a!==o);Jn(i,t.memoizedState)||(Us=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Oi(e,t,n){var r=ei,o=wi(),i=Qr;if(i){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Jn((ti||o).memoizedState,n);if(a&&(o.memoizedState=n,Us=!0),o=o.queue,Zi(Ai.bind(null,r,o,e),[e]),o.getSnapshot!==t||a||null!==ni&&1&ni.memoizedState.tag){if(r.flags|=2048,Ji(9,Mi.bind(null,r,o,n,t),{destroy:void 0},null),null===tc)throw Error(s(349));i||0!==(60&Zo)||ji(r,t,n)}return n}function ji(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ei.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mi(e,t,n,r){t.value=n,t.getSnapshot=r,_i(t)&&Ri(e)}function Ai(e,t,n){return n((function(){_i(t)&&Ri(e)}))}function _i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function Ri(e){var t=jr(e,2);null!==t&&_c(t,e,2)}function Di(e){var t=bi();if("function"===typeof e){var n=e;if(e=n(),ii){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},t}function Pi(e,t,n,r){return e.baseState=n,Ti(e,ti,"function"===typeof r?r:Ci)}function Li(e,t,n,r,o){if(ks(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==M.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,$i(t,i)):(i.next=n.next,t.pending=n.next=i)}}function $i(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=M.T,s={};M.T=s;try{var a=n(o,r),l=M.S;null!==l&&l(s,a),Ii(e,t,a)}catch(c){Bi(e,t,c)}finally{M.T=i}}else try{Ii(e,t,i=n(o,r))}catch(u){Bi(e,t,u)}}function Ii(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){zi(e,t,n)}),(function(n){return Bi(e,t,n)})):zi(e,t,n)}function zi(e,t,n){t.status="fulfilled",t.value=n,Fi(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,$i(e,n)))}function Bi(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Fi(t),t=t.next}while(t!==r)}e.action=null}function Fi(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Vi(e,t){return t}function Hi(e,t){if(Qr){var n=tc.formState;if(null!==n){e:{var r=ei;if(Qr){if(Gr){t:{for(var o=Gr,i=Yr;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=ad(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){Gr=ad(o.nextSibling),r="F!"===o.data;break e}}eo(r)}r=!1}r&&(t=n[0])}}return(n=bi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},n.queue=r,n=bs.bind(null,ei,r),r.dispatch=n,r=Di(!1),i=xs.bind(null,ei,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=bi()).queue=o,n=Li.bind(null,ei,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ui(e){return Wi(wi(),ti,e)}function Wi(e,t,n){t=Ti(e,t,Vi)[0],e=Ei(Ci)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?xi(t):t;var r=wi(),o=r.queue,i=o.dispatch;return n!==r.memoizedState&&(ei.flags|=2048,Ji(9,qi.bind(null,o,n),{destroy:void 0},null)),[t,i,e]}function qi(e,t){e.action=t}function Ki(e){var t=wi(),n=ti;if(null!==n)return Wi(t,n,e);wi(),t=t.memoizedState;var r=(n=wi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ji(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=ei.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Gi(){return wi().memoizedState}function Qi(e,t,n,r){var o=bi();ei.flags|=e,o.memoizedState=Ji(1|t,n,{destroy:void 0},void 0===r?null:r)}function Xi(e,t,n,r){var o=wi();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==ti&&null!==r&&di(r,ti.memoizedState.deps)?o.memoizedState=Ji(t,n,i,r):(ei.flags|=e,o.memoizedState=Ji(1|t,n,i,r))}function Yi(e,t){Qi(8390656,8,e,t)}function Zi(e,t){Xi(2048,8,e,t)}function es(e,t){return Xi(4,2,e,t)}function ts(e,t){return Xi(4,4,e,t)}function ns(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function rs(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Xi(4,4,ns.bind(null,t,e),n)}function os(){}function is(e,t){var n=wi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&di(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ss(e,t){var n=wi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&di(t,r[1]))return r[0];if(r=e(),ii){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function as(e,t,n){return void 0===n||0!==(1073741824&Zo)?e.memoizedState=t:(e.memoizedState=n,e=Ac(),ei.lanes|=e,dc|=e,n)}function ls(e,t,n,r){return Jn(n,t)?n:null!==Co.current?(e=as(e,n,r),Jn(e,t)||(Us=!0),e):0===(42&Zo)?(Us=!0,e.memoizedState=n):(e=Ac(),ei.lanes|=e,dc|=e,t)}function cs(e,t,n,r,o){var i=V.p;V.p=0!==i&&8>i?i:8;var s=M.T,a={};M.T=a,xs(e,!1,t,n);try{var l=o(),c=M.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r);ws(e,t,u,Mc())}else ws(e,t,r,Mc())}catch(d){ws(e,t,{then:function(){},status:"rejected",reason:d},Mc())}finally{V.p=i,M.T=s}}function us(){}function ds(e,t,n,r){if(5!==e.tag)throw Error(s(476));var o=hs(e).queue;cs(e,o,t,H,null===n?us:function(){return ps(e),n(r)})}function hs(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:H},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ps(e){ws(e,hs(e).next.queue,{},Mc())}function fs(){return Ea(Ld)}function ms(){return wi().memoizedState}function gs(){return wi().memoizedState}function ys(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Mc(),r=_a(t,e=Aa(n),n);return null!==r&&(_c(r,t,n),Ra(r,t,n)),t={cache:Fo()},void(e.payload=t)}t=t.return}}function vs(e,t,n){var r=Mc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ks(e)?Ss(t,n):null!==(n=Or(e,t,n,r))&&(_c(n,e,r),Cs(n,t,r))}function bs(e,t,n){ws(e,t,n,Mc())}function ws(e,t,n,r){var o={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ks(e))Ss(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Jn(a,s))return Nr(e,t,o,0),null===tc&&Tr(),!1}catch(l){}if(null!==(n=Or(e,t,o,r)))return _c(n,e,r),Cs(n,t,r),!0}return!1}function xs(e,t,n,r){if(r={lane:2,revertLane:xu(),action:r,hasEagerState:!1,eagerState:null,next:null},ks(e)){if(t)throw Error(s(479))}else null!==(t=Or(e,n,r,2))&&_c(t,e,2)}function ks(e){var t=e.alternate;return e===ei||null!==t&&t===ei}function Ss(e,t){oi=ri=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Cs(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}var Es={readContext:Ea,use:ki,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useLayoutEffect:ui,useInsertionEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useSyncExternalStore:ui,useId:ui};Es.useCacheRefresh=ui,Es.useMemoCache=ui,Es.useHostTransitionStatus=ui,Es.useFormState=ui,Es.useActionState=ui,Es.useOptimistic=ui;var Ts={readContext:Ea,use:ki,useCallback:function(e,t){return bi().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Yi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Qi(4194308,4,ns.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qi(4194308,4,e,t)},useInsertionEffect:function(e,t){Qi(4,2,e,t)},useMemo:function(e,t){var n=bi();t=void 0===t?null:t;var r=e();if(ii){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=bi();if(void 0!==n){var o=n(t);if(ii){be(!0);try{n(t)}finally{be(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=vs.bind(null,ei,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:function(e){var t=(e=Di(e)).queue,n=bs.bind(null,ei,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:os,useDeferredValue:function(e,t){return as(bi(),e,t)},useTransition:function(){var e=Di(!1);return e=cs.bind(null,ei,e.queue,!0,!1),bi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ei,o=bi();if(Qr){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===tc)throw Error(s(349));0!==(60&rc)||ji(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Yi(Ai.bind(null,r,i,e),[e]),r.flags|=2048,Ji(9,Mi.bind(null,r,i,n,t),{destroy:void 0},null),n},useId:function(){var e=bi(),t=tc.identifierPrefix;if(Qr){var n=Hr;t=":"+t+"R"+(n=(Vr&~(1<<32-we(Vr)-1)).toString(32)+n),0<(n=si++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ci++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return bi().memoizedState=ys.bind(null,ei)}};Ts.useMemoCache=Si,Ts.useHostTransitionStatus=fs,Ts.useFormState=Hi,Ts.useActionState=Hi,Ts.useOptimistic=function(e){var t=bi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=xs.bind(null,ei,!0,n),n.dispatch=t,[e,t]};var Ns={readContext:Ea,use:ki,useCallback:is,useContext:Ea,useEffect:Zi,useImperativeHandle:rs,useInsertionEffect:es,useLayoutEffect:ts,useMemo:ss,useReducer:Ei,useRef:Gi,useState:function(){return Ei(Ci)},useDebugValue:os,useDeferredValue:function(e,t){return ls(wi(),ti.memoizedState,e,t)},useTransition:function(){var e=Ei(Ci)[0],t=wi().memoizedState;return["boolean"===typeof e?e:xi(e),t]},useSyncExternalStore:Oi,useId:ms};Ns.useCacheRefresh=gs,Ns.useMemoCache=Si,Ns.useHostTransitionStatus=fs,Ns.useFormState=Ui,Ns.useActionState=Ui,Ns.useOptimistic=function(e,t){return Pi(wi(),0,e,t)};var Os={readContext:Ea,use:ki,useCallback:is,useContext:Ea,useEffect:Zi,useImperativeHandle:rs,useInsertionEffect:es,useLayoutEffect:ts,useMemo:ss,useReducer:Ni,useRef:Gi,useState:function(){return Ni(Ci)},useDebugValue:os,useDeferredValue:function(e,t){var n=wi();return null===ti?as(n,e,t):ls(n,ti.memoizedState,e,t)},useTransition:function(){var e=Ni(Ci)[0],t=wi().memoizedState;return["boolean"===typeof e?e:xi(e),t]},useSyncExternalStore:Oi,useId:ms};function js(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:A({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Os.useCacheRefresh=gs,Os.useMemoCache=Si,Os.useHostTransitionStatus=fs,Os.useFormState=Ki,Os.useActionState=Ki,Os.useOptimistic=function(e,t){var n=wi();return null!==ti?Pi(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Ms={isMounted:function(e){return!!(e=e._reactInternals)&&$(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mc(),o=Aa(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=_a(e,o,r))&&(_c(t,e,r),Ra(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mc(),o=Aa(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=_a(e,o,r))&&(_c(t,e,r),Ra(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mc(),r=Aa(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=_a(e,r,n))&&(_c(t,e,n),Ra(t,e,n))}};function As(e,t,n,r,o,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Gn(n,r)||!Gn(o,i))}function _s(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ms.enqueueReplaceState(t,t.state,null)}function Rs(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=A({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}var Ds="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Ps(e){Ds(e)}function Ls(e){console.error(e)}function $s(e){Ds(e)}function Is(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function zs(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Bs(e,t,n){return(n=Aa(n)).tag=3,n.payload={element:null},n.callback=function(){Is(e,t)},n}function Fs(e){return(e=Aa(e)).tag=3,e}function Vs(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){zs(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){zs(t,n,r),"function"!==typeof o&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Hs=Error(s(461)),Us=!1;function Ws(e,t,n,r){t.child=null===e?So(t,null,n,r):ko(t,e.child,n,r)}function qs(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var s={};for(var a in r)"ref"!==a&&(s[a]=r[a])}else s=r;return Ca(t),r=hi(e,t,n,s,i,o),a=gi(),null===e||Us?(Qr&&a&&qr(t),t.flags|=1,Ws(e,t,r,o),t.child):(yi(e,t,o),ha(e,t,o))}function Ks(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Ll(i)||void 0!==i.defaultProps||null!==n.compare?((e=zl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Js(e,t,i,r,o))}if(i=e.child,!pa(e,o)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:Gn)(s,r)&&e.ref===t.ref)return ha(e,t,o)}return t.flags|=1,(e=$l(i,r)).ref=t.ref,e.return=t,t.child=e}function Js(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(Gn(i,r)&&e.ref===t.ref){if(Us=!1,t.pendingProps=r=i,!pa(e,o))return t.lanes=e.lanes,ha(e,t,o);0!==(131072&e.flags)&&(Us=!0)}}return Ys(e,t,n,r,o)}function Gs(e,t,n){var r=t.pendingProps,o=r.children,i=0!==(2&t.stateNode._pendingVisibility),s=null!==e?e.memoizedState:null;if(Xs(e,t),"hidden"===r.mode||i){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(o=t.child=e.child,i=0;null!==o;)i=i|o.lanes|o.childLanes,o=o.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Qs(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Qs(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xo(0,null!==s?s.cachePool:null),null!==s?To(t,s):No(),_o(t)}else null!==s?(Xo(0,s.cachePool),To(t,s),Ro(),t.memoizedState=null):(null!==e&&Xo(0,null),No(),Ro());return Ws(e,t,o,n),t.child}function Qs(e,t,n,r){var o=Qo();return o=null===o?null:{parent:Bo._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&Xo(0,null),No(),_o(t),null!==e&&ka(e,t,r,!0),null}function Xs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function Ys(e,t,n,r,o){return Ca(t),n=hi(e,t,n,r,void 0,o),r=gi(),null===e||Us?(Qr&&r&&qr(t),t.flags|=1,Ws(e,t,n,o),t.child):(yi(e,t,o),ha(e,t,o))}function Zs(e,t,n,r,o,i){return Ca(t),t.updateQueue=null,n=fi(t,r,n,o),pi(e),r=gi(),null===e||Us?(Qr&&r&&qr(t),t.flags|=1,Ws(e,t,n,i),t.child):(yi(e,t,i),ha(e,t,i))}function ea(e,t,n,r,o){if(Ca(t),null===t.stateNode){var i=_r,s=n.contextType;"object"===typeof s&&null!==s&&(i=Ea(s)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=Ms,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ja(t),s=n.contextType,i.context="object"===typeof s&&null!==s?Ea(s):_r,i.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(js(t,n,s,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(s=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),s!==i.state&&Ms.enqueueReplaceState(i,i.state,null),$a(t,r,i,o),La(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var a=t.memoizedProps,l=Rs(n,a);i.props=l;var c=i.context,u=n.contextType;s=_r,"object"===typeof u&&null!==u&&(s=Ea(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a||c!==s)&&_s(t,i,r,s),Oa=!1;var h=t.memoizedState;i.state=h,$a(t,r,i,o),La(),c=t.memoizedState,a||h!==c||Oa?("function"===typeof d&&(js(t,n,d,r),c=t.memoizedState),(l=Oa||As(t,n,l,r,h,c,s))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=s,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ma(e,t),u=Rs(n,s=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=_r,"object"===typeof c&&null!==c&&(l=Ea(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||h!==l)&&_s(t,i,r,l),Oa=!1,h=t.memoizedState,i.state=h,$a(t,r,i,o),La();var p=t.memoizedState;s!==d||h!==p||Oa||null!==e&&null!==e.dependencies&&Sa(e.dependencies)?("function"===typeof a&&(js(t,n,a,r),p=t.memoizedState),(u=Oa||As(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Sa(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Xs(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,n,o)):Ws(e,t,n,o),t.memoizedState=i.state,e=t.child):e=ha(e,t,o),e}function ta(e,t,n,r){return oo(),t.flags|=256,Ws(e,t,n,r),t.child}var na={dehydrated:null,treeContext:null,retryLane:0};function ra(e){return{baseLanes:e,cachePool:Yo()}}function oa(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=fc),e}function ia(e,t,n){var r,o=t.pendingProps,i=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Po.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Qr){if(i?Ao(t):Ro(),Qr){var l,c=Gr;if(l=c){e:{for(l=c,c=Yr;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=ad(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Fr?{id:Vr,overflow:Hr}:null,retryLane:536870912},(l=Pl(18,null,null,0)).stateNode=c,l.return=t,t.child=l,Jr=t,Gr=null,l=!0):l=!1}l||eo(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Do(t)}return c=o.children,o=o.fallback,i?(Ro(),c=aa({mode:"hidden",children:c},i=t.mode),o=Bl(o,i,n,null),c.return=t,o.return=t,c.sibling=o,t.child=c,(i=t.child).memoizedState=ra(n),i.childLanes=oa(e,r,n),t.memoizedState=na,o):(Ao(t),sa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(Ao(t),t.flags&=-257,t=la(e,t,n)):null!==t.memoizedState?(Ro(),t.child=e.child,t.flags|=128,t=null):(Ro(),i=o.fallback,c=t.mode,o=aa({mode:"visible",children:o.children},c),(i=Bl(i,c,n,null)).flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,ko(t,e.child,null,n),(o=t.child).memoizedState=ra(n),o.childLanes=oa(e,r,n),t.memoizedState=na,t=i);else if(Ao(t),"$!"===c.data){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(o=Error(s(419))).stack="",o.digest=r,io({value:o,source:null,stack:null}),t=la(e,t,n)}else if(Us||ka(e,t,n,!1),r=0!==(n&e.childLanes),Us||r){if(null!==(r=tc)){if(0!==(42&(o=n&-n)))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(0!==(o=0!==(o&(r.suspendedLanes|n))?0:o)&&o!==l.retryLane)throw l.retryLane=o,jr(e,o),_c(r,e,o),Hs}"$?"===c.data||Uc(),t=la(e,t,n)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=au.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,Gr=ad(c.nextSibling),Jr=t,Qr=!0,Xr=null,Yr=!1,null!==e&&(zr[Br++]=Vr,zr[Br++]=Hr,zr[Br++]=Fr,Vr=e.id,Hr=e.overflow,Fr=t),(t=sa(t,o.children)).flags|=4096);return t}return i?(Ro(),i=o.fallback,c=t.mode,u=(l=e.child).sibling,(o=$l(l,{mode:"hidden",children:o.children})).subtreeFlags=31457280&l.subtreeFlags,null!==u?i=$l(u,i):(i=Bl(i,c,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,null===(c=e.child.memoizedState)?c=ra(n):(null!==(l=c.cachePool)?(u=Bo._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Yo(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=oa(e,r,n),t.memoizedState=na,o):(Ao(t),e=(n=e.child).sibling,(n=$l(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function sa(e,t){return(t=aa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function aa(e,t){return Fl(e,t,0,null)}function la(e,t,n){return ko(t,e.child,null,n),(e=sa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ca(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function ua(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function da(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Ws(e,t,r.children,n),0!==(2&(r=Po.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ca(e,n,t);else if(19===e.tag)ca(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(J(Po,r),o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Lo(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ua(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Lo(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ua(t,!0,n,null,i);break;case"together":ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),dc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ka(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=$l(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$l(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function pa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Sa(e))}function fa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Us=!0;else{if(!pa(e,n)&&0===(128&t.flags))return Us=!1,function(e,t,n){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),va(t,Bo,e.memoizedState.cache),oo();break;case 27:case 5:te(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:va(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ao(t),t.flags|=128,null):0!==(n&t.child.childLanes)?ia(e,t,n):(Ao(t),null!==(e=ha(e,t,n))?e.sibling:null);Ao(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ka(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return da(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),J(Po,Po.current),r)break;return null;case 22:case 23:return t.lanes=0,Gs(e,t,n);case 24:va(t,Bo,e.memoizedState.cache)}return ha(e,t,n)}(e,t,n);Us=0!==(131072&e.flags)}else Us=!1,Qr&&0!==(1048576&t.flags)&&Wr(t,Ir,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,o=r._init;if(r=o(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((o=r.$$typeof)===y){t.tag=11,t=qs(null,t,r,e,n);break e}if(o===w){t.tag=14,t=Ks(null,t,r,e,n);break e}}throw t=N(r)||r,Error(s(306,t,""))}Ll(r)?(e=Rs(r,e),t.tag=1,t=ea(null,t,r,e,n)):(t.tag=0,t=Ys(null,t,r,e,n))}return t;case 0:return Ys(e,t,t.type,t.pendingProps,n);case 1:return ea(e,t,r=t.type,o=Rs(r,t.pendingProps),n);case 3:e:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(s(387));var i=t.pendingProps;r=(o=t.memoizedState).element,Ma(e,t),$a(t,i,null,n);var a=t.memoizedState;if(i=a.cache,va(t,Bo,i),i!==o.cache&&xa(t,[Bo],n,!0),La(),i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=ta(e,t,i,n);break e}if(i!==r){io(r=Dr(Error(s(424)),t)),t=ta(e,t,i,n);break e}for(Gr=ad(t.stateNode.containerInfo.firstChild),Jr=t,Qr=!0,Xr=null,Yr=!0,n=So(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(oo(),i===r){t=ha(e,t,n);break e}Ws(e,t,i,n)}t=t.child}return t;case 26:return Xs(e,t),null===e?(n=gd(t.type,null,t.pendingProps,null))?t.memoizedState=n:Qr||(n=t.type,e=t.pendingProps,(r=Gu(X.current).createElement(n))[Ie]=t,r[ze]=e,qu(r,n,e),Xe(r),t.stateNode=r):t.memoizedState=gd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Qr&&(r=t.stateNode=cd(t.type,t.pendingProps,X.current),Jr=t,Yr=!0,Gr=ad(r.firstChild)),r=t.pendingProps.children,null!==e||Qr?Ws(e,t,r,n):t.child=ko(t,null,r,n),Xs(e,t),t.child;case 5:return null===e&&Qr&&((o=r=Gr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[We])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=ad(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,Yr))?(t.stateNode=r,Jr=t,Gr=ad(r.firstChild),Yr=!1,o=!0):o=!1),o||eo(t)),te(t),o=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,r=i.children,Yu(o,i)?r=null:null!==a&&Yu(o,a)&&(t.flags|=32),null!==t.memoizedState&&(o=hi(e,t,mi,null,null,n),Ld._currentValue=o),Xs(e,t),Ws(e,t,r,n),t.child;case 6:return null===e&&Qr&&((e=n=Gr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=ad(e.nextSibling)))return null}return e}(n,t.pendingProps,Yr))?(t.stateNode=n,Jr=t,Gr=null,e=!0):e=!1),e||eo(t)),null;case 13:return ia(e,t,n);case 4:return Z(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ko(t,null,r,n):Ws(e,t,r,n),t.child;case 11:return qs(e,t,t.type,t.pendingProps,n);case 7:return Ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ws(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,va(t,t.type,r.value),Ws(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Ca(t),r=r(o=Ea(o)),t.flags|=1,Ws(e,t,r,n),t.child;case 14:return Ks(e,t,t.type,t.pendingProps,n);case 15:return Js(e,t,t.type,t.pendingProps,n);case 19:return da(e,t,n);case 22:return Gs(e,t,n);case 24:return Ca(t),r=Ea(Bo),null===e?(null===(o=Qo())&&(o=tc,i=Fo(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:r,cache:o},ja(t),va(t,Bo,o)):(0!==(e.lanes&n)&&(Ma(e,t),$a(t,null,null,n),La()),o=e.memoizedState,i=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),va(t,Bo,r)):(r=i.cache,va(t,Bo,r),r!==o.cache&&xa(t,[Bo],n,!0))),Ws(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}var ma=q(null),ga=null,ya=null;function va(e,t,n){J(ma,t._currentValue),t._currentValue=n}function ba(e){e._currentValue=ma.current,K(ma)}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var a=o.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=o;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),wa(i.return,n,e),r||(a=null);break e}i=l.next}}else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(i=a.alternate)&&(i.lanes|=n),wa(a,n,e),a=null}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}}function ka(e,t,n,r){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(0!==(524288&o.flags))i=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var a=o.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=o.type;Jn(o.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(o===Y.current){if(null===(a=o.alternate))throw Error(s(387));a.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Ld):e=[Ld])}o=o.return}null!==e&&xa(t,e,n,r),t.flags|=262144}function Sa(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ca(e){ga=e,ya=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ea(e){return Na(ga,e)}function Ta(e,t){return null===ga&&Ca(e),Na(e,t)}function Na(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ya){if(null===e)throw Error(s(308));ya=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ya=ya.next=t;return n}var Oa=!1;function ja(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _a(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ec)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Ar(e),Mr(e,null,n),t}return Nr(e,r,t,n),Ar(e)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}function Da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Pa=!1;function La(){if(Pa){if(null!==qo)throw qo}}function $a(e,t,n,r){Pa=!1;var o=e.updateQueue;Oa=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(s=0,u=c=l=null,a=i;;){var h=-536870913&a.lane,p=h!==a.lane;if(p?(rc&h)===h:(r&h)===h){0!==h&&h===Wo&&(Pa=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var f=e,m=a;h=t;var g=n;switch(m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(g,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(g,d,h):f)||void 0===h)break e;d=A({},d,h);break e;case 2:Oa=!0}}null!==(h=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=o.callbacks)?o.callbacks=[h]:p.push(h))}else p={lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(p=a).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null===i&&(o.shared.lanes=0),dc|=s,e.lanes=s,e.memoizedState=d}}function Ia(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function za(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ia(n[e],t)}function Ba(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,s=n.inst;r=i(),s.destroy=r}n=n.next}while(n!==o)}}catch(a){ru(t,t.return,a)}}function Fa(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var s=r.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,o=t;var l=n;try{a()}catch(c){ru(o,l,c)}}}r=r.next}while(r!==i)}}catch(c){ru(t,t.return,c)}}function Va(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{za(t,n)}catch(r){ru(e,e.return,r)}}}function Ha(e,t,n){n.props=Rs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ru(e,t,r)}}function Ua(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var o=r;break;default:o=r}"function"===typeof n?e.refCleanup=n(o):n.current=o}}catch(i){ru(e,t,i)}}function Wa(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){ru(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){ru(e,t,i)}else n.current=null}function qa(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){ru(e,e.return,o)}}function Ka(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,a=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||Uu(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":i=f;break;case"name":o=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":a=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:f!==h&&Uu(e,t,p,f,r,h)}}return void gt(e,a,l,c,u,d,i,o);case"select":for(i in f=a=l=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(i)||Uu(e,t,i,null,r,c)}for(o in r)if(i=r[o],c=n[o],r.hasOwnProperty(o)&&(null!=i||null!=c))switch(o){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":a=i;default:i!==c&&Uu(e,t,o,i,r,c)}return t=l,n=a,r=f,void(null!=p?bt(e,!!n,p,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Uu(e,t,l,null,r,o)}for(a in r)if(o=r[a],i=n[a],r.hasOwnProperty(a)&&(null!=o||null!=i))switch(a){case"value":p=o;break;case"defaultValue":f=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(s(91));break;default:o!==i&&Uu(e,t,a,o,r,i)}return void wt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Uu(e,t,m,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Uu(e,t,c,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Uu(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:Uu(e,t,u,p,r,f)}return;default:if(Tt(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&Wu(e,t,y,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||Wu(e,t,d,p,r,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&Uu(e,t,v,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||Uu(e,t,h,p,r,f)}(r,e.type,n,t),r[ze]=t}catch(o){ru(e,e.return,o)}}function Ja(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Ga(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ja(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Qa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Hu));else if(4!==r&&27!==r&&null!==(e=e.child))for(Qa(e,t,n),e=e.sibling;null!==e;)Qa(e,t,n),e=e.sibling}function Xa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Xa(e,t,n),e=e.sibling;null!==e;)Xa(e,t,n),e=e.sibling}var Ya=!1,Za=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null,rl=!1;function ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),4&r&&Ba(5,n);break;case 1:if(yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){ru(n,n.return,a)}else{var o=Rs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){ru(n,n.return,l)}}64&r&&Va(n),512&r&&Ua(n,n.return);break;case 3:if(yl(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{za(r,e)}catch(a){ru(n,n.return,a)}}break;case 26:yl(e,n),512&r&&Ua(n,n.return);break;case 27:case 5:yl(e,n),null===t&&4&r&&qa(n),512&r&&Ua(n,n.return);break;case 12:default:yl(e,n);break;case 13:yl(e,n),4&r&&ul(e,n);break;case 22:if(!(o=null!==n.memoizedState||Ya)){t=null!==t&&null!==t.memoizedState||Za;var i=Ya,s=Za;Ya=o,(Za=t)&&!s?bl(e,n,0!==(8772&n.subtreeFlags)):yl(e,n),Ya=i,Za=s}512&r&&("manual"===n.memoizedProps.mode?Ua(n,n.return):Wa(n,n.return))}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sl=null,al=!1;function ll(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:Za||Wa(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Za||Wa(n,t);var r=sl,o=al;for(sl=n.stateNode,ll(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);qe(n),sl=r,al=o;break;case 5:Za||Wa(n,t);case 6:o=sl;var i=al;if(sl=null,ll(e,t,n),al=i,null!==(sl=o))if(al)try{e=sl,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(a){ru(n,t,a)}else try{sl.removeChild(n.stateNode)}catch(a){ru(n,t,a)}break;case 18:null!==sl&&(al?(t=sl,n=n.stateNode,8===t.nodeType?id(t.parentNode,n):1===t.nodeType&&id(t,n),mh(t)):id(sl,n.stateNode));break;case 4:r=sl,o=al,sl=n.stateNode.containerInfo,al=!0,ll(e,t,n),sl=r,al=o;break;case 0:case 11:case 14:case 15:Za||Fa(2,n,t),Za||Fa(4,n,t),ll(e,t,n);break;case 1:Za||(Wa(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&Ha(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:Za||Wa(n,t),Za=(r=Za)||null!==n.memoizedState,ll(e,t,n),Za=r;break;default:ll(e,t,n)}}function ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{mh(e)}catch(n){ru(t,t.return,n)}}function dl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var r=lu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],i=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:sl=l.stateNode,al=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,al=!0;break e}l=l.return}if(null===sl)throw Error(s(160));cl(i,a,o),sl=null,al=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}var pl=null;function fl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),ml(e),4&r&&(Fa(3,e,e.return),Ba(3,e),Fa(5,e,e.return));break;case 1:hl(t,e),ml(e),512&r&&(Za||null===n||Wa(n,n.return)),64&r&&Ya&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=pl;if(hl(t,e),ml(e),512&r&&(Za||null===n||Wa(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(i=o.getElementsByTagName("title")[0])||i[We]||i[Ie]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(r),o.head.insertBefore(i,o.querySelector("head > title"))),qu(i,r,n),i[Ie]=e,Xe(i),r=i;break e;case"link":var a=Nd("link","href",o).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((i=a[l]).getAttribute("href")===(null==n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}qu(i=o.createElement(r),r,n),o.head.appendChild(i);break;case"meta":if(a=Nd("meta","content",o).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((i=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}qu(i=o.createElement(r),r,n),o.head.appendChild(i);break;default:throw Error(s(468,r))}i[Ie]=e,Xe(i),r=i}e.stateNode=r}else Od(o,e.type,e.stateNode);else e.stateNode=kd(o,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?Od(o,e.type,e.stateNode):kd(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ka(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){o=e.stateNode,i=e.memoizedProps;try{for(var c=o.firstChild;c;){var u=c.nextSibling,d=c.nodeName;c[We]||"HEAD"===d||"BODY"===d||"SCRIPT"===d||"STYLE"===d||"LINK"===d&&"stylesheet"===c.rel.toLowerCase()||o.removeChild(c),c=u}for(var h=e.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);qu(o,h,i),o[Ie]=e,o[ze]=i}catch(m){ru(e,e.return,m)}}case 5:if(hl(t,e),ml(e),512&r&&(Za||null===n||Wa(n,n.return)),32&e.flags){o=e.stateNode;try{kt(o,"")}catch(m){ru(e,e.return,m)}}4&r&&null!=e.stateNode&&Ka(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(el=!0);break;case 6:if(hl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){ru(e,e.return,m)}}break;case 3:if(Td=null,o=pl,pl=hd(t.containerInfo),hl(t,e),pl=o,ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{mh(t.containerInfo)}catch(m){ru(e,e.return,m)}el&&(el=!1,gl(e));break;case 4:r=pl,pl=hd(e.stateNode.containerInfo),hl(t,e),ml(e),pl=r;break;case 12:hl(t,e),ml(e);break;case 13:hl(t,e),ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dl(e,r)));break;case 22:if(512&r&&(Za||null===n||Wa(n,n.return)),c=null!==e.memoizedState,u=null!==n&&null!==n.memoizedState,Ya=(d=Ya)||c,Za=(h=Za)||u,hl(t,e),Za=h,Ya=d,ml(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=Ya||Za,null===n||u||t||vl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,c)"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{a=u.stateNode;var f=void 0!==(l=u.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){ru(u,u.return,m)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){ru(u,u.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,dl(e,n))));break;case 19:hl(t,e),ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dl(e,r)));break;case 21:break;default:hl(t,e),ml(e)}}function ml(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Ja(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 27:var o=r.stateNode;Xa(e,Ga(e),o);break;case 5:var i=r.stateNode;32&r.flags&&(kt(i,""),r.flags&=-33),Xa(e,Ga(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;Qa(e,Ga(e),a);break;default:throw Error(s(161))}}}catch(l){ru(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)ol(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Fa(4,t,t.return),vl(t);break;case 1:Wa(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&Ha(t,t.return,n),vl(t);break;case 26:case 27:case 5:Wa(t,t.return),vl(t);break;case 22:Wa(t,t.return),null===t.memoizedState&&vl(t);break;default:vl(t)}e=e.sibling}}function bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:bl(o,i,n),Ba(4,i);break;case 1:if(bl(o,i,n),"function"===typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(c){ru(r,r.return,c)}if(null!==(o=(r=i).updateQueue)){var a=r.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Ia(l[o],a)}catch(c){ru(r,r.return,c)}}n&&64&s&&Va(i),Ua(i,i.return);break;case 26:case 27:case 5:bl(o,i,n),n&&null===r&&4&s&&qa(i),Ua(i,i.return);break;case 12:default:bl(o,i,n);break;case 13:bl(o,i,n),n&&4&s&&ul(o,i);break;case 22:null===i.memoizedState&&bl(o,i,n),Ua(i,i.return)}t=t.sibling}}function wl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Vo(n))}function xl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vo(e))}function kl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t,n,r),t=t.sibling}function Sl(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:kl(e,t,n,r),2048&o&&Ba(9,t);break;case 3:kl(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vo(e)));break;case 12:if(2048&o){kl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,a=i.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ru(t,t.return,l)}}else kl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,null!==t.memoizedState?4&i._visibility?kl(e,t,n,r):El(e,t):4&i._visibility?kl(e,t,n,r):(i._visibility|=4,Cl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&o&&wl(t.alternate,t);break;case 24:kl(e,t,n,r),2048&o&&xl(t.alternate,t);break;default:kl(e,t,n,r)}}function Cl(e,t,n,r,o){for(o=o&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,s=t,a=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:Cl(i,s,a,l,o),Ba(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?4&u._visibility?Cl(i,s,a,l,o):El(i,s):(u._visibility|=4,Cl(i,s,a,l,o)),o&&2048&c&&wl(s.alternate,s);break;case 24:Cl(i,s,a,l,o),o&&2048&c&&xl(s.alternate,s);break;default:Cl(i,s,a,l,o)}t=t.sibling}}function El(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:El(n,r),2048&o&&wl(r.alternate,r);break;case 24:El(n,r),2048&o&&xl(r.alternate,r);break;default:El(n,r)}t=t.sibling}}var Tl=8192;function Nl(e){if(e.subtreeFlags&Tl)for(e=e.child;null!==e;)Ol(e),e=e.sibling}function Ol(e){switch(e.tag){case 26:Nl(e),e.flags&Tl&&null!==e.memoizedState&&function(e,t,n){if(null===Md)throw Error(s(475));var r=Md;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var o=yd(n.href),i=e.querySelector(vd(o));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=_d.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Xe(i);i=e.ownerDocument||e,n=bd(n),(o=ud.get(o))&&Cd(n,o),Xe(i=i.createElement("link"));var a=i;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),qu(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=_d.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(pl,e.memoizedState,e.memoizedProps);break;case 5:default:Nl(e);break;case 3:case 4:var t=pl;pl=hd(e.stateNode.containerInfo),Nl(e),pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Tl,Tl=16777216,Nl(e),Tl=t):Nl(e))}}function jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ml(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Rl(r,e)}jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Al(e),e=e.sibling}function Al(e){switch(e.tag){case 0:case 11:case 15:Ml(e),2048&e.flags&&Fa(9,e,e.return);break;case 3:case 12:default:Ml(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,_l(e)):Ml(e)}}function _l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Rl(r,e)}jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Fa(8,t,t.return),_l(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,_l(t));break;default:_l(t)}e=e.sibling}}function Rl(e,t){for(;null!==nl;){var n=nl;switch(n.tag){case 0:case 11:case 15:Fa(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Vo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,nl=r;else e:for(n=e;null!==nl;){var o=(r=nl).sibling,i=r.return;if(il(r),r===n){nl=null;break e}if(null!==o){o.return=i,nl=o;break e}nl=i}}}function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Dl(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $l(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Il(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zl(e,t,n,r,o,i){var a=0;if(r=e,"function"===typeof e)Ll(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case d:return Bl(n.children,o,i,t);case h:a=8,o|=24;break;case p:return(e=Pl(12,n,t,2|o)).elementType=p,e.lanes=i,e;case v:return(e=Pl(13,n,t,o)).elementType=v,e.lanes=i,e;case b:return(e=Pl(19,n,t,o)).elementType=b,e.lanes=i,e;case k:return Fl(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:case g:a=10;break e;case m:a=9;break e;case y:a=11;break e;case w:a=14;break e;case x:a=16,r=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Pl(a,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Bl(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){(e=Pl(22,e,r,t)).elementType=k,e.lanes=n;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(s(456));if(0===(2&o._pendingVisibility)){var t=jr(e,2);null!==t&&(o._pendingVisibility|=2,_c(t,e,2))}},attach:function(){var e=o._current;if(null===e)throw Error(s(456));if(0!==(2&o._pendingVisibility)){var t=jr(e,2);null!==t&&(o._pendingVisibility&=-3,_c(t,e,2))}}};return e.stateNode=o,e}function Vl(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Hl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e){e.flags|=4}function Wl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!jd(t)){if(null!==(t=jo.current)&&((4194176&rc)===rc?null!==Mo:(62914560&rc)!==rc&&0===(536870912&rc)||t!==Mo))throw po=lo,ao;e.flags|=8192}}function ql(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Me():536870912,e.lanes|=t,mc|=t)}function Kl(e,t){if(!Qr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=31457280&o.subtreeFlags,r|=31457280&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gl(e,t,n){var r=t.pendingProps;switch(Kr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Jl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ba(Bo),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ro(t)?Ul(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Xr&&(Dc(Xr),Xr=null))),Jl(t),null;case 26:return n=t.memoizedState,null===e?(Ul(t),null!==n?(Jl(t),Wl(t,n)):(Jl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ul(t),Jl(t),Wl(t,n)):(Jl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ul(t),Jl(t),t.flags&=-16777217),null;case 27:ne(t),n=X.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ul(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Jl(t),null}e=G.current,ro(t)?to(t):(e=cd(o,r,n),t.stateNode=e,Ul(t))}return Jl(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ul(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Jl(t),null}if(e=G.current,ro(t))to(t);else{switch(o=Gu(X.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?o.createElement(n,{is:r.is}):o.createElement(n)}}e[Ie]=t,e[ze]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(qu(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ul(t)}}return Jl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ul(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=X.current,ro(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=Jr))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Vu(e.nodeValue,n)))||eo(t)}else(e=Gu(e).createTextNode(r))[Ie]=t,t.stateNode=e}return Jl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=ro(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[Ie]=t}else oo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Jl(t),o=!1}else null!==Xr&&(Dc(Xr),Xr=null),o=!0;if(!o)return 256&t.flags?(Do(t),t):(Do(t),null)}if(Do(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ql(t,t.updateQueue),Jl(t),null;case 4:return ee(),null===e&&_u(t.stateNode.containerInfo),Jl(t),null;case 10:return ba(t.type),Jl(t),null;case 19:if(K(Po),null===(o=t.memoizedState))return Jl(t),null;if(r=0!==(128&t.flags),null===(i=o.rendering))if(r)Kl(o,!1);else{if(0!==uc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Lo(e))){for(t.flags|=128,Kl(o,!1),e=i.updateQueue,t.updateQueue=e,ql(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Il(n,e),n=n.sibling;return J(Po,1&Po.current|2),t.child}e=e.sibling}null!==o.tail&&le()>wc&&(t.flags|=128,r=!0,Kl(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Lo(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ql(t,e),Kl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!Qr)return Jl(t),null}else 2*le()-o.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,Kl(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=o.last)?e.sibling=i:t.child=i,o.last=i)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=le(),t.sibling=null,e=Po.current,J(Po,r?1&e|2:1&e),t):(Jl(t),null);case 22:case 23:return Do(t),Oo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Jl(t),6&t.subtreeFlags&&(t.flags|=8192)):Jl(t),null!==(n=t.updateQueue)&&ql(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&K(Go),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ba(Bo),Jl(t),null;case 25:return null}throw Error(s(156,t.tag))}function Ql(e,t){switch(Kr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ba(Bo),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Do(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));oo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return K(Po),null;case 4:return ee(),null;case 10:return ba(t.type),null;case 22:case 23:return Do(t),Oo(),null!==e&&K(Go),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ba(Bo),null;default:return null}}function Xl(e,t){switch(Kr(t),t.tag){case 3:ba(Bo),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Do(t);break;case 19:K(Po);break;case 10:ba(t.type);break;case 22:case 23:Do(t),Oo(),null!==e&&K(Go);break;case 24:ba(Bo)}}var Yl={getCacheForType:function(e){var t=Ea(Bo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Zl="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,nc=null,rc=0,oc=0,ic=null,sc=!1,ac=!1,lc=!1,cc=0,uc=0,dc=0,hc=0,pc=0,fc=0,mc=0,gc=null,yc=null,vc=!1,bc=0,wc=1/0,xc=null,kc=null,Sc=!1,Cc=null,Ec=0,Tc=0,Nc=null,Oc=0,jc=null;function Mc(){if(0!==(2&ec)&&0!==rc)return rc&-rc;if(null!==M.T){return 0!==Wo?Wo:xu()}return Le()}function Ac(){0===fc&&(fc=0===(536870912&rc)||Qr?je():536870912);var e=jo.current;return null!==e&&(e.flags|=32),fc}function _c(e,t,n){(e===tc&&2===oc||null!==e.cancelPendingCommit)&&(Bc(e,0),$c(e,rc,fc,!1)),_e(e,n),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(hc|=n),4===uc&&$c(e,rc,fc,!1)),mu(e))}function Rc(e,t,n){if(0!==(6&ec))throw Error(s(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||Ne(e,t),o=r?function(e,t){var n=ec;ec|=2;var r=Vc(),o=Hc();tc!==e||rc!==t?(xc=null,wc=le()+500,Bc(e,t)):ac=Ne(e,t);e:for(;;)try{if(0!==oc&&null!==nc){t=nc;var i=ic;t:switch(oc){case 1:oc=0,ic=null,Qc(e,t,i,1);break;case 2:if(co(i)){oc=0,ic=null,Gc(t);break}t=function(){2===oc&&tc===e&&(oc=7),mu(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:co(i)?(oc=0,ic=null,Gc(t)):(oc=0,ic=null,Qc(e,t,i,7));break;case 5:var a=null;switch(nc.tag){case 26:a=nc.memoizedState;case 5:case 27:var l=nc;if(!a||jd(a)){oc=0,ic=null;var c=l.sibling;if(null!==c)nc=c;else{var u=l.return;null!==u?(nc=u,Xc(u)):nc=null}break t}}oc=0,ic=null,Qc(e,t,i,5);break;case 6:oc=0,ic=null,Qc(e,t,i,6);break;case 8:zc(),uc=6;break e;default:throw Error(s(462))}}Kc();break}catch(d){Fc(e,d)}return ya=ga=null,M.H=r,M.A=o,ec=n,null!==nc?0:(tc=null,rc=0,Tr(),uc)}(e,t):Wc(e,t,!0),i=r;;){if(0===o){ac&&!r&&$c(e,t,0,!1);break}if(6===o)$c(e,t,0,!sc);else{if(n=e.current.alternate,i&&!Lc(n)){o=Wc(e,t,!1),i=!1;continue}if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;o=gc;var c=l.current.memoizedState.isDehydrated;if(c&&(Bc(l,a).flags|=256),2!==(a=Wc(l,a,!1))){if(lc&&!c){l.errorRecoveryDisabledLanes|=i,hc|=i,o=4;break e}i=yc,yc=o,null!==i&&Dc(i)}o=a}if(i=!1,2!==o)continue}}if(1===o){Bc(e,0),$c(e,t,0,!0);break}e:{switch(r=e,o){case 0:case 1:throw Error(s(345));case 4:if((4194176&t)===t){$c(r,t,fc,!sc);break e}break;case 2:yc=null;break;case 3:case 5:break;default:throw Error(s(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(i=bc+300-le())){if($c(r,t,fc,!sc),0!==Te(r,0))break e;r.timeoutHandle=ed(Pc.bind(null,r,n,yc,xc,vc,t,fc,hc,mc,sc,2,-0,0),i)}else Pc(r,n,yc,xc,vc,t,fc,hc,mc,sc,0,-0,0)}}break}mu(e)}function Dc(e){null===yc?yc=e:yc.push.apply(yc,e)}function Pc(e,t,n,r,o,i,a,l,c,u,d,h,p){var f=t.subtreeFlags;if((8192&f||16785408===(16785408&f))&&(Md={stylesheets:null,count:0,unsuspend:Ad},Ol(t),null!==(t=function(){if(null===Md)throw Error(s(475));var e=Md;return e.stylesheets&&0===e.count&&Dd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Dd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Zc.bind(null,e,n,r,o,a,l,c,1,h,p)),void $c(e,i,a,!u);Zc(e,n,r,o,a,l,c,d,h,p)}function Lc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Jn(i(),o))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t,n,r){t&=~pc,t&=~hc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-we(o),s=1<<i;r[i]=-1,o&=~s}0!==n&&Re(e,n,t)}function Ic(){return 0!==(6&ec)||(gu(0,!1),!1)}function zc(){if(null!==nc){if(0===oc)var e=nc.return;else ya=ga=null,vi(e=nc),mo=null,go=0,e=nc;for(;null!==e;)Xl(e.alternate,e),e=e.return;nc=null}}function Bc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,td(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc(),tc=e,nc=n=$l(e.current,null),rc=t,oc=0,ic=null,sc=!1,ac=Ne(e,t),lc=!1,mc=fc=pc=hc=dc=uc=0,yc=gc=null,vc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-we(r),i=1<<o;t|=e[o],r&=~i}return cc=t,Tr(),n}function Fc(e,t){ei=null,M.H=Es,t===so?(t=fo(),oc=3):t===ao?(t=fo(),oc=4):oc=t===Hs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ic=t,null===nc&&(uc=1,Is(e,Dr(t,e.current)))}function Vc(){var e=M.H;return M.H=Es,null===e?Es:e}function Hc(){var e=M.A;return M.A=Yl,e}function Uc(){uc=4,sc||(4194176&rc)!==rc&&null!==jo.current||(ac=!0),0===(134217727&dc)&&0===(134217727&hc)||null===tc||$c(tc,rc,fc,!1)}function Wc(e,t,n){var r=ec;ec|=2;var o=Vc(),i=Hc();tc===e&&rc===t||(xc=null,Bc(e,t)),t=!1;var s=uc;e:for(;;)try{if(0!==oc&&null!==nc){var a=nc,l=ic;switch(oc){case 8:zc(),s=6;break e;case 3:case 2:case 6:null===jo.current&&(t=!0);var c=oc;if(oc=0,ic=null,Qc(e,a,l,c),n&&ac){s=0;break e}break;default:c=oc,oc=0,ic=null,Qc(e,a,l,c)}}qc(),s=uc;break}catch(u){Fc(e,u)}return t&&e.shellSuspendCounter++,ya=ga=null,ec=r,M.H=o,M.A=i,null===nc&&(tc=null,rc=0,Tr()),s}function qc(){for(;null!==nc;)Jc(nc)}function Kc(){for(;null!==nc&&!se();)Jc(nc)}function Jc(e){var t=fa(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Xc(e):nc=t}function Gc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Zs(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Zs(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:vi(t);default:Xl(n,t),t=fa(n,t=nc=Il(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Xc(e):nc=t}function Qc(e,t,n,r){ya=ga=null,vi(t),mo=null,go=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ka(t,n,o,!0),null!==(n=jo.current)){switch(n.tag){case 13:return null===Mo?Uc():null===n.alternate&&0===uc&&(uc=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===lo?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ou(e,r,o)),!1;case 22:return n.flags|=65536,r===lo?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ou(e,r,o)),!1}throw Error(s(435,n.tag))}return ou(e,r,o),Uc(),!1}if(Qr)return null!==(t=jo.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==Zr&&io(Dr(e=Error(s(422),{cause:r}),n))):(r!==Zr&&io(Dr(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=Dr(r,n),Da(e,o=Bs(e.stateNode,r,o)),4!==uc&&(uc=2)),!1;var i=Error(s(520),{cause:r});if(i=Dr(i,n),null===gc?gc=[i]:gc.push(i),4!==uc&&(uc=2),null===t)return!0;r=Dr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,Da(n,e=Bs(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===kc||!kc.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,Vs(o=Fs(o),e,n,r),Da(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,rc))return uc=1,Is(e,Dr(n,e.current)),void(nc=null)}catch(i){if(null!==o)throw nc=o,i;return uc=1,Is(e,Dr(n,e.current)),void(nc=null)}32768&t.flags?(Qr||1===r?e=!0:ac||0!==(536870912&rc)?e=!1:(sc=e=!0,(2===r||3===r||6===r)&&(null!==(r=jo.current)&&13===r.tag&&(r.flags|=16384))),Yc(t,e)):Xc(t)}function Xc(e){var t=e;do{if(0!==(32768&t.flags))return void Yc(t,sc);e=t.return;var n=Gl(t.alternate,t,cc);if(null!==n)return void(nc=n);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===uc&&(uc=5)}function Yc(e,t){do{var n=Ql(e.alternate,e);if(null!==n)return n.flags&=32767,void(nc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=n}while(null!==e);uc=6,nc=null}function Zc(e,t,n,r,o,i,a,l,c,u){var d=M.T,h=V.p;try{V.p=2,M.T=null,function(e,t,n,r,o,i,a,l){do{tu()}while(null!==Cc);if(0!==(6&ec))throw Error(s(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,r,o,i){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-we(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Re(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(s&~t))}(e,r,u|=Er,i,a,l),e===tc&&(nc=tc=null,rc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||Sc||(Sc=!0,Tc=u,Nc=n,function(e,t){oe(e,t)}(he,(function(){return tu(),null}))),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=M.T,M.T=null,i=V.p,V.p=2,a=ec,ec|=4,function(e,t){if(e=e.containerInfo,Ku=Ud,er(e=Zn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(l=a+o),h!==i||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===o&&(l=a),p===i&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ju={focusedElem:e,selectionRange:n},Ud=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(i=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=Rs(n.type,o,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ru(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))sd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=rl,rl=!1}(e,c),fl(c,e),tr(Ju,e.containerInfo),Ud=!!Ku,Ju=Ku=null,e.current=c,ol(e,c.alternate,c),ae(),ec=a,V.p=i,M.T=n):e.current=c,Sc?(Sc=!1,Cc=e,Ec=r):eu(e,u),u=e.pendingLanes,0===u&&(kc=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),mu(e),null!==t)for(o=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],o(u.value,{componentStack:u.stack});0!==(3&Ec)&&tu(),u=e.pendingLanes,0!==(4194218&r)&&0!==(42&u)?e===jc?Oc++:(Oc=0,jc=e):Oc=0,gu(0,!1)}(e,t,n,r,h,o,i,a)}finally{M.T=d,V.p=h}}function eu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Vo(t)))}function tu(){if(null!==Cc){var e=Cc,t=Tc;Tc=0;var n=Pe(Ec),r=M.T,o=V.p;try{if(V.p=32>n?32:n,M.T=null,null===Cc)var i=!1;else{n=Nc,Nc=null;var a=Cc,l=Ec;if(Cc=null,Ec=0,0!==(6&ec))throw Error(s(331));var c=ec;if(ec|=4,Al(a.current),Sl(a,a.current,l,n),ec=c,gu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,a)}catch(u){}i=!0}return i}finally{V.p=o,M.T=r,eu(e,t)}}return!1}function nu(e,t,n){t=Dr(n,t),null!==(e=_a(e,t=Bs(e.stateNode,t,2),2))&&(_e(e,2),mu(e))}function ru(e,t,n){if(3===e.tag)nu(e,e,n);else for(;null!==t;){if(3===t.tag){nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=Dr(n,e),null!==(r=_a(t,n=Fs(2),2))&&(Vs(n,r,t,e),_e(r,2),mu(r));break}}t=t.return}}function ou(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Zl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(lc=!0,o.add(n),e=iu.bind(null,e,t,n),t.then(e,e))}function iu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tc===e&&(rc&n)===n&&(4===uc||3===uc&&(62914560&rc)===rc&&300>le()-bc?0===(2&ec)&&Bc(e,0):pc|=n,mc===rc&&(mc=0)),mu(e)}function su(e,t){0===t&&(t=Me()),null!==(e=jr(e,t))&&(_e(e,t),mu(e))}function au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),su(e,n)}function lu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),su(e,n)}var cu=null,uu=null,du=!1,hu=!1,pu=!1,fu=0;function mu(e){var t;e!==uu&&null===e.next&&(null===uu?cu=uu=e:uu=uu.next=e),hu=!0,du||(du=!0,t=yu,rd((function(){0!==(6&ec)?oe(ue,t):t()})))}function gu(e,t){if(!pu&&hu){pu=!0;do{for(var n=!1,r=cu;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var s=r.suspendedLanes,a=r.pingedLanes;i=(1<<31-we(42|e)+1)-1,i=201326677&(i&=o&~(s&~a))?201326677&i|1:i?2|i:0}0!==i&&(n=!0,wu(r,i))}else i=rc,0===(3&(i=Te(r,r===tc?i:0)))||Ne(r,i)||(n=!0,wu(r,i));r=r.next}}while(n);pu=!1}}function yu(){hu=du=!1;var e=0;0!==fu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Zu&&(Zu=e,!0);return Zu=null,!1}()&&(e=fu),fu=0);for(var t=le(),n=null,r=cu;null!==r;){var o=r.next,i=vu(r,t);0===i?(r.next=null,null===n?cu=o:n.next=o,null===o&&(uu=n)):(n=r,(0!==e||0!==(3&i))&&(hu=!0)),r=o}gu(e,!1)}function vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var s=31-we(i),a=1<<s,l=o[s];-1===l?0!==(a&n)&&0===(a&r)||(o[s]=Oe(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}if(n=rc,n=Te(e,e===(t=tc)?n:0),r=e.callbackNode,0===n||e===t&&2===oc||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ne(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Pe(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=fe}return r=bu.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function bu(e,t){var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var r=rc;return 0===(r=Te(e,e===tc?r:0))?null:(Rc(e,r,t),vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?bu.bind(null,e):null)}function wu(e,t){if(tu())return null;Rc(e,t,!0)}function xu(){return 0===fu&&(fu=je()),fu}function ku(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:jt(""+e)}function Su(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Cu=0;Cu<xr.length;Cu++){var Eu=xr[Cu];kr(Eu.toLowerCase(),"on"+(Eu[0].toUpperCase()+Eu.slice(1)))}kr(pr,"onAnimationEnd"),kr(fr,"onAnimationIteration"),kr(mr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(br,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tu));function Ou(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;i=a,o.currentTarget=c;try{i(o)}catch(u){Ds(u)}o.currentTarget=null,i=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;i=a,o.currentTarget=c;try{i(o)}catch(u){Ds(u)}o.currentTarget=null,i=l}}}}function ju(e,t){var n=t[Fe];void 0===n&&(n=t[Fe]=new Set);var r=e+"__bubble";n.has(r)||(Ru(t,e,2,!1),n.add(r))}function Mu(e,t,n){var r=0;t&&(r|=4),Ru(n,e,r,t)}var Au="_reactListening"+Math.random().toString(36).slice(2);function _u(e){if(!e[Au]){e[Au]=!0,Ye.forEach((function(t){"selectionchange"!==t&&(Nu.has(t)||Mu(t,!1,e),Mu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Au]||(t[Au]=!0,Mu("selectionchange",!1,t))}}function Ru(e,t,n,r){switch(Xd(t)){case 2:var o=Wd;break;case 8:o=qd;break;default:o=Kd}n=o.bind(null,t,n,e),o=void 0,!It||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Du(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==a;){if(null===(s=Ke(a)))return;if(5===(l=s.tag)||6===l||26===l||27===l){r=i=s;continue e}a=a.parentNode}}r=r.return}Lt((function(){var r=i,o=At(n),s=[];e:{var a=wr.get(e);if(void 0!==a){var l=Yt,c=e;switch(e){case"keypress":if(0===Ut(n))break e;case"keydown":case"keyup":l=fn;break;case"focusin":c="focus",l=on;break;case"focusout":c="blur",l=on;break;case"beforeblur":case"afterblur":l=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gn;break;case pr:case fr:case mr:l=sn;break;case br:l=yn;break;case"scroll":case"scrollend":l=en;break;case"wheel":l=vn;break;case"copy":case"cut":case"paste":l=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=bn}var u=0!==(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=f;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===h||null!=(m=$t(f,h))&&u.push(Pu(f,m,p)),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,o),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Mt||!(c=n.relatedTarget||n.fromElement)||!Ke(c)&&!c[Be])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ke(c):null)&&(d=$(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=r),l!==c)){if(u=nn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:Ge(l),p=null==c?a:Ge(c),(a=new u(m,f+"leave",l,n,o)).target=d,a.relatedTarget=p,m=null,Ke(o)===r&&((u=new u(h,f+"enter",c,n,o)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=$u(p))f++;for(p=0,m=h;m;m=$u(m))p++;for(;0<f-p;)u=$u(u),f--;for(;0<p-f;)h=$u(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=$u(u),h=$u(h)}u=null}else u=null;null!==l&&Iu(s,a,l,u,!1),null!==c&&null!==d&&Iu(s,d,c,u,!0)}if("select"===(l=(a=r?Ge(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(An(a))if(In)g=Kn;else{g=Wn;var y=Un}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Tt(r.elementType)&&(g=$n):g=qn;switch(g&&(g=g(e,r))?_n(s,g,n,o):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),y=r?Ge(r):window,e){case"focusin":(An(y)||"true"===y.contentEditable)&&(rr=y,or=r,ir=null);break;case"focusout":ir=or=rr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,ar(s,n,o);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(s,n,o)}var v;if(xn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?Nn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Cn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(v=Ht()):(Ft="value"in(Bt=o)?Bt.value:Bt.textContent,jn=!0)),0<(y=Lu(r,b)).length&&(b=new ln(b,e,null,n,o),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=On(n))&&(b.data=v))),(v=Sn?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(Tn=!0,En);case"textInput":return(e=t.data)===En&&Tn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!xn&&Nn(e,t)?(e=Ht(),Vt=Ft=Bt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Lu(r,"onBeforeInput")).length&&(y=new ln("onBeforeInput","beforeinput",null,n,o),s.push({event:y,listeners:b}),y.data=v)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=ku((o[ze]||null).action),s=r.submitter;s&&null!==(t=(t=s[ze]||null)?ku(t.formAction):s.getAttribute("formAction"))&&(i=t,s=null);var a=new Yt("action","action",null,r,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==fu){var e=s?Su(o,s):new FormData(o);ds(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"===typeof i&&(a.preventDefault(),e=s?Su(o,s):new FormData(o),ds(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(s,e,r,n,o)}Ou(s,t)}))}function Pu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lu(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=$t(e,n))&&r.unshift(Pu(e,o,i)),null!=(o=$t(e,t))&&r.push(Pu(e,o,i))),e=e.return}return r}function $u(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Iu(e,t,n,r,o){for(var i=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,o?null!=(c=$t(n,i))&&s.unshift(Pu(n,c,l)):o||null!=(c=$t(n,i))&&s.push(Pu(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var zu=/\r\n?/g,Bu=/\u0000|\uFFFD/g;function Fu(e){return("string"===typeof e?e:""+e).replace(zu,"\n").replace(Bu,"")}function Vu(e,t){return t=Fu(t),Fu(e)===t}function Hu(){}function Uu(e,t,n,r,o,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":at(e,"class",r);break;case"tabIndex":at(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,n,r);break;case"style":Et(e,r,i);break;case"data":if("object"!==t){at(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=jt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Uu(e,t,"name",o.name,o,null),Uu(e,t,"formEncType",o.formEncType,o,null),Uu(e,t,"formMethod",o.formMethod,o,null),Uu(e,t,"formTarget",o.formTarget,o,null)):(Uu(e,t,"encType",o.encType,o,null),Uu(e,t,"method",o.method,o,null),Uu(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=jt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Hu);break;case"onScroll":null!=r&&ju("scroll",e);break;case"onScrollEnd":null!=r&&ju("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=jt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":ju("beforetoggle",e),ju("toggle",e),st(e,"popover",r);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":st(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&st(e,n=Nt.get(n)||n,r)}}function Wu(e,t,n,r,o,i){switch(n){case"style":Et(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&ju("scroll",e);break;case"onScrollEnd":null!=r&&ju("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Hu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ze.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(i=null!=(i=e[ze]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):st(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function qu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ju("error",e),ju("load",e);var r,o=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Uu(e,t,r,a,n,null)}}return i&&Uu(e,t,"srcSet",n.srcSet,n,null),void(o&&Uu(e,t,"src",n.src,n,null));case"input":ju("invalid",e);var l=r=a=i=null,c=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Uu(e,t,o,d,n,null)}}return yt(e,r,l,c,u,a,i,!1),void dt(e);case"select":for(i in ju("invalid",e),o=a=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":o=l;default:Uu(e,t,i,l,n,null)}return t=r,n=a,e.multiple=!!o,void(null!=t?bt(e,!!o,t,!1):null!=n&&bt(e,!!o,n,!0));case"textarea":for(a in ju("invalid",e),r=i=o=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":o=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Uu(e,t,a,l,n,null)}return xt(e,o,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))if("selected"===c)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else Uu(e,t,c,o,n,null);return;case"dialog":ju("cancel",e),ju("close",e);break;case"iframe":case"object":ju("load",e);break;case"video":case"audio":for(o=0;o<Tu.length;o++)ju(Tu[o],e);break;case"image":ju("error",e),ju("load",e);break;case"details":ju("toggle",e);break;case"embed":case"source":case"link":ju("error",e),ju("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Uu(e,t,u,o,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&Wu(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&Uu(e,t,l,o,n,null))}var Ku=null,Ju=null;function Gu(e){return 9===e.nodeType?e:e.ownerDocument}function Qu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Yu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zu=null;var ed="function"===typeof setTimeout?setTimeout:void 0,td="function"===typeof clearTimeout?clearTimeout:void 0,nd="function"===typeof Promise?Promise:void 0,rd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nd?function(e){return nd.resolve(null).then(e).catch(od)}:ed;function od(e){setTimeout((function(){throw e}))}function id(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void mh(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);mh(t)}function sd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sd(n),qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function ad(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function cd(e,t,n){switch(t=Gu(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}var ud=new Map,dd=new Set;function hd(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var pd=V.d;V.d={f:function(){var e=pd.f(),t=Ic();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?ps(t):pd.r(e)},D:function(e){pd.D(e),md("dns-prefetch",e,null)},C:function(e,t){pd.C(e,t),md("preconnect",e,t)},L:function(e,t,n){pd.L(e,t,n);var r=fd;if(r&&e&&t){var o='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+mt(n.imageSizes)+'"]')):o+='[href="'+mt(e)+'"]';var i=o;switch(t){case"style":i=yd(e);break;case"script":i=wd(e)}ud.has(i)||(e=A({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),ud.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(vd(i))||"script"===t&&r.querySelector(xd(i))||(qu(t=r.createElement("link"),"link",e),Xe(t),r.head.appendChild(t)))}},m:function(e,t){pd.m(e,t);var n=fd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=wd(e)}if(!ud.has(i)&&(e=A({rel:"modulepreload",href:e},t),ud.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(xd(i)))return}qu(r=n.createElement("link"),"link",e),Xe(r),n.head.appendChild(r)}}},X:function(e,t){pd.X(e,t);var n=fd;if(n&&e){var r=Qe(n).hoistableScripts,o=wd(e),i=r.get(o);i||((i=n.querySelector(xd(o)))||(e=A({src:e,async:!0},t),(t=ud.get(o))&&Ed(e,t),Xe(i=n.createElement("script")),qu(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){pd.S(e,t,n);var r=fd;if(r&&e){var o=Qe(r).hoistableStyles,i=yd(e);t=t||"default";var s=o.get(i);if(!s){var a={loading:0,preload:null};if(s=r.querySelector(vd(i)))a.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ud.get(i))&&Cd(e,n);var l=s=r.createElement("link");Xe(l),qu(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Sd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:a},o.set(i,s)}}},M:function(e,t){pd.M(e,t);var n=fd;if(n&&e){var r=Qe(n).hoistableScripts,o=wd(e),i=r.get(o);i||((i=n.querySelector(xd(o)))||(e=A({src:e,async:!0,type:"module"},t),(t=ud.get(o))&&Ed(e,t),Xe(i=n.createElement("script")),qu(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var fd="undefined"===typeof document?null:document;function md(e,t,n){var r=fd;if(r&&"string"===typeof t&&t){var o=mt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),dd.has(o)||(dd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(qu(t=r.createElement("link"),"link",e),Xe(t),r.head.appendChild(t)))}}function gd(e,t,n,r){var o,i,a,l,c=(c=X.current)?hd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=yd(n.href),(r=(n=Qe(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=yd(n.href);var u=Qe(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(vd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ud.set(e,n),u||(o=c,i=e,a=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=o.createElement("link"),l.preload=i,i.addEventListener("load",(function(){return l.loading|=1})),i.addEventListener("error",(function(){return l.loading|=2})),qu(i,"link",a),Xe(i),o.head.appendChild(i))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=wd(n),(r=(n=Qe(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function yd(e){return'href="'+mt(e)+'"'}function vd(e){return'link[rel="stylesheet"]['+e+"]"}function bd(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function wd(e){return'[src="'+mt(e)+'"]'}function xd(e){return"script[async]"+e}function kd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Xe(r),r;var o=A({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Xe(r=(e.ownerDocument||e).createElement("style")),qu(r,"style",o),Sd(r,n.precedence,e),t.instance=r;case"stylesheet":o=yd(n.href);var i=e.querySelector(vd(o));if(i)return t.state.loading|=4,t.instance=i,Xe(i),i;r=bd(n),(o=ud.get(o))&&Cd(r,o),Xe(i=(e.ownerDocument||e).createElement("link"));var a=i;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),qu(i,"link",r),t.state.loading|=4,Sd(i,n.precedence,e),t.instance=i;case"script":return i=wd(n.src),(o=e.querySelector(xd(i)))?(t.instance=o,Xe(o),o):(r=n,(o=ud.get(i))&&Ed(r=A({},n),o),Xe(o=(e=e.ownerDocument||e).createElement("script")),qu(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Sd(r,n.precedence,e));return t.instance}function Sd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,s=0;s<r.length;s++){var a=r[s];if(a.dataset.precedence===t)i=a;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Cd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Td=null;function Nd(e,t,n){if(null===Td){var r=new Map,o=Td=new Map;o.set(n,r)}else(r=(o=Td).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[We]||i[Ie]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var s=i.getAttribute(t)||"";s=e+s;var a=r.get(s);a?a.push(i):r.set(s,[i])}}return r}function Od(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function jd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Md=null;function Ad(){}function _d(){if(this.count--,0===this.count)if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Rd=null;function Dd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Rd=new Map,t.forEach(Pd,e),Rd=null,_d.call(e))}function Pd(e,t){if(!(4&t.state.loading)){var n=Rd.get(e);if(n)var r=n.get(null);else{n=new Map,Rd.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var s=o[i];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(o=t.instance).getAttribute("data-precedence"),(i=n.get(s)||r)===r&&n.set(null,o),n.set(s,o),this.count++,r=_d.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var Ld={$$typeof:g,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function $d(e,t,n,r,o,i,s,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Id(e,t,n,r,o,i,s,a,l,c,u,d){return e=new $d(e,t,n,s,a,l,c,d),t=1,!0===i&&(t|=24),i=Pl(3,null,null,t),e.current=i,i.stateNode=e,(t=Fo()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ja(i),e}function zd(e){return e?e=_r:_r}function Bd(e,t,n,r,o,i){o=zd(o),null===r.context?r.context=o:r.pendingContext=o,(r=Aa(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=_a(e,r,t))&&(_c(n,0,t),Ra(n,e,t))}function Fd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vd(e,t){Fd(e,t),(e=e.alternate)&&Fd(e,t)}function Hd(e){if(13===e.tag){var t=jr(e,67108864);null!==t&&_c(t,0,67108864),Vd(e,67108864)}}var Ud=!0;function Wd(e,t,n,r){var o=M.T;M.T=null;var i=V.p;try{V.p=2,Kd(e,t,n,r)}finally{V.p=i,M.T=o}}function qd(e,t,n,r){var o=M.T;M.T=null;var i=V.p;try{V.p=8,Kd(e,t,n,r)}finally{V.p=i,M.T=o}}function Kd(e,t,n,r){if(Ud){var o=Jd(r);if(null===o)Du(e,t,r,Gd,n),sh(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Zd=ah(Zd,e,t,n,r,o),!0;case"dragenter":return eh=ah(eh,e,t,n,r,o),!0;case"mouseover":return th=ah(th,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return nh.set(i,ah(nh.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,rh.set(i,ah(rh.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(sh(e,r),4&t&&-1<ih.indexOf(e)){for(;null!==o;){var i=Je(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var s=Ee(i.pendingLanes);if(0!==s){var a=i;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-we(s);a.entanglements[1]|=l,s&=~l}mu(i),0===(6&ec)&&(wc=le()+500,gu(0,!1))}}break;case 13:null!==(a=jr(i,2))&&_c(a,0,2),Ic(),Vd(i,2)}if(null===(i=Jd(r))&&Du(e,t,r,Gd,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Du(e,t,r,null,n)}}function Jd(e){return Qd(e=At(e))}var Gd=null;function Qd(e){if(Gd=null,null!==(e=Ke(e))){var t=$(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=I(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Gd=e,null}function Xd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Yd=!1,Zd=null,eh=null,th=null,nh=new Map,rh=new Map,oh=[],ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sh(e,t){switch(e){case"focusin":case"focusout":Zd=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(t.pointerId)}}function ah(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=Je(t))&&Hd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function lh(e){var t=Ke(e.target);if(null!==t){var n=$(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=I(n)))return e.blockedOn=t,void function(e,t){var n=V.p;try{return V.p=e,t()}finally{V.p=n}}(e.priority,(function(){if(13===n.tag){var e=Mc(),t=jr(n,e);null!==t&&_c(t,0,e),Vd(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function ch(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jd(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&Hd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Mt=r,n.target.dispatchEvent(r),Mt=null,t.shift()}return!0}function uh(e,t,n){ch(e)&&n.delete(t)}function dh(){Yd=!1,null!==Zd&&ch(Zd)&&(Zd=null),null!==eh&&ch(eh)&&(eh=null),null!==th&&ch(th)&&(th=null),nh.forEach(uh),rh.forEach(uh)}function hh(e,t){e.blockedOn===t&&(e.blockedOn=null,Yd||(Yd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dh)))}var ph=null;function fh(e){ph!==e&&(ph=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){ph===e&&(ph=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===Qd(r||n))continue;break}var i=Je(n);null!==i&&(e.splice(t,3),t-=3,ds(i,{pending:!0,data:o,method:n.method,action:r},r,o))}})))}function mh(e){function t(t){return hh(t,e)}null!==Zd&&hh(Zd,e),null!==eh&&hh(eh,e),null!==th&&hh(th,e),nh.forEach(t),rh.forEach(t);for(var n=0;n<oh.length;n++){var r=oh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<oh.length&&null===(n=oh[0]).blockedOn;)lh(n),null===n.blockedOn&&oh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],s=o[ze]||null;if("function"===typeof i)s||fh(n);else if(s){var a=null;if(i&&i.hasAttribute("formAction")){if(o=i,s=i[ze]||null)a=s.formAction;else if(null!==Qd(o))continue}else a=s.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),fh(n)}}}function gh(e){this._internalRoot=e}function yh(e){this._internalRoot=e}yh.prototype.render=gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bd(t.current,Mc(),e,t,null,null)},yh.prototype.unmount=gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&tu(),Bd(e.current,2,null,e,null,null),Ic(),t[Be]=null}},yh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<oh.length&&0!==t&&t<oh[n].priority;n++);oh.splice(n,0,e),0===n&&lh(e)}};var vh=o.version;if("19.0.0"!==vh)throw Error(s(527,vh,"19.0.0"));V.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=$(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return z(o),e;if(i===r)return z(o),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?B(e):null)?null:e.stateNode};var bh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:M,findFiberByHostInstance:Ke,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{ye=wh.inject(bh),ve=wh}catch(kh){}}t.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,r="",o=Ps,i=Ls,l=$s;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Id(e,1,!1,null,0,n,r,o,i,l,0,null),e[Be]=t.current,_u(8===e.nodeType?e.parentNode:e),new gh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var r=!1,o="",i=Ps,l=Ls,c=$s,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Id(e,1,!0,t,0,r,o,i,l,c,0,u)).context=zd(null),n=t.current,(o=Aa(r=Mc())).callback=null,_a(n,o,r),t.current.lanes=r,_e(t,r),mu(t),e[Be]=t.current,_u(e),new yh(t)},t.version="19.0.0"},672:(e,t,n)=>{var r=n(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(o(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:i}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(e,t,r,o,i,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(){}function j(e,t,o,i,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return j((u=e._init)(e._payload),t,o,i,s)}}if(u)return s=s(e),u=""===i?"."+N(e,0):i,x(s)?(o="",null!=u&&(o=u.replace(T,"$&/")+"/"),j(s,t,o,"",(function(e){return e}))):null!=s&&(E(s)&&(l=s,c=o+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+u,s=C(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var d,f=""===i?".":i+":";if(x(e))for(var m=0;m<e.length;m++)u+=j(i=e[m],t,o,a=f+N(i,m),s);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=j(i=i.value,t,o,a=f+N(i,m++),s);else if("object"===a){if("function"===typeof e.then)return j(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(O,O):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function M(e,t,n){if(null==e)return e;var r=[],o=0;return j(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(o=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var s=Array(i),a=0;a<i;a++)s[a]=arguments[a+2];r.children=s}return C(e.type,o,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return C(e,i,void 0,0,0,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),o=k.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,_)}catch(i){_(i)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.0.0"},43:(e,t,n)=>{e.exports=n(288)},579:(e,t,n)=>{e.exports=n(799)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,A();else{var t=r(u);null!==t&&_(x,t.startTime-e)}}var k,S=!1,C=-1,E=5,T=-1;function N(){return!(t.unstable_now()-T<E)}function O(){if(S){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,v(C),C=-1),f=!0;var i=p;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&N());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,w(e),n=!0;break t}h===r(c)&&o(c),w(e)}else o(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&_(x,l.startTime-e),n=!1}}break e}finally{h=null,p=i,f=!1}n=void 0}}finally{n?k():S=!1}}}if("function"===typeof b)k=function(){b(O)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,M=j.port2;j.port1.onmessage=O,k=function(){M.postMessage(null)}}else k=function(){y(O,0)};function A(){S||(S=!0,k())}function _(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,A())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,_(x,i-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,A())),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{e.exports=n(896)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(i,s),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".4e794dae.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="schedule-page:";n.l=(r,o,i,s)=>{if(e[r])e[r].push(o);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[o];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,o[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)l(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkschedule_page=self.webpackChunkschedule_page||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>zn,hasStandardBrowserEnv:()=>Fn,hasStandardBrowserWebWorkerEnv:()=>Vn,navigator:()=>Bn,origin:()=>Hn});var o=n(43),i=n.t(o,2),s=n(391),a=(n(358),"popstate");function l(){return m((function(e,t){let{pathname:n="/",search:r="",hash:o=""}=f(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:p(t))}),(function(e,t){u("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?f(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,l="POP",u=null,f=m();function m(){return(s.state||{idx:null}).idx}function g(){l="POP";let e=m(),t=null==e?null:e-f;f=e,u&&u({action:l,location:v.location,delta:t})}function y(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),c(t,`No window.location.(origin|href) available to create URL for href: ${n}`),new URL(n,t)}null==f&&(f=0,s.replaceState({...s.state,idx:f},""));let v={get action(){return l},get location(){return e(o,s)},listen(e){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(a,g),u=e,()=>{o.removeEventListener(a,g),u=null}},createHref:e=>t(o,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=h(v.location,e,t);n&&n(r,e),f=m()+1;let a=d(r,f),c=v.createHref(r);try{s.pushState(a,"",c)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;o.location.assign(c)}i&&u&&u({action:l,location:v.location,delta:1})},replace:function(e,t){l="REPLACE";let r=h(v.location,e,t);n&&n(r,e),f=m();let o=d(r,f),a=v.createHref(r);s.replaceState(o,"",a),i&&u&&u({action:l,location:v.location,delta:0})},go:e=>s.go(e)};return v}new WeakMap;function g(e,t){return y(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function y(e,t,n,r){let o=A(("string"===typeof t?f(t):t).pathname||"/",n);if(null==o)return null;let i=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let a=0;null==s&&a<i.length;++a){let e=M(o);s=O(i[a],e,r)}return s}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=(e,o,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};s.relativePath.startsWith("/")&&(c(s.relativePath.startsWith(r),`Absolute route path "${s.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),s.relativePath=s.relativePath.slice(r.length));let a=L([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(c(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${a}".`),v(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of b(e.path))o(e,t,n);else o(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let s=b(r.join("/")),a=[];return a.push(...s.map((e=>""===e?i:[i,e].join("/")))),o&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var w=/^:[\w-]+$/,x=3,k=2,S=1,C=10,E=-2,T=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=E),t&&(r+=k),n.filter((e=>!T(e))).reduce(((e,t)=>e+(w.test(t)?x:""===t?S:C)),r)}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,o={},i="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),s.push({params:o,pathname:L([i,u.pathname]),pathnameBase:$(L([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=L([i,u.pathnameBase]))}return s}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],s=i.replace(/(.)\/+$/,"$1"),a=o.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=a[n]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:i,pathnameBase:s,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function _(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e){let t=R(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function P(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=f(e):(r={...e},c(!r.pathname||!r.pathname.includes("?"),_("?","pathname","search",r)),c(!r.pathname||!r.pathname.includes("#"),_("#","pathname","hash",r)),c(!r.search||!r.search.includes("#"),_("#","search","hash",r)));let i,s=""===e||""===r.pathname,a=s?"/":r.pathname;if(null==a)i=n;else{let e=t.length-1;if(!o&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:o=""}="string"===typeof e?f(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:I(r),hash:z(o)}}(r,i),u=a&&"/"!==a&&a.endsWith("/"),d=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var L=e=>e.join("/").replace(/\/\/+/g,"/"),$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),I=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var F=["POST","PUT","PATCH","DELETE"],V=(new Set(F),["GET",...F]);new Set(V),Symbol("ResetLoaderData");var H=o.createContext(null);H.displayName="DataRouter";var U=o.createContext(null);U.displayName="DataRouterState";var W=o.createContext({isTransitioning:!1});W.displayName="ViewTransition";var q=o.createContext(new Map);q.displayName="Fetchers";var K=o.createContext(null);K.displayName="Await";var J=o.createContext(null);J.displayName="Navigation";var G=o.createContext(null);G.displayName="Location";var Q=o.createContext({outlet:null,matches:[],isDataRoute:!1});Q.displayName="Route";var X=o.createContext(null);X.displayName="RouteError";function Y(){return null!=o.useContext(G)}function Z(){return c(Y(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(G).location}var ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function te(e){o.useContext(J).static||o.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=o.useContext(Q);return e?function(){let{router:e}=he("useNavigate"),t=fe("useNavigate"),n=o.useRef(!1);te((()=>{n.current=!0}));let r=o.useCallback((async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(n.current,ee),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))}),[e,t]);return r}():function(){c(Y(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(H),{basename:t,navigator:n}=o.useContext(J),{matches:r}=o.useContext(Q),{pathname:i}=Z(),s=JSON.stringify(D(r)),a=o.useRef(!1);te((()=>{a.current=!0}));let l=o.useCallback((function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(u(a.current,ee),!a.current)return;if("number"===typeof r)return void n.go(r);let l=P(r,JSON.parse(s),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:L([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)}),[t,n,s,i,e]);return l}()}o.createContext(null);function re(){let{matches:e}=o.useContext(Q),t=e[e.length-1];return t?t.params:{}}function oe(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=o.useContext(Q),{pathname:r}=Z(),i=JSON.stringify(D(n));return o.useMemo((()=>P(e,JSON.parse(i),r,"path"===t)),[e,i,r,t])}function ie(e,t,n,r){c(Y(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=o.useContext(J),{matches:a}=o.useContext(Q),l=a[a.length-1],d=l?l.params:{},h=l?l.pathname:"/",p=l?l.pathnameBase:"/",m=l&&l.route;{let e=m&&m.path||"";ye(h,!m||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let y,v=Z();if(t){let e="string"===typeof t?f(t):t;c("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),y=e}else y=v;let b=y.pathname||"/",w=b;if("/"!==p){let e=p.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=!s&&n&&n.matches&&n.matches.length>0?n.matches:g(e,{pathname:w});u(m||null!=x,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),u(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=ue(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:L([p,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:L([p,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&k?o.createElement(G.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},k):k}function se(){let e=me(),t=B(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=o.createElement(o.Fragment,null,o.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:s},"ErrorBoundary")," or"," ",o.createElement("code",{style:s},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:i},n):null,a)}var ae=o.createElement(se,null),le=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(Q.Provider,{value:this.props.routeContext},o.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ce(e){let{routeContext:t,match:n,children:r}=e,i=o.useContext(H);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(Q.Provider,{value:t},r)}function ue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,i=n?.errors;if(null!=i){let e=r.findIndex((e=>e.route.id&&void 0!==i?.[e.route.id]));c(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let s=!1,a=-1;if(n)for(let o=0;o<r.length;o++){let e=r[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=o),e.route.id){let{loaderData:t,errors:o}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!o||void 0===o[e.route.id]);if(e.route.lazy||i){s=!0,r=a>=0?r.slice(0,a+1):[r[0]];break}}}return r.reduceRight(((e,l,c)=>{let u,d=!1,h=null,p=null;n&&(u=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||ae,s&&(a<0&&0===c?(ye("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let f=t.concat(r.slice(0,c+1)),m=()=>{let t;return t=u?h:d?p:l.route.Component?o.createElement(l.route.Component,null):l.route.element?l.route.element:e,o.createElement(ce,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?o.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}function de(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function he(e){let t=o.useContext(H);return c(t,de(e)),t}function pe(e){let t=o.useContext(U);return c(t,de(e)),t}function fe(e){let t=function(e){let t=o.useContext(Q);return c(t,de(e)),t}(e),n=t.matches[t.matches.length-1];return c(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function me(){let e=o.useContext(X),t=pe("useRouteError"),n=fe("useRouteError");return void 0!==e?e:t.errors?.[n]}var ge={};function ye(e,t,n){t||ge[e]||(ge[e]=!0,u(!1,n))}o.memo((function(e){let{routes:t,future:n,state:r}=e;return ie(t,void 0,r,n)}));function ve(e){let{to:t,replace:n,state:r,relative:i}=e;c(Y(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=o.useContext(J);u(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=o.useContext(Q),{pathname:l}=Z(),d=ne(),h=P(t,D(a),l,"path"===i),p=JSON.stringify(h);return o.useEffect((()=>{d(JSON.parse(p),{replace:n,state:r,relative:i})}),[d,p,i,n,r]),null}function be(e){c(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function we(e){let{basename:t="/",children:n=null,location:r,navigationType:i="POP",navigator:s,static:a=!1}=e;c(!Y(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=o.useMemo((()=>({basename:l,navigator:s,static:a,future:{}})),[l,s,a]);"string"===typeof r&&(r=f(r));let{pathname:h="/",search:p="",hash:m="",state:g=null,key:y="default"}=r,v=o.useMemo((()=>{let e=A(h,l);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:i}}),[l,h,p,m,g,y,i]);return u(null!=v,`<Router basename="${l}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:o.createElement(J.Provider,{value:d},o.createElement(G.Provider,{children:n,value:v}))}function xe(e){let{children:t,location:n}=e;return ie(ke(t),n)}o.Component;function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return o.Children.forEach(e,((e,r)=>{if(!o.isValidElement(e))return;let i=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,ke(e.props.children,i));c(e.type===be,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),c(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ke(e.props.children,i)),n.push(s)})),n}var Se="get",Ce="application/x-www-form-urlencoded";function Ee(e){return null!=e&&"string"===typeof e.tagName}function Te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}var Ne=null;var Oe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function je(e){return null==e||Oe.has(e)?e:(u(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ce}"`),null)}function Me(e,t){let n,r,o,i,s;if(Ee(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?A(s,t):null,n=e.getAttribute("method")||Se,o=je(e.getAttribute("enctype"))||Ce,i=new FormData(e)}else if(function(e){return Ee(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ee(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(r=a?A(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Se,o=je(e.getAttribute("formenctype"))||je(s.getAttribute("enctype"))||Ce,i=new FormData(s,e),!function(){if(null===Ne)try{new FormData(document.createElement("form"),0),Ne=!1}catch(e){Ne=!0}return Ne}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,r)}}else{if(Ee(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Se,r=null,o=Ce,s=e}var a;return i&&"text/plain"===o&&(s=i,i=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:i,body:s}}function Ae(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function _e(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Re(e){return null!=e&&"string"===typeof e.page}function De(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Pe(e,t,n,r,o,i){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===i?t.filter(((e,t)=>s(e,t)||a(e,t))):"data"===i?t.filter(((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,i)||a(t,i))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Le(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o})).flat(1),[...new Set(r)];var r}function $e(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,o)=>{if(t&&!Re(o)&&"script"===o.as&&o.href&&r.has(o.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(o));return n.has(i)||(n.add(i),e.push({key:i,link:o})),e}),[])}function Ie(e){return{__html:e}}Symbol("SingleFetchRedirect");function ze(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===A(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}o.Component;function Be(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,i=o.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(B(t))return o.createElement(Fe,{title:"Unhandled Thrown Response!"},o.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return o.createElement(Fe,{title:"Application Error!",isOutsideRemixApp:n},o.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),o.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),i)}function Fe(e){let{title:t,renderScripts:n,isOutsideRemixApp:r,children:i}=e,{routeModules:s}=qe();return s.root?.Layout&&!r?i:o.createElement("html",{lang:"en"},o.createElement("head",null,o.createElement("meta",{charSet:"utf-8"}),o.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),o.createElement("title",null,t)),o.createElement("body",null,o.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,n?o.createElement(Ze,null):null)))}function Ve(e){return!0===e}function He(){let e=o.useContext(H);return Ae(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ue(){let e=o.useContext(U);return Ae(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var We=o.createContext(void 0);function qe(){let e=o.useContext(We);return Ae(e,"You must render this element inside a <HydratedRouter> element"),e}function Ke(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Je(e,t,n){if(n&&!Ye)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function Ge(e){let{page:t,...n}=e,{router:r}=He(),i=o.useMemo((()=>g(r.routes,t,r.basename)),[r.routes,t,r.basename]);return i?o.createElement(Xe,{page:t,matches:i,...n}):null}function Qe(e){let{manifest:t,routeModules:n}=qe(),[r,i]=o.useState([]);return o.useEffect((()=>{let r=!1;return async function(e,t,n){return $e((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await _e(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(De).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,n).then((e=>{r||i(e)})),()=>{r=!0}}),[e,t,n]),r}function Xe(e){let{page:t,matches:n,...r}=e,i=Z(),{manifest:s,routeModules:a}=qe(),{basename:l}=He(),{loaderData:c,matches:u}=Ue(),d=o.useMemo((()=>Pe(t,n,u,s,i,"data")),[t,n,u,s,i]),h=o.useMemo((()=>Pe(t,n,u,s,i,"assets")),[t,n,u,s,i]),p=o.useMemo((()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,r=!1;if(n.forEach((t=>{let n=s.routes[t.route.id];n&&n.hasLoader&&(!d.some((e=>e.route.id===t.route.id))&&t.route.id in c&&a[t.route.id]?.shouldRevalidate||n.hasClientLoader?r=!0:e.add(t.route.id))})),0===e.size)return[];let o=ze(t,l);return r&&e.size>0&&o.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[o.pathname+o.search]}),[l,c,i,s,d,n,t,a]),f=o.useMemo((()=>Le(h,s)),[h,s]),m=Qe(h);return o.createElement(o.Fragment,null,p.map((e=>o.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r}))),f.map((e=>o.createElement("link",{key:e,rel:"modulepreload",href:e,...r}))),m.map((e=>{let{key:t,link:n}=e;return o.createElement("link",{key:t,...n})})))}We.displayName="FrameworkContext";var Ye=!1;function Ze(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,ssr:i,renderMeta:s}=qe(),{router:a,static:l,staticContext:c}=He(),{matches:u}=Ue(),d=Ve(i);s&&(s.didRenderScripts=!0);let h=Je(u,null,r);o.useEffect((()=>{Ye=!0}),[]);let p=o.useMemo((()=>{let r=c?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",i=l?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${d?"":`import ${JSON.stringify(t.url)}`};\n${h.map(((e,n)=>{let r=`route${n}`,o=t.routes[e.route.id];Ae(o,`Route ${e.route.id} not found in manifest`);let{clientActionModule:i,clientLoaderModule:s,hydrateFallbackModule:a,module:l}=o,c=[...i?[{module:i,varName:`${r}_clientAction`}]:[],...s?[{module:s,varName:`${r}_clientLoader`}]:[],...a?[{module:a,varName:`${r}_HydrateFallback`}]:[],{module:l,varName:`${r}_main`}];return 1===c.length?`import * as ${r} from ${JSON.stringify(l)};`:[c.map((e=>`import * as ${e.varName} from "${e.module}";`)).join("\n"),`const ${r} = {${c.map((e=>`...${e.varName}`)).join(",")}};`].join("\n")})).join("\n")}\n  ${d?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let n=new Set(t.state.matches.map((e=>e.route.id))),r=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(r.pop();r.length>0;)o.push(`/${r.join("/")}`),r.pop();o.forEach((e=>{let r=g(t.routes,e,t.basename);r&&r.forEach((e=>n.add(e.route.id)))}));let i=[...n].reduce(((t,n)=>Object.assign(t,{[n]:e.routes[n]})),{});return{...e,routes:i}}(t,a),null,2)};`:""}\n  window.__reactRouterRouteModules = {${h.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return o.createElement(o.Fragment,null,o.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ie(r),type:void 0}),o.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ie(i),type:"module",async:!0}))}),[]),f=Ye?[]:t.entry.imports.concat(Le(h,t,{includeHydrateFallback:!0}));return Ye?null:o.createElement(o.Fragment,null,d?null:o.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin}),o.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin}),(m=f,[...new Set(m)]).map((t=>o.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin}))),p);var m}function et(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{tt&&(window.__reactRouterVersion="7.4.0")}catch(wb){}function nt(e){let{basename:t,children:n,window:r}=e,i=o.useRef();null==i.current&&(i.current=l({window:r,v5Compat:!0}));let s=i.current,[a,c]=o.useState({action:s.action,location:s.location}),u=o.useCallback((e=>{o.startTransition((()=>c(e)))}),[c]);return o.useLayoutEffect((()=>s.listen(u)),[s,u]),o.createElement(we,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s})}var rt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ot=o.forwardRef((function(e,t){let n,{onClick:r,discover:i="render",prefetch:s="none",relative:a,reloadDocument:l,replace:d,state:h,target:f,to:m,preventScrollReset:g,viewTransition:y,...v}=e,{basename:b}=o.useContext(J),w="string"===typeof m&&rt.test(m),x=!1;if("string"===typeof m&&w&&(n=m,tt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=A(t.pathname,b);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:x=!0}catch(wb){u(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(Y(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=o.useContext(J),{hash:i,pathname:s,search:a}=oe(e,{relative:t}),l=s;return"/"!==n&&(l="/"===s?n:L([n,s])),r.createHref({pathname:l,search:a,hash:i})}(m,{relative:a}),[S,C,E]=function(e,t){let n=o.useContext(We),[r,i]=o.useState(!1),[s,a]=o.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=o.useRef(null);o.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{a(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),o.useEffect((()=>{if(r){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let f=()=>{i(!0)},m=()=>{i(!1),a(!1)};return n?"intent"!==e?[s,p,{}]:[s,p,{onFocus:Ke(l,f),onBlur:Ke(c,m),onMouseEnter:Ke(u,f),onMouseLeave:Ke(d,m),onTouchStart:Ke(h,f)}]:[!1,p,{}]}(s,v),T=function(e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ne(),c=Z(),u=oe(e,{relative:s});return o.useCallback((o=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(o,t)){o.preventDefault();let t=void 0!==n?n:p(c)===p(u);l(e,{replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a})}}),[c,l,u,n,r,t,e,i,s,a])}(m,{replace:d,state:h,target:f,preventScrollReset:g,relative:a,viewTransition:y});let N=o.createElement("a",{...v,...E,href:n||k,onClick:x||l?r:function(e){r&&r(e),e.defaultPrevented||T(e)},ref:et(t,C),target:f,"data-discover":w||"render"!==i?void 0:"true"});return S&&!w?o.createElement(o.Fragment,null,N,o.createElement(Ge,{page:k})):N}));ot.displayName="Link";var it=o.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...h}=e,p=oe(l,{relative:h.relative}),f=Z(),m=o.useContext(U),{navigator:g,basename:y}=o.useContext(J),v=null!=m&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.useContext(W);c(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lt("useViewTransitionState"),i=oe(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=A(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=A(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=j(i.pathname,a)||null!=j(i.pathname,s)}(p)&&!0===u,b=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,w=f.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&y&&(x=A(x,y)||x);const k="/"!==b&&b.endsWith("/")?b.length-1:b.length;let S,C=w===b||!s&&w.startsWith(b)&&"/"===w.charAt(k),E=null!=x&&(x===b||!s&&x.startsWith(b)&&"/"===x.charAt(b.length)),T={isActive:C,isPending:E,isTransitioning:v},N=C?n:void 0;S="function"===typeof i?i(T):[i,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let O="function"===typeof a?a(T):a;return o.createElement(ot,{...h,"aria-current":N,className:S,ref:t,style:O,to:l,viewTransition:u},"function"===typeof d?d(T):d)}));it.displayName="NavLink";var st=o.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:i,reloadDocument:s,replace:a,state:l,method:u=Se,action:d,onSubmit:h,relative:f,preventScrollReset:m,viewTransition:g,...y}=e,v=ht(),b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=o.useContext(J),r=o.useContext(Q);c(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...oe(e||".",{relative:t})},a=Z();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();s.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:L([n,s.pathname]));return p(s)}(d,{relative:f}),w="get"===u.toLowerCase()?"get":"post",x="string"===typeof d&&rt.test(d);return o.createElement("form",{ref:t,method:w,action:b,onSubmit:s?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||u;v(t||e.currentTarget,{fetcherKey:r,method:n,navigate:i,replace:a,state:l,relative:f,preventScrollReset:m,viewTransition:g})},...y,"data-discover":x||"render"!==n?void 0:"true"})}));function at(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lt(e){let t=o.useContext(H);return c(t,at(e)),t}function ct(e){u("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=o.useRef(Te(e)),n=o.useRef(!1),r=Z(),i=o.useMemo((()=>function(e,t){let n=Te(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(r.search,n.current?null:t.current)),[r.search]),s=ne(),a=o.useCallback(((e,t)=>{const r=Te("function"===typeof e?e(i):e);n.current=!0,s("?"+r,t)}),[s,i]);return[i,a]}st.displayName="Form";var ut=0,dt=()=>`__${String(++ut)}__`;function ht(){let{router:e}=lt("useSubmit"),{basename:t}=o.useContext(J),n=fe("useRouteId");return o.useCallback((async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:s,encType:a,formData:l,body:c}=Me(r,t);if(!1===o.navigate){let t=o.fetcherKey||dt();await e.fetch(t,n,o.action||i,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||s,formEncType:o.encType||a,flushSync:o.flushSync})}else await e.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||s,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})}),[e,t,n])}new TextEncoder;function pt(){return pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pt.apply(null,arguments)}function ft(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function mt(e,t){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mt(e,t)}function gt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,mt(e,t)}function yt(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var vt=n(950);const bt=!1,wt=o.createContext(null);var xt=function(e){return e.scrollTop},kt="unmounted",St="exited",Ct="entering",Et="entered",Tt="exiting",Nt=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=St,r.appearStatus=Ct):o=Et:o=t.unmountOnExit||t.mountOnEnter?kt:St,r.state={status:o},r.nextCallback=null,r}gt(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===kt?{status:St}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ct&&n!==Et&&(t=Ct):n!==Ct&&n!==Et||(t=Tt)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ct){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:vt.findDOMNode(this);n&&xt(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===St&&this.setState({status:kt})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[vt.findDOMNode(this),r],i=o[0],s=o[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||bt?this.safeSetState({status:Et},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,s),this.safeSetState({status:Ct},(function(){t.props.onEntering(i,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:Et},(function(){t.props.onEntered(i,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:vt.findDOMNode(this);t&&!bt?(this.props.onExit(r),this.safeSetState({status:Tt},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:St},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:St},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:vt.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],s=o[1];this.props.addEndListener(i,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===kt)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,ft(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(wt.Provider,{value:null},"function"===typeof n?n(e,r):o.cloneElement(o.Children.only(n),r))},t}(o.Component);function Ot(){}Nt.contextType=wt,Nt.propTypes={},Nt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ot,onEntering:Ot,onEntered:Ot,onExit:Ot,onExiting:Ot,onExited:Ot},Nt.UNMOUNTED=kt,Nt.EXITED=St,Nt.ENTERING=Ct,Nt.ENTERED=Et,Nt.EXITING=Tt;const jt=Nt;var Mt=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=yt(n.className,r):n.setAttribute("class",yt(n.className&&n.className.baseVal||"",r)));var n,r}))},At=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1];t.removeClasses(o,"exit"),t.addClass(o,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.addClass(o,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.removeClasses(o,i),t.addClass(o,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,o=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:r?o+"-active":n[e+"Active"],doneClassName:r?o+"-done":n[e+"Done"]}},t}gt(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(r+=" "+o),"active"===n&&e&&xt(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,i=n.done;this.appliedClasses[t]={},r&&Mt(e,r),o&&Mt(e,o),i&&Mt(e,i)},n.render=function(){var e=this.props,t=(e.classNames,ft(e,["classNames"]));return o.createElement(jt,pt({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(o.Component);At.defaultProps={classNames:""},At.propTypes={};const _t=At;function Rt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Dt}=Object.prototype,{getPrototypeOf:Pt}=Object,Lt=($t=Object.create(null),e=>{const t=Dt.call(e);return $t[t]||($t[t]=t.slice(8,-1).toLowerCase())});var $t;const It=e=>(e=e.toLowerCase(),t=>Lt(t)===e),zt=e=>t=>typeof t===e,{isArray:Bt}=Array,Ft=zt("undefined");const Vt=It("ArrayBuffer");const Ht=zt("string"),Ut=zt("function"),Wt=zt("number"),qt=e=>null!==e&&"object"===typeof e,Kt=e=>{if("object"!==Lt(e))return!1;const t=Pt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Jt=It("Date"),Gt=It("File"),Qt=It("Blob"),Xt=It("FileList"),Yt=It("URLSearchParams"),[Zt,en,tn,nn]=["ReadableStream","Request","Response","Headers"].map(It);function rn(e,t){let n,r,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Bt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=o?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let s;for(n=0;n<i;n++)s=r[n],t.call(null,e[s],s,e)}}function on(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const sn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,an=e=>!Ft(e)&&e!==sn;const ln=(cn="undefined"!==typeof Uint8Array&&Pt(Uint8Array),e=>cn&&e instanceof cn);var cn;const un=It("HTMLFormElement"),dn=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),hn=It("RegExp"),pn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};rn(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},fn="abcdefghijklmnopqrstuvwxyz",mn="0123456789",gn={DIGIT:mn,ALPHA:fn,ALPHA_DIGIT:fn+fn.toUpperCase()+mn};const yn=It("AsyncFunction"),vn=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],sn.addEventListener("message",(e=>{let{source:t,data:o}=e;t===sn&&o===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),sn.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Ut(sn.postMessage)),bn="undefined"!==typeof queueMicrotask?queueMicrotask.bind(sn):"undefined"!==typeof process&&process.nextTick||vn,wn={isArray:Bt,isArrayBuffer:Vt,isBuffer:function(e){return null!==e&&!Ft(e)&&null!==e.constructor&&!Ft(e.constructor)&&Ut(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ut(e.append)&&("formdata"===(t=Lt(e))||"object"===t&&Ut(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Vt(e.buffer),t},isString:Ht,isNumber:Wt,isBoolean:e=>!0===e||!1===e,isObject:qt,isPlainObject:Kt,isReadableStream:Zt,isRequest:en,isResponse:tn,isHeaders:nn,isUndefined:Ft,isDate:Jt,isFile:Gt,isBlob:Qt,isRegExp:hn,isFunction:Ut,isStream:e=>qt(e)&&Ut(e.pipe),isURLSearchParams:Yt,isTypedArray:ln,isFileList:Xt,forEach:rn,merge:function e(){const{caseless:t}=an(this)&&this||{},n={},r=(r,o)=>{const i=t&&on(n,o)||o;Kt(n[i])&&Kt(r)?n[i]=e(n[i],r):Kt(r)?n[i]=e({},r):Bt(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&rn(arguments[o],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return rn(t,((t,r)=>{n&&Ut(t)?e[r]=Rt(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&Pt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Lt,kindOfTest:It,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Bt(e))return e;let t=e.length;if(!Wt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:un,hasOwnProperty:dn,hasOwnProp:dn,reduceDescriptors:pn,freezeMethods:e=>{pn(e,((t,n)=>{if(Ut(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Ut(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Bt(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:on,global:sn,isContextDefined:an,ALPHABET:gn,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Ut(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(qt(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=Bt(e)?[]:{};return rn(e,((e,t)=>{const i=n(e,r+1);!Ft(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:yn,isThenable:e=>e&&(qt(e)||Ut(e))&&Ut(e.then)&&Ut(e.catch),setImmediate:vn,asap:bn};function xn(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}wn.inherits(xn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wn.toJSONObject(this.config),code:this.code,status:this.status}}});const kn=xn.prototype,Sn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Sn[e]={value:e}})),Object.defineProperties(xn,Sn),Object.defineProperty(kn,"isAxiosError",{value:!0}),xn.from=(e,t,n,r,o,i)=>{const s=Object.create(kn);return wn.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),xn.call(s,e.message,t,n,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const Cn=xn;function En(e){return wn.isPlainObject(e)||wn.isArray(e)}function Tn(e){return wn.endsWith(e,"[]")?e.slice(0,-2):e}function Nn(e,t,n){return e?e.concat(t).map((function(e,t){return e=Tn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const On=wn.toFlatObject(wn,{},null,(function(e){return/^is[A-Z]/.test(e)}));const jn=function(e,t,n){if(!wn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=wn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!wn.isUndefined(t[e])}))).metaTokens,o=n.visitor||c,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&wn.isSpecCompliantForm(t);if(!wn.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(wn.isDate(e))return e.toISOString();if(!a&&wn.isBlob(e))throw new Cn("Blob is not supported. Use a Buffer instead.");return wn.isArrayBuffer(e)||wn.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,o){let a=e;if(e&&!o&&"object"===typeof e)if(wn.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(wn.isArray(e)&&function(e){return wn.isArray(e)&&!e.some(En)}(e)||(wn.isFileList(e)||wn.endsWith(n,"[]"))&&(a=wn.toArray(e)))return n=Tn(n),a.forEach((function(e,r){!wn.isUndefined(e)&&null!==e&&t.append(!0===s?Nn([n],r,i):null===s?n:n+"[]",l(e))})),!1;return!!En(e)||(t.append(Nn(o,n,i),l(e)),!1)}const u=[],d=Object.assign(On,{defaultVisitor:c,convertValue:l,isVisitable:En});if(!wn.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!wn.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),wn.forEach(n,(function(n,i){!0===(!(wn.isUndefined(n)||null===n)&&o.call(t,n,wn.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t};function Mn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function An(e,t){this._pairs=[],e&&jn(e,this,t)}const _n=An.prototype;_n.append=function(e,t){this._pairs.push([e,t])},_n.toString=function(e){const t=e?function(t){return e.call(this,t,Mn)}:Mn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Rn=An;function Dn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pn(e,t,n){if(!t)return e;const r=n&&n.encode||Dn;wn.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):wn.isURLSearchParams(t)?t.toString():new Rn(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Ln=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wn.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},$n={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},In={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Rn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},zn="undefined"!==typeof window&&"undefined"!==typeof document,Bn="object"===typeof navigator&&navigator||void 0,Fn=zn&&(!Bn||["ReactNative","NativeScript","NS"].indexOf(Bn.product)<0),Vn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Hn=zn&&window.location.href||"http://localhost",Un={...r,...In};const Wn=function(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;if(i=!i&&wn.isArray(r)?r.length:i,a)return wn.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&wn.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&wn.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(wn.isFormData(e)&&wn.isFunction(e.entries)){const n={};return wn.forEachEntry(e,((e,r)=>{t(function(e){return wn.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const qn={transitional:$n,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=wn.isObject(e);o&&wn.isHTMLForm(e)&&(e=new FormData(e));if(wn.isFormData(e))return r?JSON.stringify(Wn(e)):e;if(wn.isArrayBuffer(e)||wn.isBuffer(e)||wn.isStream(e)||wn.isFile(e)||wn.isBlob(e)||wn.isReadableStream(e))return e;if(wn.isArrayBufferView(e))return e.buffer;if(wn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return jn(e,new Un.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Un.isNode&&wn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=wn.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return jn(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(wn.isString(e))try{return(t||JSON.parse)(e),wn.trim(e)}catch(wb){if("SyntaxError"!==wb.name)throw wb}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||qn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(wn.isResponse(e)||wn.isReadableStream(e))return e;if(e&&wn.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(wb){if(n){if("SyntaxError"===wb.name)throw Cn.from(wb,Cn.ERR_BAD_RESPONSE,this,null,this.response);throw wb}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Un.classes.FormData,Blob:Un.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wn.forEach(["delete","get","head","post","put","patch"],(e=>{qn.headers[e]={}}));const Kn=qn,Jn=wn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gn=Symbol("internals");function Qn(e){return e&&String(e).trim().toLowerCase()}function Xn(e){return!1===e||null==e?e:wn.isArray(e)?e.map(Xn):String(e)}function Yn(e,t,n,r,o){return wn.isFunction(r)?r.call(this,t,n):(o&&(t=n),wn.isString(t)?wn.isString(r)?-1!==t.indexOf(r):wn.isRegExp(r)?r.test(t):void 0:void 0)}class Zn{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=Qn(t);if(!o)throw new Error("header name must be a non-empty string");const i=wn.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Xn(e))}const i=(e,t)=>wn.forEach(e,((e,n)=>o(e,n,t)));if(wn.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(wn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Jn[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(wn.isHeaders(e))for(const[s,a]of e.entries())o(a,s,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=Qn(e)){const n=wn.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(wn.isFunction(t))return t.call(this,e,n);if(wn.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Qn(e)){const n=wn.findKey(this,e);return!(!n||void 0===this[n]||t&&!Yn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=Qn(e)){const o=wn.findKey(n,e);!o||t&&!Yn(0,n[o],o,t)||(delete n[o],r=!0)}}return wn.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!Yn(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return wn.forEach(this,((r,o)=>{const i=wn.findKey(n,o);if(i)return t[i]=Xn(r),void delete t[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();s!==o&&delete t[o],t[s]=Xn(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return wn.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&wn.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Gn]=this[Gn]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Qn(e);t[r]||(!function(e,t){const n=wn.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return wn.isArray(e)?e.forEach(r):r(e),this}}Zn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),wn.reduceDescriptors(Zn.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),wn.freezeMethods(Zn);const er=Zn;function tr(e,t){const n=this||Kn,r=t||n,o=er.from(r.headers);let i=r.data;return wn.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function nr(e){return!(!e||!e.__CANCEL__)}function rr(e,t,n){Cn.call(this,null==e?"canceled":e,Cn.ERR_CANCELED,t,n),this.name="CanceledError"}wn.inherits(rr,Cn,{__CANCEL__:!0});const or=rr;function ir(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Cn("Request failed with status code "+n.status,[Cn.ERR_BAD_REQUEST,Cn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const sr=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[s];o||(o=l),n[i]=a,r[i]=l;let u=s,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-o<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const ar=function(e,t){let n,r,o=0,i=1e3/t;const s=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-o;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=i?s(l,e):(n=l,r||(r=setTimeout((()=>{r=null,s(n)}),i-t)))},()=>n&&s(n)]},lr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const o=sr(50,250);return ar((n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-r,l=o(a);r=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},cr=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},ur=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wn.asap((()=>e(...n)))},dr=Un.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Un.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Un.origin),Un.navigator&&/(msie|trident)/i.test(Un.navigator.userAgent)):()=>!0,hr=Un.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const s=[e+"="+encodeURIComponent(t)];wn.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),wn.isString(r)&&s.push("path="+r),wn.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function pr(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const fr=e=>e instanceof er?{...e}:e;function mr(e,t){t=t||{};const n={};function r(e,t,n,r){return wn.isPlainObject(e)&&wn.isPlainObject(t)?wn.merge.call({caseless:r},e,t):wn.isPlainObject(t)?wn.merge({},t):wn.isArray(t)?t.slice():t}function o(e,t,n,o){return wn.isUndefined(t)?wn.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!wn.isUndefined(t))return r(void 0,t)}function s(e,t){return wn.isUndefined(t)?wn.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>o(fr(e),fr(t),0,!0)};return wn.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=l[r]||o,s=i(e[r],t[r],r);wn.isUndefined(s)&&i!==a||(n[r]=s)})),n}const gr=e=>{const t=mr({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=er.from(a),t.url=Pn(pr(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),wn.isFormData(r))if(Un.hasStandardBrowserEnv||Un.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Un.hasStandardBrowserEnv&&(o&&wn.isFunction(o)&&(o=o(t)),o||!1!==o&&dr(t.url))){const e=i&&s&&hr.read(s);e&&a.set(i,e)}return t},yr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=gr(e);let o=r.data;const i=er.from(r.headers).normalize();let s,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=er.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());ir((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Cn("Request aborted",Cn.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Cn("Network Error",Cn.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||$n;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Cn(t,o.clarifyTimeoutError?Cn.ETIMEDOUT:Cn.ECONNABORTED,e,m)),m=null},void 0===o&&i.setContentType(null),"setRequestHeader"in m&&wn.forEach(i.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),wn.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),p&&([l,u]=lr(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=lr(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new or(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===Un.protocols.indexOf(y)?n(new Cn("Unsupported protocol "+y+":",Cn.ERR_BAD_REQUEST,e)):m.send(o||null)}))},vr=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Cn?t:new or(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new Cn(`timeout ${t} of ms exceeded`,Cn.ETIMEDOUT))}),t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:a}=r;return a.unsubscribe=()=>wn.asap(s),a}},br=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},wr=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},xr=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of wr(e))yield*br(n,t)}(e,t);let i,s=0,a=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return a(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},kr="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Sr=kr&&"function"===typeof ReadableStream,Cr=kr&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Er=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(wb){return!1}},Tr=Sr&&Er((()=>{let e=!1;const t=new Request(Un.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Nr=Sr&&Er((()=>wn.isReadableStream(new Response("").body))),Or={stream:Nr&&(e=>e.body)};var jr;kr&&(jr=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Or[e]&&(Or[e]=wn.isFunction(jr[e])?t=>t[e]():(t,n)=>{throw new Cn(`Response type '${e}' is not supported`,Cn.ERR_NOT_SUPPORT,n)})})));const Mr=async(e,t)=>{const n=wn.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(wn.isBlob(e))return e.size;if(wn.isSpecCompliantForm(e)){const t=new Request(Un.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return wn.isArrayBufferView(e)||wn.isArrayBuffer(e)?e.byteLength:(wn.isURLSearchParams(e)&&(e+=""),wn.isString(e)?(await Cr(e)).byteLength:void 0)})(t):n},Ar=kr&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=gr(e);c=c?(c+"").toLowerCase():"text";let p,f=vr([o,i&&i.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Tr&&"get"!==n&&"head"!==n&&0!==(g=await Mr(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(wn.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=cr(g,lr(ur(l)));r=xr(n.body,65536,e,t)}}wn.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0});let i=await fetch(p);const s=Nr&&("stream"===c||"response"===c);if(Nr&&(a||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=wn.toFiniteNumber(i.headers.get("content-length")),[n,r]=a&&cr(t,lr(ur(a),!0))||[];i=new Response(xr(i.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let y=await Or[wn.findKey(Or,c)||"text"](i,e);return!s&&m&&m(),await new Promise(((t,n)=>{ir(t,n,{data:y,headers:er.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new Cn("Network Error",Cn.ERR_NETWORK,e,p),{cause:y.cause||y});throw Cn.from(y,y&&y.code,e,p)}}),_r={http:null,xhr:yr,fetch:Ar};wn.forEach(_r,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(wb){}Object.defineProperty(e,"adapterName",{value:t})}}));const Rr=e=>`- ${e}`,Dr=e=>wn.isFunction(e)||null===e||!1===e,Pr=e=>{e=wn.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!Dr(n)&&(r=_r[(t=String(n)).toLowerCase()],void 0===r))throw new Cn(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Rr).join("\n"):" "+Rr(e[0]):"as no adapter specified";throw new Cn("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Lr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new or(null,e)}function $r(e){Lr(e),e.headers=er.from(e.headers),e.data=tr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Pr(e.adapter||Kn.adapter)(e).then((function(t){return Lr(e),t.data=tr.call(e,e.transformResponse,t),t.headers=er.from(t.headers),t}),(function(t){return nr(t)||(Lr(e),t&&t.response&&(t.response.data=tr.call(e,e.transformResponse,t.response),t.response.headers=er.from(t.response.headers))),Promise.reject(t)}))}const Ir="1.7.9",zr={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{zr[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Br={};zr.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new Cn(r(o," has been removed"+(t?" in "+t:"")),Cn.ERR_DEPRECATED);return t&&!Br[o]&&(Br[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}},zr.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const Fr={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Cn("options must be an object",Cn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new Cn("option "+i+" must be "+n,Cn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Cn("Unknown option "+i,Cn.ERR_BAD_OPTION)}},validators:zr},Vr=Fr.validators;class Hr{constructor(e){this.defaults=e,this.interceptors={request:new Ln,response:new Ln}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(wb){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=mr(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&Fr.assertOptions(n,{silentJSONParsing:Vr.transitional(Vr.boolean),forcedJSONParsing:Vr.transitional(Vr.boolean),clarifyTimeoutError:Vr.transitional(Vr.boolean)},!1),null!=r&&(wn.isFunction(r)?t.paramsSerializer={serialize:r}:Fr.assertOptions(r,{encode:Vr.function,serialize:Vr.function},!0)),Fr.assertOptions(t,{baseUrl:Vr.spelling("baseURL"),withXsrfToken:Vr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&wn.merge(o.common,o[t.method]);o&&wn.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=er.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[$r.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=$r.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Pn(pr((e=mr(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}wn.forEach(["delete","get","head","options"],(function(e){Hr.prototype[e]=function(t,n){return this.request(mr(n||{},{method:e,url:t,data:(n||{}).data}))}})),wn.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(mr(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Hr.prototype[e]=t(),Hr.prototype[e+"Form"]=t(!0)}));const Ur=Hr;class Wr{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new or(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Wr((function(t){e=t})),cancel:e}}}const qr=Wr;const Kr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kr).forEach((e=>{let[t,n]=e;Kr[n]=t}));const Jr=Kr;const Gr=function e(t){const n=new Ur(t),r=Rt(Ur.prototype.request,n);return wn.extend(r,Ur.prototype,n,{allOwnKeys:!0}),wn.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(mr(t,n))},r}(Kn);Gr.Axios=Ur,Gr.CanceledError=or,Gr.CancelToken=qr,Gr.isCancel=nr,Gr.VERSION=Ir,Gr.toFormData=jn,Gr.AxiosError=Cn,Gr.Cancel=Gr.CanceledError,Gr.all=function(e){return Promise.all(e)},Gr.spread=function(e){return function(t){return e.apply(null,t)}},Gr.isAxiosError=function(e){return wn.isObject(e)&&!0===e.isAxiosError},Gr.mergeConfig=mr,Gr.AxiosHeaders=er,Gr.formToJSON=e=>Wn(wn.isHTMLForm(e)?new FormData(e):e),Gr.getAdapter=Pr,Gr.HttpStatusCode=Jr,Gr.default=Gr;const Qr=Gr;var Xr=n(579);const Yr=(0,o.forwardRef)(((e,t)=>{let{apiUrl:n,userId:r,onSuccess:i,onClose:s,showQRCode:a,qrCodeUrl:l,mode:c}=e;const[u,d]=(0,o.useState)(["","","","","",""]),[h,p]=(0,o.useState)(null),[f,m]=(0,o.useState)(!1),[g,y]=(0,o.useState)(!1),v=(0,o.useRef)([]);(0,o.useEffect)((()=>{v.current[0]&&v.current[0].focus()}),[]);(0,o.useEffect)((()=>{6===u.join("").length&&b()}),[u]);const b=async()=>{const e=u.join("");if(6!==e.length)return p("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 6-\u0437\u043d\u0430\u0447\u043d\u044b\u0439 \u043a\u043e\u0434");m(!0);try{const t=await Qr.post(`${n}/api/verify-2fa`,{userId:r,token:e,mode:c});("verify-only"===c?t.data.success:t.data.token)?(y(!0),p(null),t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),setTimeout((()=>{i(t.data.token,t.data.user)}),600)):(p("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043a\u043e\u0434"),y(!1))}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 2FA:",t),p("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u043a\u043e\u0434\u0430")}finally{m(!1)}};return(0,Xr.jsx)("div",{className:"twofa-modal",ref:t,children:(0,Xr.jsxs)("div",{className:"twofa-content",children:[a&&l&&(0,Xr.jsxs)("div",{className:"qrcode-container",children:[(0,Xr.jsx)("small",{children:"\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 qr-\u043a\u043e\u0434 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0434\u0435\u043d\u0438\u0438 Google Auth, Apple Password, \u0442\u043f..."}),(0,Xr.jsx)("img",{src:l,alt:"QR-\u043a\u043e\u0434 \u0434\u043b\u044f 2FA",className:"twofa-qrcode"})]}),(0,Xr.jsx)("h3",{children:"\u041a\u043e\u0434 \u0438\u0437 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f"}),(0,Xr.jsx)("small",{style:{color:"gray"},children:"Google Auth, Apple Password, ect..."}),(0,Xr.jsx)("div",{className:"twofa-inputs",onPaste:e=>{const t=e.clipboardData.getData("text").trim();if(/^\d{6}$/.test(t)){const n=t.split("");n.forEach(((e,t)=>{v.current[t]&&(v.current[t].value=e)})),d(n),setTimeout((()=>{b(n.join(""))}),100),e.preventDefault()}},children:u.map(((e,t)=>(0,Xr.jsx)("input",{type:"tel",pattern:"[0-9]*",value:e,onChange:e=>((e,t)=>{if(!/^[0-9]?$/.test(e))return;const n=[...u];n[t]=e,d(n),e&&t<5&&v.current[t+1].focus()})(e.target.value,t),onKeyDown:e=>((e,t)=>{"Backspace"===e.key&&!u[t]&&t>0&&v.current[t-1].focus()})(e,t),ref:e=>v.current[t]=e,className:g?"success":h?"error":"",maxLength:1},t)))}),h&&(0,Xr.jsx)("p",{className:"twofa-error",children:h}),(0,Xr.jsxs)("div",{className:"buttons",children:[(0,Xr.jsx)("button",{className:"cancel-auth-btn",onClick:s,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Xr.jsx)("button",{className:"confirm-button",onClick:b,disabled:f,children:f?"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430...":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]})})})),Zr=Yr;const eo=function(e){let{onLogin:t,apiUrl:n}=e;const[r,i]=(0,o.useState)(""),[s,a]=(0,o.useState)(""),[l,c]=(0,o.useState)(""),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(null),f=(ne(),(0,o.useRef)(null));return(0,Xr.jsxs)("div",{className:"login-page",children:[(0,Xr.jsxs)("div",{className:"login-container",children:[(0,Xr.jsx)("h2",{children:"\u0412\u0445\u043e\u0434"}),l&&(0,Xr.jsx)("p",{className:"error-message",children:l}),(0,Xr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await Qr.post(`${n}/api/login`,{username:r,password:s});if(e.data.requires2FA)return p(e.data.userId),void d(!0);const o=e.data.token,i=e.data.user;localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(i)),t(o,i)}catch(o){console.error(o),c("Invalid username or password")}},className:"login-form",children:[(0,Xr.jsxs)("div",{className:"form-group",children:[(0,Xr.jsx)("label",{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"}),(0,Xr.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"})]}),(0,Xr.jsxs)("div",{className:"form-group",children:[(0,Xr.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),(0,Xr.jsx)("input",{type:"password",value:s,onChange:e=>a(e.target.value),required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})]}),(0,Xr.jsx)("button",{type:"submit",className:"submit-button",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}),u&&(0,Xr.jsx)(_t,{nodeRef:f,in:u,timeout:300,classNames:"fade-zoom",unmountOnExit:!0,children:(0,Xr.jsx)(Zr,{showQrCode:!1,ref:f,show:!0,apiUrl:n,userId:h,onClose:()=>d(!1),onSuccess:(e,n)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(n)),t(e,n)}})})]})};const to=n.p+"static/media/delete.85be139089fe2b2c49cd8b45a208d944.svg";const no=function(e){let{group:t,token:n,apiUrl:r,onEditorClose:i}=e;const[s,a]=(0,o.useState)(t);(0,o.useEffect)((()=>{a(t)}),[t]);const l=(e,t,n,r)=>{const o=s.schedule.map(((o,i)=>{if(i===e){const e=o.lessons.map(((e,o)=>o===t?{...e,[n]:r}:e));return{...o,lessons:e}}return o}));a({...s,schedule:o})};return(0,Xr.jsxs)("div",{className:"group-editor",children:[s.schedule.map(((e,t)=>(0,Xr.jsxs)("div",{className:"group-editor-item",children:[(0,Xr.jsx)("input",{type:"text",value:e.day,onChange:e=>((e,t)=>{const n=s.schedule.map(((n,r)=>r===e?{...n,day:t}:n));a({...s,schedule:n})})(t,e.target.value),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043d\u044f",style:{fontWeight:"bold"}}),(0,Xr.jsx)("button",{onClick:()=>(e=>{const t={time:"",subject:"",teacher:"",cabinet:""},n=s.schedule.map(((n,r)=>r===e?{...n,lessons:[...n.lessons||[],t]}:n));a({...s,schedule:n})})(t),style:{marginLeft:"10px"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0440\u043e\u043a"}),e.lessons&&e.lessons.map(((e,n)=>(0,Xr.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"5px",alignItems:"center"},children:[(0,Xr.jsx)("input",{type:"time",min:"08:00",max:"18:00",value:e.time,onChange:e=>l(t,n,"time",e.target.value)}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u0423\u0440\u043e\u043a",value:e.subject,onChange:e=>l(t,n,"subject",e.target.value)}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c",value:e.teacher,onChange:e=>l(t,n,"teacher",e.target.value)}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442",value:e.room,onChange:e=>l(t,n,"room",e.target.value)}),(0,Xr.jsx)("button",{onClick:()=>((e,t)=>{const n=s.schedule.map(((n,r)=>{if(r===e){const e=n.lessons.filter(((e,n)=>n!==t));return{...n,lessons:e}}return n}));a({...s,schedule:n})})(t,n),className:"delete-lesson-btn",children:(0,Xr.jsx)("img",{src:to,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u043a"})})]},n)))]},t))),(0,Xr.jsx)("button",{onClick:()=>{a({...s,schedule:[...s.schedule,{day:"\u041d\u043e\u0432\u044b\u0439 \u0434\u0435\u043d\u044c",lessons:[]}]})},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0435\u043d\u044c"}),(0,Xr.jsxs)("div",{style:{marginTop:"20px",gap:"10px",display:"flex",justifyContent:"center"},children:[(0,Xr.jsx)("button",{onClick:async()=>{try{const e=await Qr.put(`${r}/api/groups/${s._id}/schedule`,{schedule:s.schedule},{headers:{Authorization:`Bearer ${n}`}});alert("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"),i(e.data.group||s)}catch(e){console.error(e),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f")}},style:{backgroundColor:"#16db65"},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"}),(0,Xr.jsx)("button",{onClick:()=>{i(t)},style:{backgroundColor:"#ff3c38"},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})};const ro=function(e){let{group:t,token:n,user:r,apiUrl:i}=e;const[s,a]=(0,o.useState)(t),[l,c]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{a(t)}),[t]),(0,Xr.jsxs)("div",{className:"group-detail",children:[(0,Xr.jsxs)("h3",{children:["\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b: ",s.name]}),l?(0,Xr.jsx)(no,{group:s,token:n,apiUrl:i,onEditorClose:e=>{a(e),c(!1)}}):(0,Xr.jsxs)(Xr.Fragment,{children:[s.schedule&&s.schedule.length>0?s.schedule.map(((e,t)=>(0,Xr.jsxs)("div",{className:"day-schedule",children:[(0,Xr.jsx)("h4",{children:e.day}),(0,Xr.jsxs)("table",{className:"schedule-table",children:[(0,Xr.jsx)("thead",{children:(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("th",{children:"\u0412\u0440\u0435\u043c\u044f"}),(0,Xr.jsx)("th",{children:"\u0423\u0440\u043e\u043a"}),(0,Xr.jsx)("th",{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,Xr.jsx)("th",{children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"})]})}),(0,Xr.jsx)("tbody",{children:e.lessons&&e.lessons.length>0?e.lessons.map(((e,t)=>(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("td",{children:e.time}),(0,Xr.jsx)("td",{children:e.subject}),(0,Xr.jsx)("td",{children:e.teacher}),(0,Xr.jsx)("td",{children:e.room})]},t))):(0,Xr.jsx)("tr",{children:(0,Xr.jsx)("td",{colSpan:"4",children:"\u041d\u0435\u0442 \u0443\u0440\u043e\u043a\u043e\u0432"})})})]})]},t))):(0,Xr.jsx)("p",{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e"}),("teacher"===r.role||"director"===r.role)&&(0,Xr.jsx)("button",{onClick:()=>{c(!0)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})};const oo=function(e){let{token:t,user:n,onGroupAdded:r,apiUrl:i}=e;const[s,a]=(0,o.useState)(!1),[l,c]=(0,o.useState)(""),[u,d]=(0,o.useState)([]);if("director"!==n.role)return null;const h=(e,t,n,r)=>{const o=[...u];o[e].lessons[t][n]=r,d(o)};return(0,Xr.jsx)("div",{className:"new-group-panel",children:s?(0,Xr.jsxs)("div",{className:"new-group",children:[(0,Xr.jsx)("div",{style:{marginBottom:"10px"},children:(0,Xr.jsx)("label",{children:(0,Xr.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b",style:{marginLeft:"10px"}})})}),(0,Xr.jsx)("div",{style:{marginBottom:"10px"},children:(0,Xr.jsx)("button",{onClick:()=>{0===u.length&&d([{day:"\u041d\u043e\u0432\u044b\u0439 \u0434\u0435\u043d\u044c",lessons:[]}])},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})}),u.length>0&&(0,Xr.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,Xr.jsx)("h4",{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),u.map(((e,t)=>(0,Xr.jsxs)("div",{style:{border:"1px solid #aaa",padding:"10px",marginBottom:"10px"},children:[(0,Xr.jsxs)("div",{children:[(0,Xr.jsxs)("label",{children:["\u0414\u0435\u043d\u044c:",(0,Xr.jsx)("input",{type:"text",value:e.day,onChange:e=>((e,t)=>{const n=[...u];n[e].day=t,d(n)})(t,e.target.value),style:{marginLeft:"10px"}})]}),(0,Xr.jsx)("button",{onClick:()=>(e=>{const t=[...u];t[e].lessons.push({time:"",subject:"",teacher:"",room:""}),d(t)})(t),style:{marginLeft:"10px"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0440\u043e\u043a"})]}),e.lessons.map(((e,n)=>(0,Xr.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"5px"},children:[(0,Xr.jsx)("input",{type:"time",placeholder:"\u0412\u0440\u0435\u043c\u044f",value:e.time,onChange:e=>h(t,n,"time",e.target.value)}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u0423\u0440\u043e\u043a",value:e.subject,onChange:e=>h(t,n,"subject",e.target.value)}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c",value:e.teacher,onChange:e=>h(t,n,"teacher",e.target.value)}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442",value:e.room,onChange:e=>h(t,n,"room",e.target.value)}),(0,Xr.jsx)("button",{onClick:()=>((e,t)=>{const n=[...u];n[e].lessons.splice(t,1),d(n)})(t,n),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u043a"})]},n)))]},t))),(0,Xr.jsx)("button",{onClick:()=>{const e={day:`\u041d\u043e\u0432\u044b\u0439 \u0434\u0435\u043d\u044c ${u.length+1}`,lessons:[]};d([...u,e])},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0435\u043d\u044c"})]}),(0,Xr.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Xr.jsx)("button",{onClick:()=>{if(!l)return void alert("\u0418\u043c\u044f \u0433\u0440\u0443\u043f\u043f\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c");const e={name:l,schedule:u};Qr.post(`${i}/api/groups`,e,{headers:{Authorization:`Bearer ${t}`}}).then((e=>{alert("\u0413\u0440\u0443\u043f\u043f\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"),r&&r(e.data),a(!1),c(""),d([])})).catch((e=>{console.error(e),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0433\u0440\u0443\u043f\u043f\u044b")}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>{a(!1),c(""),d([])},style:{marginLeft:"10px"},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]}):(0,Xr.jsx)("button",{onClick:()=>{a(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"})})},io=()=>(0,Xr.jsx)("div",{className:"glass-loader-container",children:(0,Xr.jsxs)("div",{className:"glass-loader",children:[(0,Xr.jsx)("div",{className:"pulse-ring"}),(0,Xr.jsx)("span",{className:"glass-text",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})});const so=function(e){let{token:t,user:n,apiUrl:r}=e;const[i,s]=(0,o.useState)([]),[a,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(!1),[p]=ct(),f=p.get("highlight"),[m,g]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{Qr.get(`${r}/api/groups`,{headers:{Authorization:`Bearer ${t}`}}).then((e=>s(e.data))).catch((e=>console.error(e))).finally((()=>g(!1)))}),[]),(0,o.useEffect)((()=>{f&&(u(f),setTimeout((()=>{const e=document.getElementById(`group-${f}`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("highlighted"),setTimeout((()=>{e.classList.remove("highlighted")}),3e3))}),300))}),[f]),(0,Xr.jsxs)("div",{className:"groups-container",children:[(0,Xr.jsx)("h1",{style:{marginBottom:"15px"},children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0439"}),(0,Xr.jsxs)("div",{className:"groups-list",children:[(0,Xr.jsx)("h2",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),m&&(0,Xr.jsx)(io,{className:"profile-loading"}),i.map((e=>(0,Xr.jsxs)("div",{className:"group-item ",id:`group-${e._id}`,children:[(0,Xr.jsxs)("div",{className:"group-header",onClick:()=>{return t=e._id,void u(c===t?null:t);var t},children:[e.name,(0,Xr.jsx)("span",{className:"toggle-icon",children:c===e._id?" \u25b2":" \u25bc"}),"director"===n.role&&(0,Xr.jsx)("button",{onClick:n=>{var o;n.stopPropagation(),o=e._id,window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443?")&&Qr.delete(`${r}/api/groups/${o}`,{headers:{Authorization:`Bearer ${t}`}}).then((()=>{s(i.filter((e=>e._id!==o)))})).catch((e=>console.error(e)))},className:"delete-group-btn",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),c===e._id&&(0,Xr.jsx)("div",{className:"group-details",children:(0,Xr.jsx)(ro,{group:e,token:t,user:n,apiUrl:r})})]},e._id))),d&&(0,Xr.jsx)(oo,{token:t,user:n,onGroupAdded:e=>{s([...i,e]),h(!1)}}),"director"===n.role&&(0,Xr.jsx)("button",{onClick:()=>h(!d),children:d?"\u041e\u0442\u043c\u0435\u043d\u0430":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})},ao=e=>{let{studentId:t,token:n,apiUrl:r,user:i}=e;const[s,a]=(0,o.useState)([]),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)([]),[h,p]=(0,o.useState)([]),f=(0,o.useRef)(null),m=i.groupId;(0,o.useEffect)((()=>{(async()=>{try{const[e,o,i]=await Promise.all([Qr.get(`${r}/api/grades/${t}`,{headers:{Authorization:`Bearer ${n}`}}),Qr.get(`${r}/api/users/${t}`,{headers:{Authorization:`Bearer ${n}`}}),Qr.get(`${r}/api/subjects/${m}`,{headers:{Authorization:`Bearer ${n}`}})]),s=e.data;a(s),c(o.data),p(i.data);const l=(new Date).setHours(0,0,0,0),u=s.map((e=>new Date(e.date).setHours(0,0,0,0))),h=[...new Set(u)].sort(((e,t)=>e-t));h.includes(l)||h.push(l);const f=h.map((e=>new Date(e)));d(f)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445:",e)}})()}),[t,r,n,m]);return(0,Xr.jsxs)("div",{className:"student-grade-table",children:[(0,Xr.jsxs)("h2",{children:["\u041e\u0446\u0435\u043d\u043a\u0438 \u0443\u0447\u0435\u043d\u0438\u043a\u0430: ",null===l||void 0===l?void 0:l.username]}),(0,Xr.jsx)("div",{className:"grades-table-wrapper-student",children:(0,Xr.jsxs)("table",{className:"grades-table",children:[(0,Xr.jsx)("thead",{children:(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("th",{className:"fixed-column",children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442"}),u.map(((e,t)=>(0,Xr.jsx)("th",{ref:e.toDateString()===(new Date).toDateString()?f:null,children:e.toLocaleDateString()},t)))]})}),(0,Xr.jsx)("tbody",{children:h.map((e=>(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("td",{className:"fixed-column",children:e.name}),u.map(((t,n)=>{const r=((e,t)=>{const n=new Date(t).toDateString();return s.find((t=>{var r,o;const i=new Date(t.date).toDateString();return(t.subjectId===e||(null===(r=t.subjectId)||void 0===r?void 0:r._id)===e||(null===(o=t.subjectId)||void 0===o?void 0:o.toString())===e.toString())&&i===n}))})(e._id,t);return(0,Xr.jsx)("td",{className:"student-grade-cell",children:r?(0,Xr.jsx)("span",{title:r.comment,children:r.value}):""},n)}))]},e._id)))})]})})]})};function lo(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=lo(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const co=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=lo(e))&&(r&&(r+=" "),r+=t);return r};!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var uo=e=>"number"==typeof e&&!isNaN(e),ho=e=>"string"==typeof e,po=e=>"function"==typeof e,fo=e=>ho(e)||po(e)?e:null,mo=(e,t)=>!1===e||uo(e)&&e>0?e:t,go=e=>(0,o.isValidElement)(e)||ho(e)||po(e)||uo(e);function yo(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=e;return function(e){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:p}=e,f=r?`${t}--${l}`:t,m=r?`${n}--${l}`:n,g=(0,o.useRef)(0);return(0,o.useLayoutEffect)((()=>{let e=d.current,t=f.split(" "),n=r=>{r.target===d.current&&(p(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,o.useEffect)((()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),i?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:o}=e;requestAnimationFrame((()=>{o.minHeight="initial",o.height=r+"px",o.transition=`all ${n}ms`,requestAnimationFrame((()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(t,n)}))}))}(e,u,s):u()};h||(c?t():(g.current=1,e.className+=` ${m}`,e.addEventListener("animationend",t)))}),[h]),o.createElement(o.Fragment,null,a)}}function vo(e,t){return{content:bo(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function bo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,o.isValidElement)(e)&&!ho(e.type)?(0,o.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):po(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function wo(e){let{delay:t,isRunning:n,closeToast:r,type:i="default",hide:s,className:a,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:h}=e,p=s||l&&0===c,f={animationDuration:`${t}ms`,animationPlayState:n?"running":"paused"};l&&(f.transform=`scaleX(${c})`);let m=co("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),g=po(a)?a({rtl:u,type:i,defaultClassName:m}):co(m,a),y={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return o.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},o.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${i}`}),o.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:g,style:f,...y}))}var xo=1,ko=()=>""+xo++;function So(e,t,n){let r=1,o=0,i=[],s=[],a=t,l=new Map,c=new Set,u=()=>{s=Array.from(l.values()),c.forEach((e=>e()))},d=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)l.forEach(d);else{let t=l.get(e);t&&d(t)}u()},p=e=>{var t,r;let{toastId:o,updateId:i}=e.props,s=null==i;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(o,e),u(),n(vo(e,s?"added":"updated")),s&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:a,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:h,toasts:l,clearQueue:()=>{o-=i.length,i=[]},buildToast:(t,s)=>{if((t=>{let{containerId:n,toastId:r,updateId:o}=t,i=n?n!==e:1!==e,s=l.has(r)&&null==o;return i||s})(s))return;let{toastId:c,updateId:d,data:f,staleId:m,delay:g}=s,y=null==d;y&&o++;let v={...a,style:a.toastStyle,key:r++,...Object.fromEntries(Object.entries(s).filter((e=>{let[t,n]=e;return null!=n}))),toastId:c,updateId:d,data:f,isIn:!1,className:fo(s.className||a.toastClassName),progressClassName:fo(s.progressClassName||a.progressClassName),autoClose:!s.isLoading&&mo(s.autoClose,a.autoClose),closeToast(e){l.get(c).removalReason=e,h(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n(vo(e,"removed")),l.delete(c),o--,o<0&&(o=0),i.length>0)return void p(i.shift());u()}}};v.closeButton=a.closeButton,!1===s.closeButton||go(s.closeButton)?v.closeButton=s.closeButton:!0===s.closeButton&&(v.closeButton=!go(a.closeButton)||a.closeButton);let b={content:t,props:v,staleId:m};a.limit&&a.limit>0&&o>a.limit&&y?i.push(b):uo(g)?setTimeout((()=>{p(b)}),g):p(b)},setProps(e){a=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>s}}var Co=new Map,Eo=[],To=new Set,No=e=>To.forEach((t=>t(e))),Oo=()=>Co.size>0;function jo(e,t){var n;if(t)return!(null==(n=Co.get(t))||!n.isToastActive(e));let r=!1;return Co.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function Mo(e){if(Oo()){if(null==e||(e=>ho(e)||uo(e))(e))Co.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=Co.get(e.containerId);t?t.removeToast(e.id):Co.forEach((t=>{t.removeToast(e.id)}))}}else Eo=Eo.filter((t=>null!=e&&t.options.toastId!==e))}function Ao(e,t){go(e)&&(Oo()||Eo.push({content:e,options:t}),Co.forEach((n=>{n.buildToast(e,t)})))}function _o(e,t){Co.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function Ro(e){let t=e.containerId||1;return{subscribe(n){let r=So(t,e,No);Co.set(t,r);let o=r.observe(n);return Eo.forEach((e=>Ao(e.content,e.options))),Eo=[],()=>{o(),Co.delete(t)}},setProps(e){var n;null==(n=Co.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=Co.get(t))?void 0:e.getSnapshot()}}}function Do(e){return e&&(ho(e.toastId)||uo(e.toastId))?e.toastId:ko()}function Po(e,t){return Ao(e,t),t.toastId}function Lo(e,t){return{...t,type:t&&t.type||e,toastId:Do(t)}}function $o(e){return(t,n)=>Po(t,Lo(e,n))}function Io(e,t){return Po(e,Lo("default",t))}function zo(e){let[t,n]=(0,o.useState)(!1),[r,i]=(0,o.useState)(!1),s=(0,o.useRef)(null),a=(0,o.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=e;function p(){n(!0)}function f(){n(!1)}function m(n){let r=s.current;if(a.canDrag&&r){a.didMove=!0,t&&f(),"x"===e.draggableDirection?a.delta=n.clientX-a.start:a.delta=n.clientY-a.start,a.start!==n.clientX&&(a.canCloseOnClick=!1);let o="x"===e.draggableDirection?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;r.style.transform=`translate3d(${o},0)`,r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance))}}function g(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g);let t=s.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return i(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=Co.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,o.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||f(),window.addEventListener("focus",p),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",f)}}),[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",g);let n=s.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:o,right:i}=s.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=o&&t.clientX<=i&&t.clientY>=n&&t.clientY<=r?f():p()}};return l&&c&&(y.onMouseEnter=f,e.stacked||(y.onMouseLeave=p)),h&&(y.onClick=e=>{d&&d(e),a.canCloseOnClick&&u(!0)}),{playToast:p,pauseToast:f,isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:y}}Io.loading=(e,t)=>Po(e,Lo("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Io.promise=function(e,t,n){let r,{pending:o,error:i,success:s}=t;o&&(r=ho(o)?Io.loading(o,n):Io.loading(o.render,{...n,...o}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,o)=>{if(null==t)return void Io.dismiss(r);let i={type:e,...a,...n,data:o},s=ho(t)?{render:t}:t;return r?Io.update(r,{...i,...s}):Io(s.render,{...i,...s}),o},c=po(e)?e():e;return c.then((e=>l("success",s,e))).catch((e=>l("error",i,e))),c},Io.success=$o("success"),Io.info=$o("info"),Io.error=$o("error"),Io.warning=$o("warning"),Io.warn=Io.warning,Io.dark=(e,t)=>Po(e,Lo("default",{theme:"dark",...t})),Io.dismiss=function(e){Mo(e)},Io.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Co.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},Io.isActive=jo,Io.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=Co.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:o}=n,i={delay:100,...r,...t,toastId:t.toastId||e,updateId:ko()};i.toastId!==e&&(i.staleId=e);let s=i.render||o;delete i.render,Po(s,i)}},Io.done=e=>{Io.update(e,{progress:1})},Io.onChange=function(e){return To.add(e),()=>{To.delete(e)}},Io.play=e=>_o(!0,e),Io.pause=e=>_o(!1,e);var Bo="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,Fo=e=>{let{theme:t,type:n,isLoading:r,...i}=e;return o.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...i})};var Vo={info:function(e){return o.createElement(Fo,{...e},o.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return o.createElement(Fo,{...e},o.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return o.createElement(Fo,{...e},o.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return o.createElement(Fo,{...e},o.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return o.createElement("div",{className:"Toastify__spinner"})}};function Ho(e){let{theme:t,type:n,isLoading:r,icon:i}=e,s=null,a={theme:t,type:n};return!1===i||(po(i)?s=i({...a,isLoading:r}):(0,o.isValidElement)(i)?s=(0,o.cloneElement)(i,a):r?s=Vo.spinner():(e=>e in Vo)(n)&&(s=Vo[n](a))),s}var Uo=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=zo(e),{closeButton:a,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:h,closeToast:p,transition:f,position:m,className:g,style:y,progressClassName:v,updateId:b,role:w,progress:x,rtl:k,toastId:S,deleteToast:C,isIn:E,isLoading:T,closeOnClick:N,theme:O,ariaLabel:j}=e,M=co("Toastify__toast",`Toastify__toast-theme--${O}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":N}),A=po(g)?g({rtl:k,position:m,type:d,defaultClassName:M}):co(M,g),_=Ho(e),R=!!x||!c,D={closeToast:p,type:d,theme:O},P=null;return!1===a||(P=po(a)?a(D):(0,o.isValidElement)(a)?(0,o.cloneElement)(a,D):function(e){let{closeToast:t,theme:n,ariaLabel:r="close"}=e;return o.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(!0)},"aria-label":r},o.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},o.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(D)),o.createElement(f,{isIn:E,done:C,position:m,preventExitTransition:n,nodeRef:r,playToast:s},o.createElement("div",{id:S,tabIndex:0,onClick:u,"data-in":E,className:A,...i,style:y,ref:r,...E&&{role:w,"aria-label":j}},null!=_&&o.createElement("div",{className:co("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},_),bo(l,e,!t),P,!e.customProgressBar&&o.createElement(wo,{...b&&!R?{key:`p-${b}`}:{},rtl:k,theme:O,delay:c,isRunning:t,isIn:E,closeToast:p,hide:h,type:d,className:v,controlledProgress:R,progress:x||0})))},Wo=function(e){return{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},qo=yo(Wo("bounce",!0)),Ko=(yo(Wo("slide",!0)),yo(Wo("zoom")),yo(Wo("flip")),{position:"top-right",transition:qo,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function Jo(e){let t={...Ko,...e},n=e.stacked,[r,i]=(0,o.useState)(!0),s=(0,o.useRef)(null),{getToastToRender:a,isToastActive:l,count:c}=function(e){var t;let{subscribe:n,getSnapshot:r,setProps:i}=(0,o.useRef)(Ro(e)).current;i(e);let s=null==(t=(0,o.useSyncExternalStore)(n,r,r))?void 0:t.slice();return{getToastToRender:function(t){if(!s)return[];let n=new Map;return e.newestOnTop&&s.reverse(),s.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:jo,count:null==s?void 0:s.length}}(t),{className:u,style:d,rtl:h,containerId:p,hotKeys:f}=t;function m(e){let t=co("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":h});return po(u)?u({position:e,rtl:h,defaultClassName:t}):co(t,fo(u))}function g(){n&&(i(!0),Io.play())}return Bo((()=>{var e;if(n){let n=s.current.querySelectorAll('[data-in="true"]'),o=12,i=null==(e=t.position)?void 0:e.includes("top"),a=0,l=0;Array.from(n).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed=`${r}`),n.dataset.pos||(n.dataset.pos=i?"top":"bot");let s=a*(r?.2:1)+(r?0:o*t);n.style.setProperty("--y",`${i?s:-1*s}px`),n.style.setProperty("--g",`${o}`),n.style.setProperty("--s",""+(1-(r?l:0))),a+=n.offsetHeight,l+=.025}))}}),[r,c,n]),(0,o.useEffect)((()=>{function e(e){var t;let n=s.current;f(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),i(!1),Io.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(i(!0),Io.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[f]),o.createElement("section",{ref:s,className:"Toastify",id:p,onMouseEnter:()=>{n&&(i(!1),Io.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},a(((e,t)=>{let r=t.length?{...d}:{...d,pointerEvents:"none"};return o.createElement("div",{tabIndex:-1,className:m(e),"data-stacked":n,style:r,key:`c-${e}`},t.map((e=>{let{content:t,props:r}=e;return o.createElement(Uo,{...r,stacked:n,collapseAll:g,isIn:l(r.toastId,r.containerId),key:`t-${r.key}`},t)})))})))}const Go=e=>{let{subject:t,groupId:n,token:r,user:i,apiUrl:s,availableStudents:a,fetchGroupMembers:l}=e;const[c,u]=(0,o.useState)([]),[d,h]=(0,o.useState)([]),[p,f]=(0,o.useState)(null),[m,g]=(0,o.useState)(""),[y,v]=(0,o.useState)(null),[b,w]=(0,o.useState)(""),[x,k]=(0,o.useState)(null),[S,C]=(0,o.useState)(""),E=t._id,T=(0,o.useRef)(null),N=(0,o.useRef)(!1),O=(0,o.useRef)(null),j=new Date,M=(j.toDateString(),d.map((e=>new Date(e.date).toDateString()))),A=new Date;A.setDate(j.getDate()-21);const _=new Date;_.setDate(j.getDate()+14);const R=[];for(let o=new Date(A);o<=_;o.setDate(o.getDate()+1))R.push(new Date(o).toDateString());const D=[...new Set([...M,...R])].sort(((e,t)=>new Date(e)-new Date(t))).map((e=>new Date(e))),P=async()=>{try{const[e,t]=await Promise.all([Qr.get(`${s}/api/groups/${n}/students`,{headers:{Authorization:`Bearer ${r}`}}),Qr.get(`${s}/api/grades/by-subject/${E}`,{headers:{Authorization:`Bearer ${r}`}})]);u(e.data),h(t.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445:",e)}};(0,o.useEffect)((()=>{P()}),[E]),(0,o.useEffect)((()=>{if(T.current&&!N.current){const e=T.current,t=e.closest(".grades-table-wrapper");if(t){const n=e.offsetLeft-575;t.scrollTo({left:n,behavior:"smooth"}),N.current=!0}}}),[D]),(0,o.useEffect)((()=>{const e=e=>{O.current&&!O.current.contains(e.target)&&k(null)},t=setTimeout((()=>{document.addEventListener("click",e)}),0);return()=>{clearTimeout(t),document.removeEventListener("click",e)}}),[]);const L=(e,t)=>d.find((n=>{var r;return(null===(r=n.studentId)||void 0===r?void 0:r._id.toString())===(null===e||void 0===e?void 0:e.toString())&&new Date(n.date).toDateString()===t.toDateString()})),$=async(e,n)=>{const o=L(e,n);if(b<2||b>5)alert("\u041e\u0446\u0435\u043d\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u0442 2 \u0434\u043e 5");else try{o?await Qr.put(`${s}/api/grades/${o._id}`,{value:b},{headers:{Authorization:`Bearer ${r}`}}):await Qr.post(`${s}/api/grades`,{studentId:e,teacherId:i._id,subjectId:t._id,value:b,date:new Date(n).toISOString(),comment:m},{headers:{Authorization:`Bearer ${r}`}});const a=await Qr.get(`${s}/api/grades/by-subject/${t._id}`,{headers:{Authorization:`Bearer ${r}`}});h(a.data),v(null),w("")}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043e\u0446\u0435\u043d\u043a\u0438:",a)}};return(0,Xr.jsxs)("div",{className:"grades-table",style:{display:"grid"},children:[(0,Xr.jsxs)("div",{className:"table-info",children:[(0,Xr.jsxs)("h3",{children:["\u041f\u0440\u0435\u0434\u043c\u0435\u0442: ",t.name]}),(0,Xr.jsxs)("div",{className:"grade-desc-container",children:[(0,Xr.jsx)("label",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0446\u0435\u043d\u043a\u0438:"}),(0,Xr.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041e\u0442\u0432\u0435\u0442 \u043d\u0430 \u0443\u0440\u043e\u043a\u0435"})]})]}),(0,Xr.jsx)("div",{className:"grades-table-wrapper",children:(0,Xr.jsxs)("table",{className:"grades-table",children:[(0,Xr.jsx)("thead",{children:(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("th",{className:"fixed-column",children:"\u0423\u0447\u0435\u043d\u0438\u043a"}),D.map(((e,t)=>(0,Xr.jsx)("th",{ref:e.toDateString()===(new Date).toDateString()?T:null,children:e.toLocaleDateString()},t)))]})}),(0,Xr.jsx)("tbody",{children:[...c].sort(((e,t)=>e.username.localeCompare(t.username))).map((e=>(0,Xr.jsxs)("tr",{children:[(0,Xr.jsxs)("td",{className:"fixed-column",children:[(0,Xr.jsx)(ot,{to:`/profile/${e._id}`,className:"student-link",children:e.username}),(0,Xr.jsx)("button",{className:"remove-btn",onClick:()=>(async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430 \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b?"))try{await Qr.put(`${s}/api/groups/${n}/remove-student`,{userId:e},{headers:{Authorization:`Bearer ${r}`}}),P(),Io.success("\u0423\u0447\u0435\u043d\u0438\u043a \u0443\u0434\u0430\u043b\u0451\u043d \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b.")}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0443\u0447\u0435\u043d\u0438\u043a\u0430:",t),Io.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430.")}})(e._id),children:"\u274c"})]}),D.map(((n,o)=>{var i,a,l;const c=L(e._id,n),u=(null===y||void 0===y?void 0:y.studentId)===e._id&&(null===y||void 0===y||null===(i=y.date)||void 0===i||null===(a=i.toDateString)||void 0===a?void 0:a.call(i))===n.toDateString();return(0,Xr.jsx)("td",{ref:n.toDateString()===(new Date).toDateString()?T:null,onClick:()=>{c?k({...c,studentId:e._id,date:new Date(c.date)}):v({studentId:e._id,date:n})},onMouseEnter:()=>f(c),onMouseLeave:()=>f(null),style:{position:"relative",cursor:"pointer"},children:u?(0,Xr.jsx)("input",{type:"text",autoFocus:!0,value:b,onChange:e=>w(e.target.value),onBlur:()=>$(e._id,n),onKeyDown:t=>{"Enter"===t.key&&$(e._id,n)},className:"grade-input"}):(0,Xr.jsxs)(Xr.Fragment,{children:[null!==(l=null===c||void 0===c?void 0:c.value)&&void 0!==l?l:"",p===c&&(null===c||void 0===c?void 0:c.comment)&&(0,Xr.jsx)("div",{className:"tooltip",children:c.comment}),(null===x||void 0===x?void 0:x.studentId)===e._id&&(null===x||void 0===x?void 0:x.date)&&new Date(x.date).toDateString()===n.toDateString()&&(0,Xr.jsxs)("div",{className:"grade-menu",onClick:e=>e.stopPropagation(),children:[(0,Xr.jsx)("button",{onClick:()=>(e=>{v({studentId:e.studentId,date:new Date(e.date)}),w(e.value),k(null)})(c),children:"\u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>(async e=>{try{await Qr.delete(`${s}/api/grades/${e}`,{headers:{Authorization:`Bearer ${r}`}});const n=await Qr.get(`${s}/api/grades/by-subject/${t._id}`,{headers:{Authorization:`Bearer ${r}`}});h(n.data),k(null)}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043e\u0446\u0435\u043d\u043a\u0438:",n)}})(c._id),children:"\ud83d\uddd1\ufe0f \u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>k(null),children:"\u274c \u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})},o)}))]},e._id)))})]})}),(0,Xr.jsxs)("div",{style:{marginTop:"15px"},children:[(0,Xr.jsx)("label",{style:{marginRight:"10px"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430: "}),(0,Xr.jsxs)("select",{value:S,onChange:e=>C(e.target.value),style:{padding:"5px 10px"},children:[(0,Xr.jsx)("option",{value:"",disabled:!0,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430"}),a.filter((e=>!c.some((t=>t._id.toString()===e._id.toString())))).map((e=>(0,Xr.jsx)("option",{value:e._id,children:e.username},e._id)))]}),(0,Xr.jsx)("button",{onClick:async()=>{if(S)try{await Qr.put(`${s}/api/groups/${n}/add-student`,{userId:S},{headers:{Authorization:`Bearer ${r}`}}),C(""),P(),Io.success("\u0423\u0447\u0435\u043d\u0438\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0443\u0447\u0435\u043d\u0438\u043a\u0430:",e)}},disabled:!S,style:{marginLeft:"10px",padding:"5px 12px"},children:"\u2795 \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})},Qo=e=>{let{subject:t,groupId:n,apiUrl:r,token:i,user:s}=e;const[a,l]=(0,o.useState)([]),[c,u]=(0,o.useState)([]),[d,h]=(0,o.useState)(null),[p,f]=(0,o.useState)({semester:"",type:"",grade:"",date:""}),m=t._id,g=async()=>{try{const[e,t]=await Promise.all([Qr.get(`${r}/api/groups/${n}/students`,{headers:{Authorization:`Bearer ${i}`}}),Qr.get(`${r}/api/gradebook/by-subject/${m}`,{headers:{Authorization:`Bearer ${i}`}})]);l(e.data),u(t.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",e)}};(0,o.useEffect)((()=>{g()}),[m]);return(0,Xr.jsxs)("div",{className:"gradebook-table-teacher",children:[(0,Xr.jsxs)("h3",{style:{margin:"5px"},children:["\u0417\u0430\u0447\u0451\u0442\u043a\u0430 \u043f\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0443: ",t.name]}),(0,Xr.jsxs)("table",{children:[(0,Xr.jsx)("thead",{children:(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("th",{children:"\u0423\u0447\u0435\u043d\u0438\u043a"}),(0,Xr.jsx)("th",{children:"\u0421\u0435\u043c\u0435\u0441\u0442\u0440"}),(0,Xr.jsx)("th",{children:"\u0422\u0438\u043f"}),(0,Xr.jsx)("th",{children:"\u041e\u0446\u0435\u043d\u043a\u0430"}),(0,Xr.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),(0,Xr.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,Xr.jsx)("tbody",{children:[...a].sort(((e,t)=>e.username.localeCompare(t.username))).map((e=>{var t,n;const o=c.find((t=>("object"===typeof t.studentId?t.studentId._id:t.studentId)===e._id)),a=("object"===typeof(null===d||void 0===d?void 0:d.studentId)?null===d||void 0===d||null===(t=d.studentId)||void 0===t?void 0:t._id:null===d||void 0===d?void 0:d.studentId)===e._id;return(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("td",{children:e.username}),a?(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("td",{children:(0,Xr.jsx)("input",{className:"gradebook-semester-input",type:"number",value:p.semester,onChange:e=>f({...p,semester:e.target.value})})}),(0,Xr.jsx)("td",{children:(0,Xr.jsx)("input",{className:"gradebook-type-input",type:"text",value:p.type,onChange:e=>f({...p,type:e.target.value})})}),(0,Xr.jsx)("td",{children:(0,Xr.jsx)("input",{className:"gradebook-grade-input",type:"text",value:p.grade,onChange:e=>f({...p,grade:e.target.value})})}),(0,Xr.jsx)("td",{children:(0,Xr.jsx)("input",{className:"gradebook-date-input",type:"date",value:p.date,onChange:e=>f({...p,date:e.target.value})})}),(0,Xr.jsx)("td",{children:(0,Xr.jsx)("button",{onClick:()=>(async()=>{if(!d)return;const e={studentId:d.studentId,teacher:s._id,subject:m,semester:p.semester,type:p.type,grade:p.grade,date:p.date};try{d._id?await Qr.put(`${r}/api/gradebook/${d._id}`,e,{headers:{Authorization:`Bearer ${i}`}}):await Qr.post(`${r}/api/gradebook/`,e,{headers:{Authorization:`Bearer ${i}`}}),Io.success("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),h(null),f({semester:"",type:"",grade:"",date:""}),g()}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438",t),Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438")}})(e._id),children:"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),(0,Xr.jsx)("td",{children:(0,Xr.jsx)("button",{onClick:()=>h(null),children:"\u041e\u0442\u043c\u0435\u043d\u0430"})})]}):(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("td",{children:(null===o||void 0===o?void 0:o.semester)||"\u2014"}),(0,Xr.jsx)("td",{children:(null===o||void 0===o?void 0:o.type)||"\u2014"}),(0,Xr.jsx)("td",{children:(null===o||void 0===o?void 0:o.grade)||"\u2014"}),(0,Xr.jsx)("td",{children:(null===o||void 0===o||null===(n=o.date)||void 0===n?void 0:n.slice(0,10))||"\u2014"}),(0,Xr.jsx)("td",{children:(0,Xr.jsx)("button",{onClick:()=>((e,t)=>{var n;h(e||{studentId:t}),f({semester:(null===e||void 0===e?void 0:e.semester)||"",type:(null===e||void 0===e?void 0:e.type)||"",grade:(null===e||void 0===e?void 0:e.grade)||"",date:(null===e||void 0===e||null===(n=e.date)||void 0===n?void 0:n.slice(0,10))||""})})(o,e._id),children:"\u270f\ufe0f"})})]})]},e._id)}))})]})]})},Xo=e=>{let{studentId:t,token:n,apiUrl:r}=e;const[i,s]=(0,o.useState)([]);(0,o.useEffect)((()=>{(async()=>{try{const e=await Qr.get(`${r}/api/gradebook/by-student/${t}`,{headers:{Authorization:`Bearer ${n}`}});s(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0437\u0430\u0447\u0435\u0442\u043a\u0438 \u0443\u0447\u0430\u0449\u0435\u0433\u043e\u0441\u044f",e)}})()}),[r,t,n]);const a=e=>{if("\u0417\u0430\u0447\u0451\u0442"===e||"\u0437\u0430\u0447\u0451\u0442"===e)return"grade-pass";if("\u041d\u0435 \u0437\u0430\u0447\u0451\u0442"===e||"\u043d\u0435\u0437\u0430\u0447\u0451\u0442"===e)return"grade-fail";const t=parseInt(e);return 5===t?"grade-5":4===t?"grade-4":3===t?"grade-3":2===t?"grade-2":""};return(0,Xr.jsxs)("div",{className:"student-gradebook-table",children:[(0,Xr.jsx)("h2",{children:"\u0417\u0430\u0447\u0451\u0442\u043a\u0430"}),(0,Xr.jsxs)("table",{className:"gradebook-table",children:[(0,Xr.jsx)("thead",{children:(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("th",{children:"\u2116"}),(0,Xr.jsx)("th",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442"}),(0,Xr.jsx)("th",{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,Xr.jsx)("th",{children:"\u0421\u0435\u043c\u0435\u0441\u0442\u0440"}),(0,Xr.jsx)("th",{children:"\u0422\u0438\u043f"}),(0,Xr.jsx)("th",{children:"\u041e\u0446\u0435\u043d\u043a\u0430"}),(0,Xr.jsx)("th",{children:"\u0414\u0430\u0442\u0430"})]})}),(0,Xr.jsx)("tbody",{children:i.map(((e,t)=>{var n,r,o;return(0,Xr.jsxs)("tr",{children:[(0,Xr.jsx)("td",{children:t+1}),(0,Xr.jsx)("td",{children:(null===(n=e.subject)||void 0===n?void 0:n.name)||"\u2014"}),(0,Xr.jsx)("td",{children:(0,Xr.jsx)(ot,{to:`/profile/${null===(r=e.teacher)||void 0===r?void 0:r._id}`,className:"gradebook-teacher-link",children:(null===(o=e.teacher)||void 0===o?void 0:o.username)||"\u2014"})}),(0,Xr.jsx)("td",{children:e.semester}),(0,Xr.jsx)("td",{children:e.type}),(0,Xr.jsx)("td",{className:a(e.grade),children:e.grade}),(0,Xr.jsx)("td",{children:new Date(e.date).toLocaleDateString()})]},e._id)}))})]})]})},Yo=e=>{let{user:t,token:n,apiUrl:r}=e;const[i,s]=(0,o.useState)([]),[a,l]=(0,o.useState)(null),[c,u]=(0,o.useState)({}),[d,h]=(0,o.useState)(null),[p,f]=(0,o.useState)(""),[m,g]=(0,o.useState)(null),[y,v]=(0,o.useState)([]),[b,w]=(0,o.useState)([]),[x,k]=(0,o.useState)("grades"),[S,C]=(0,o.useState)(""),[E,T]=(0,o.useState)({});(0,o.useEffect)((()=>{"teacher"===t.role?Qr.get(`${r}/api/groups/teacher/${t._id}`,{headers:{Authorization:`Bearer ${n}`}}).then((e=>s(e.data))).catch((e=>console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0433\u0440\u0443\u043f\u043f:",e))):"director"===t.role&&Qr.get(`${r}/api/groups`,{headers:{Authorization:`Bearer ${n}`}}).then((e=>s(e.data))).catch((e=>console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0432\u0441\u0435\u0445 \u0433\u0440\u0443\u043f\u043f:",e)))}),[t,r,n]);const N=async e=>{try{const t=await Qr.get(`${r}/api/groups/${e}/members`,{headers:{Authorization:`Bearer ${n}`}});T((n=>({...n,[e]:t.data})))}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0433\u0440\u0443\u043f\u043f\u044b:",t)}},O=async()=>{try{const[e,t]=await Promise.all([Qr.get(`${r}/api/users?role=student`,{headers:{Authorization:`Bearer ${n}`}}),Qr.get(`${r}/api/users?role=teacher`,{headers:{Authorization:`Bearer ${n}`}})]);v(e.data),w(t.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439:",e)}};return"student"===t.role?(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)(ao,{studentId:t._id,user:t,token:n,apiUrl:r,subjects:c}),(0,Xr.jsx)(Xo,{studentId:t._id,apiUrl:r,token:n})]}):(0,Xr.jsxs)("div",{className:"grades-container",children:[(0,Xr.jsx)("h2",{children:"\u0416\u0443\u0440\u043d\u0430\u043b"}),i.map((e=>{var o;const i=E[e._id]||{students:[],teachers:[]},s=i.teachers.map((e=>e._id));return(0,Xr.jsxs)("div",{className:"group-card",children:[(0,Xr.jsx)("div",{onClick:()=>(async e=>{if(a===e)return l(null),void h(null);l(e),h(null);try{const o=await Qr.get(`${r}/api/subjects/${e}`,{headers:{Authorization:`Bearer ${n}`}});u((t=>({...t,[e]:o.data}))),"director"===t.role&&(N(e),O())}catch(o){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 \u0433\u0440\u0443\u043f\u043f\u044b:",o)}})(e._id),style:{cursor:"pointer",padding:"8px",borderRadius:"5px"},children:e.name}),a===e._id&&(0,Xr.jsxs)("div",{className:"group-members",children:[(0,Xr.jsxs)("div",{className:"group-item",children:[(0,Xr.jsx)("h4",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u044b"}),(0,Xr.jsx)("div",{className:"subject-items",children:null===(o=c[e._id])||void 0===o?void 0:o.map((e=>(0,Xr.jsx)("div",{className:"subject-item",children:(0,Xr.jsxs)("span",{onClick:()=>h(e),style:{cursor:"pointer"},children:["\ud83d\udcda ",e.name]})},e._id)))}),m===e._id?(0,Xr.jsxs)("div",{style:{marginTop:"10px"},children:[(0,Xr.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430",style:{marginBottom:"5px"},className:"subject-name-input"}),(0,Xr.jsxs)("div",{children:[(0,Xr.jsx)("button",{onClick:()=>(async e=>{if(p.trim())try{await Qr.post(`${r}/api/subjects`,{name:p,groupId:e},{headers:{Authorization:`Bearer ${n}`}});const t=await Qr.get(`${r}/api/subjects/${e}`,{headers:{Authorization:`Bearer ${n}`}});u((n=>({...n,[e]:t.data}))),f(""),g(null)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430:",t)}})(e._id),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>g(null),children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]}):(0,Xr.jsx)("button",{onClick:()=>g(e._id),children:"\u2795 \u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u0435\u0434\u043c\u0435\u0442"})]}),"director"===t.role&&(0,Xr.jsxs)("div",{className:"group-item",children:[(0,Xr.jsx)("h4",{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),i.teachers.map((t=>(0,Xr.jsxs)("div",{className:"member-item",children:[(0,Xr.jsx)(ot,{style:{textDecoration:"none",color:"black"},to:`/profile/${t._id}`,children:(0,Xr.jsxs)("span",{children:["\ud83d\udc68\u200d\ud83c\udfeb ",t.username]})},t._id),(0,Xr.jsx)("button",{onClick:()=>(async(e,t,o)=>{try{await Qr.put(`${r}/api/groups/${e}/remove-${o}`,{userId:t},{headers:{Authorization:`Bearer ${n}`}}),N(e)}catch(i){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b:",i)}})(e._id,t._id,"teacher"),children:"\u274c"})]},t._id))),(0,Xr.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Xr.jsxs)("select",{value:S,onChange:e=>C(e.target.value),children:[(0,Xr.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f"}),b.filter((e=>!s.includes(e._id))).map((e=>(0,Xr.jsx)("option",{value:e._id,children:e.username},e._id)))]}),(0,Xr.jsx)("button",{onClick:()=>(async(e,t,o)=>{try{await Qr.put(`${r}/api/groups/${e}/add-${o}`,{userId:t},{headers:{Authorization:`Bearer ${n}`}}),N(e),alert(("student"===o?"\u0423\u0447\u0435\u043d\u0438\u043a":"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c")+" \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")}catch(i){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0433\u0440\u0443\u043f\u043f\u0443:",i)}})(e._id,S,"teacher"),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f"})]})]})]}),d&&a===e._id&&(0,Xr.jsxs)("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Xr.jsx)("button",{onClick:()=>{h(null)},className:"close-grades-btn",children:"\u0421\u043a\u0440\u044b\u0442\u044c \u0436\u0443\u0440\u043d\u0430\u043b"}),(0,Xr.jsxs)("div",{className:"grade-tabs",children:[(0,Xr.jsx)("button",{className:"grades-tab-button "+("grades"===x?"active":""),onClick:()=>k("grades"),children:"\u041e\u0446\u0435\u043d\u043a\u0438"}),(0,Xr.jsx)("button",{className:"gradebook-tab-button "+("gradebook"===x?"active":""),onClick:()=>k("gradebook"),children:"\u0417\u0430\u0447\u0451\u0442\u043a\u0430"})]}),"grades"===x?(0,Xr.jsx)(Go,{subject:d,availableStudents:y,fetchGroupMembers:()=>N(),groupId:e._id,token:n,user:t,apiUrl:r}):(0,Xr.jsx)(Qo,{apiUrl:r,token:n,subject:d,user:t,groupId:e._id})]})]},e._id)}))]})},Zo=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ei=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()};var ti={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ni=(0,o.forwardRef)(((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:c,...u}=e;return(0,o.createElement)("svg",{ref:t,...ti,width:r,height:r,stroke:n,strokeWidth:s?24*Number(i)/Number(r):i,className:ei("lucide",a),...u},[...c.map((e=>{let[t,n]=e;return(0,o.createElement)(t,n)})),...Array.isArray(l)?l:[l]])})),ri=(e,t)=>{const n=(0,o.forwardRef)(((n,r)=>{let{className:i,...s}=n;return(0,o.createElement)(ni,{ref:r,iconNode:t,className:ei(`lucide-${a=Zo(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...s});var a}));return n.displayName=Zo(e),n},oi=ri("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ii=ri("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),si=ri("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),ai=ri("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),li=ri("pencil-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]),ci=e=>{let{isOpen:t,onClose:n,onSubmit:r,targetId:i}=e;const[s,a]=(0,o.useState)("\u041e\u0441\u043a\u043e\u0440\u0431\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435"),[l,c]=(0,o.useState)("");return t?(0,Xr.jsx)("div",{className:"modal-overlay",children:(0,Xr.jsxs)("div",{className:"modal",children:[(0,Xr.jsx)("h2",{className:"rep-modal-header",children:"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),(0,Xr.jsx)("label",{className:"rep-modal-reason-text",children:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0436\u0430\u043b\u043e\u0431\u044b:"}),(0,Xr.jsx)("select",{value:s,onChange:e=>a(e.target.value),className:"rep-modal-reason-select",children:["\u041e\u0441\u043a\u043e\u0440\u0431\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435","\u041d\u0435\u0446\u0435\u043d\u0437\u0443\u0440\u043d\u0430\u044f \u043b\u0435\u043a\u0441\u0438\u043a\u0430","\u0421\u043f\u0430\u043c","\u0414\u0440\u0443\u0433\u043e\u0435"].map((e=>(0,Xr.jsx)("option",{value:e,children:e},e)))}),"\u0414\u0440\u0443\u0433\u043e\u0435"===s&&(0,Xr.jsx)("textarea",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443...",value:l,onChange:e=>c(e.target.value),className:"rep-modal-reason-textarea"}),(0,Xr.jsxs)("div",{className:"rep-modal-buttons",children:[(0,Xr.jsx)("button",{onClick:n,className:"rep-modal-cancel-button",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Xr.jsx)("button",{onClick:()=>{r(i,"\u0414\u0440\u0443\u0433\u043e\u0435"===s?l:s),n()},className:"rep-modal-send-button",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})}):null},ui=e=>{let{apiUrl:t,token:n,targetUserId:r,currentUser:i}=e;const[s,a]=(0,o.useState)([]),[l,c]=(0,o.useState)(""),[u,d]=(0,o.useState)(!0),h=async()=>{try{const e=await Qr.get(`${t}/api/comments/${r}`);Array.isArray(e.data)?a(e.data):a([])}catch(e){console.error("\u041e\u0448\u0431\u0438\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432:",e),a([])}finally{d(!1)}};return(0,o.useEffect)((()=>{h()}),[r]),(0,Xr.jsxs)("div",{className:"comment-section",children:[(0,Xr.jsx)("h3",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),i&&i._id!==r&&(0,Xr.jsxs)("div",{className:"comment-input",children:[(0,Xr.jsx)("textarea",{placeholder:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439...",value:l,onChange:e=>c(e.target.value)}),(0,Xr.jsx)("button",{onClick:async()=>{if(l.trim())try{await Qr.post(`${t}/api/comments`,{targetUser:r,text:l},{headers:{Authorization:`Bearer ${n}`}}),c(""),h()}catch(e){Io("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f"),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f:",e)}},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),u?(0,Xr.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):0===s.length?(0,Xr.jsx)("p",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432 \u043d\u0435\u0442"}):(0,Xr.jsx)("ul",{className:"comments-list",children:s.map((e=>{var t,n,r;return(0,Xr.jsxs)("li",{className:"comment-item",children:[(0,Xr.jsx)(ot,{to:`/profile/${null===(t=e.author)||void 0===t?void 0:t._id}`,children:(0,Xr.jsxs)("span",{className:"comment-author",children:[(0,Xr.jsx)("img",{className:"comments-user-avatar",src:null===(n=e.author)||void 0===n?void 0:n.avatar,alt:"user avatar"}),null===(r=e.author)||void 0===r?void 0:r.username]})}),"-",(0,Xr.jsxs)("span",{className:"comment-text",children:[" ",e.text]})]},e._id)}))})]})};function di(e){this.content=e}di.prototype={constructor:di,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new di(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new di(n)},addToStart:function(e,t){return new di([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new di(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new di(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=di.from(e)).size?new di(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=di.from(e)).size?new di(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=di.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},di.from=function(e){if(e instanceof di)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new di(t)};const hi=di;function pi(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let e=0;o.text[e]==i.text[e];e++)n++;return n}if(o.content.size||i.content.size){let e=pi(o.content,i.content,n+1);if(null!=e)return e}n+=o.nodeSize}else n+=o.nodeSize}}function fi(e,t,n,r){for(let o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};let s=e.child(--o),a=t.child(--i),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let e=fi(s.content,a.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}class mi{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;for(let i=0,s=0;s<t;i++){let a=this.content[i],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,o||null,i)&&a.content.size){let o=s+1;a.nodesBetween(Math.max(0,e-o),Math.min(a.content.size,t-o),n,r+o)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",i=!0;return this.nodesBetween(e,t,((s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?r?"function"===typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(i?i=!1:o+=n),o+=l}),0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new mi(r,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,i=0;i<t;o++){let s=this.content[o],a=i+s.nodeSize;a>e&&((i<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),r+=s.nodeSize),i=a}return new mi(n,r)}cutByIndex(e,t){return e==t?mi.empty:0==e&&t==this.content.length?this:new mi(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new mi(r,o)}addToStart(e){return new mi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new mi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e){return pi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}findDiffEnd(e){return fi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return yi(0,e);if(e==this.size)return yi(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?yi(n+1,o):yi(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return mi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new mi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return mi.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new mi(t||e,n)}static from(e){if(!e)return mi.empty;if(e instanceof mi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new mi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}mi.empty=new mi([],0);const gi={index:0,offset:0};function yi(e,t){return gi.index=e,gi.offset=t,gi}function vi(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!vi(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!vi(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class bi{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&vi(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return bi.none;if(e instanceof bi)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}bi.none=[];class wi extends Error{}class xi{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Si(this.content,e+this.openStart,t);return n&&new xi(n,this.openStart,this.openEnd)}removeBetween(e,t){return new xi(ki(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return xi.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new xi(mi.fromJSON(e,t.content),n,r)}static maxOpen(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new xi(e,n,r)}}function ki(e,t,n){let{index:r,offset:o}=e.findIndex(t),i=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(o==t||i.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(ki(i.content,t-o-1,n-o-1)))}function Si(e,t,n,r){let{index:o,offset:i}=e.findIndex(t),s=e.maybeChild(o);if(i==t||s.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=Si(s.content,t-i-1,n);return a&&e.replaceChild(o,s.copy(a))}function Ci(e,t,n){if(n.openStart>e.depth)throw new wi("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new wi("Inconsistent open depths");return Ei(e,t,n,0)}function Ei(e,t,n,r){let o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){let s=Ei(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:o,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)r=t.node(o).copy(mi.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return Mi(i,Ai(e,o,s,t,r))}{let r=e.parent,o=r.content;return Mi(r,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}}return Mi(i,_i(e,t,r))}function Ti(e,t){if(!t.type.compatibleContent(e.type))throw new wi("Cannot join "+t.type.name+" onto "+e.type.name)}function Ni(e,t,n){let r=e.node(n);return Ti(r,t.node(n)),r}function Oi(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function ji(e,t,n,r){let o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Oi(e.nodeAfter,r),i++));for(let a=i;a<s;a++)Oi(o.child(a),r);t&&t.depth==n&&t.textOffset&&Oi(t.nodeBefore,r)}function Mi(e,t){return e.type.checkContent(t),e.copy(t)}function Ai(e,t,n,r,o){let i=e.depth>o&&Ni(e,t,o+1),s=r.depth>o&&Ni(n,r,o+1),a=[];return ji(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(Ti(i,s),Oi(Mi(i,Ai(e,t,n,r,o+1)),a)):(i&&Oi(Mi(i,_i(e,t,o+1)),a),ji(t,n,o,a),s&&Oi(Mi(s,_i(n,r,o+1)),a)),ji(r,null,o,a),new mi(a)}function _i(e,t,n){let r=[];if(ji(null,e,n,r),e.depth>n){Oi(Mi(Ni(e,t,n+1),_i(e,t,n+1)),r)}return ji(t,null,n,r),new mi(r)}xi.empty=new xi(mi.empty,0,0);class Ri{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let o=0;o<e;o++)r+=n.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return bi.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let o=n.marks;for(var i=0;i<o.length;i++)!1!==o[i].type.spec.inclusive||r&&o[i].isInSet(r.marks)||(o=o[i--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new $i(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let i=e;;){let{index:e,offset:t}=i.content.findIndex(o),s=o-t;if(n.push(i,e,r+t),!s)break;if(i=i.child(e),i.isText)break;o=s-1,r+=t+1}return new Ri(t,n,o)}static resolveCached(e,t){let n=Li.get(e);if(n)for(let o=0;o<n.elts.length;o++){let e=n.elts[o];if(e.pos==t)return e}else Li.set(e,n=new Di);let r=n.elts[n.i]=Ri.resolve(e,t);return n.i=(n.i+1)%Pi,r}}class Di{constructor(){this.elts=[],this.i=0}}const Pi=12,Li=new WeakMap;class $i{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Ii=Object.create(null);class zi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi.none;this.type=e,this.attrs=t,this.marks=r,this.content=n||mi.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&vi(this.attrs,t||e.defaultAttrs||Ii)&&bi.sameSet(this.marks,n||bi.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new zi(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new zi(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return xi.empty;let r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new xi(a,r.depth-i,o.depth-i)}replace(e,t,n){return Ci(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return Ri.resolveCached(this,e)}resolveNoCache(e){return Ri.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Fi(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mi.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=bi.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!bi.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=mi.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}zi.prototype.text=void 0;class Bi extends zi{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Fi(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Bi(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Bi(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Fi(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Vi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new Hi(e,t);if(null==n.next)return Vi.empty;let r=Ui(n);n.next&&n.err("Unexpected trailing text");let o=function(e){let t=Object.create(null);return n(Qi(e,0));function n(r){let o=[];r.forEach((t=>{e[t].forEach((t=>{let n,{term:r,to:i}=t;if(r){for(let e=0;e<o.length;e++)o[e][0]==r&&(n=o[e][1]);Qi(e,i).forEach((e=>{n||o.push([r,n=[]]),-1==n.indexOf(e)&&n.push(e)}))}}))}));let i=t[r.join(",")]=new Vi(r.indexOf(e.length-1)>-1);for(let e=0;e<o.length;e++){let r=o[e][1].sort(Gi);i.next.push({type:o[e][0],next:t[r.join(",")]||n(r)})}return i}}(function(e){let t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((e=>e.to=t))}function i(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(i(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return r(t,s),o(i(e.expr,s),s),[r(s)]}if("plus"==e.type){let s=n();return o(i(e.expr,t),s),o(i(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();o(i(e.expr,s),t),s=t}if(-1==e.max)o(i(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();r(s,t),o(i(e.expr,s),t),s=t}return[r(s)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=i(e.exprs[r],t);if(r==e.exprs.length-1)return s;o(s,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],o=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];i.push(n.name),!o||n.isText||n.hasRequiredAttrs()||(o=!1),-1==r.indexOf(s)&&r.push(s)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(i,s){let a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return mi.from(s.map((e=>e.createAndFill())));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=o(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<o.next.length;e++){let{type:i,next:s}=o.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||r.type&&!s.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}Vi.empty=new Vi(!0);class Hi{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Ui(e){let t=[];do{t.push(Wi(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Wi(e){let t=[];do{t.push(qi(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function qi(e){let t=function(e){if(e.eat("(")){let t=Ui(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let i in n){let e=n[i];e.isInGroup(t)&&o.push(e)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Ji(e,t)}return t}function Ki(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Ji(e,t){let n=Ki(e),r=n;return e.eat(",")&&(r="}"!=e.next?Ki(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Gi(e,t){return t-e}function Qi(e,t){let n=[];return function t(r){let o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(let e=0;e<o.length;e++){let{term:r,to:i}=o[e];r||-1!=n.indexOf(i)||t(i)}}(t),n.sort(Gi)}function Xi(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Yi(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(void 0===o){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=t.default}n[r]=o}return n}function Zi(e,t,n,r){for(let o in t)if(!(o in e))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in e){let n=e[o];n.validate&&n.validate(t[o])}}function es(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new ns(e,r,t[r]);return n}class ts{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=es(e,n.attrs),this.defaultAttrs=Xi(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Vi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Yi(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new zi(this,this.computeAttrs(e),mi.from(t),bi.setFrom(n))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=mi.from(t),this.checkContent(t),new zi(this,this.computeAttrs(e),t,bi.setFrom(n))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),t=mi.from(t),t.size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(mi.empty,!0);return o?new zi(this,e,t.append(o),bi.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Zi(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:bi.none:e}static compile(e,t){let n=Object.create(null);e.forEach(((e,r)=>n[e]=new ts(e,t,r)));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class ns{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let o=null===n?"null":typeof n;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${o}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class rs{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=es(e,r.attrs),this.excluded=null;let o=Xi(this.attrs);this.instance=o?new bi(this,o):null}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new bi(this,Yi(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,o)=>n[e]=new rs(e,r++,t,o))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Zi(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class is{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=hi.from(e.nodes),t.marks=hi.from(e.marks||{}),this.nodes=ts.compile(this.spec.nodes,this),this.marks=rs.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",o=e.spec.marks;if(e.contentMatch=n[t]||(n[t]=Vi.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==o?null:o?ss(this,o.split(" ")):""!=o&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:ss(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ts))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new Bi(n,n.defaultAttrs,e,bi.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return zi.fromJSON(this,e)}markFromJSON(e){return bi.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ss(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(let t in e.marks){let r=e.marks[t];("_"==o||r.spec.group&&r.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class as{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach((e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ps(this,t,!1);return n.addAll(e,bi.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ps(this,t,!0);return n.addAll(e,bi.none,t.from,t.to),xi.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(fs(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let r=this.styles[o],i=r.style;if(!(0!=i.indexOf(e)||r.context&&!n.matchesContext(r.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ms(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ms(e)),e.node||e.ignore||e.mark||(e.node=r)}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new as(e,as.schemaRules(e)))}}const ls={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cs={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},us={ol:!0,ul:!0};function ds(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class hs{constructor(e,t,n,r,o,i){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=i,this.content=[],this.activeMarks=bi.none,this.match=o||(4&i?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(mi.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=mi.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(mi.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ls.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ps{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r,o=t.topNode,i=ds(null,t.preserveWhitespace,0)|(n?4:0);r=o?new hs(o.type,o.attrs,bi.none,!0,t.topMatch||o.type.contentMatch,i):new hs(n?null:e.schema.topNodeType,null,bi.none,!0,null,i),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,o=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===o||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(o)n="full"!==o?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],o=e.previousSibling;(!t||o&&"BR"==o.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,o=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i,s=e.nodeName.toLowerCase();us.hasOwnProperty(s)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&us.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(a?a.ignore:cs.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,r=this.needsBlock;if(ls.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),n=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let i=a&&a.skip?t:this.readStyles(e,t);i&&this.addAll(e,i),n&&this.sync(o),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?i:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let e=this.parser.matchedStyles[r],o=n.getPropertyValue(e);if(o)for(let n;;){let r=this.parser.matchStyle(e,o,this,n);if(!r)break;if(r.ignore)return null;if(t=r.clearMark?t.filter((e=>!r.clearMark(e))):t.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming)break;n=r}}return t}addElementByRule(e,t,n,r){let o,i;if(t.node)if(i=this.parser.schema.nodes[t.node],i.isLeaf)this.insertNode(i.create(t.attrs),n)||this.leafFallback(e,n);else{let e=this.enter(i,t.attrs||null,n,t.preserveWhitespace);e&&(o=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e,n)));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}o&&this.sync(s)&&this.open--}addAll(e,t,n,r){let o=n||0;for(let i=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,t);this.findAtPoint(e,o)}findPlace(e,t){let n,r;for(let o=this.open;o>=0;o--){let t=this.nodes[o],i=t.findWrapping(e);if(i&&(!n||n.length>i.length)&&(n=i,r=t,!i.length))break;if(t.solid)break}if(!n)return null;this.sync(r);for(let o=0;o<n.length;o++)t=this.enterInner(n[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=bi.none;for(let o of n.concat(e.marks))(t.type?t.type.allowsMarkType(o.type):gs(o.type,e.type))&&(r=o.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,n,r){let o=this.findPlace(e.create(t),n);return o&&(o=this.enterInner(e,t,n,!0,r)),o}enterInner(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let s=ds(e,o,i.options);4&i.options&&0==i.content.length&&(s|=4);let a=bi.none;return n=n.filter((t=>!(i.type?i.type.allowsMarkType(t.type):gs(t.type,e))||(a=t.addToSet(a),!1))),this.nodes.push(new hs(e,t,a,r,null,s)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),i=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=o;s--)if(i(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=o?n.node(s-o).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function fs(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function ms(e){let t={};for(let n in e)t[n]=e[n];return t}function gs(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let i=[],s=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:o}=e.edge(n);if(r==t)return!0;if(i.indexOf(o)<0&&s(o))return!0}};if(s(o.contentMatch))return!0}}class ys{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=bs(t).createDocumentFragment());let r=n,o=[];return e.forEach((e=>{if(o.length||e.marks.length){let n=0,i=0;for(;n<o.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(o[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}for(;n<o.length;)r=o.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],s=this.serializeMark(n,e.isInline,t);s&&(o.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=ks(bs(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&ks(bs(n),r(e,t),null,e.attrs)}static renderSpec(e,t){return ks(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ys(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=vs(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return vs(e.marks)}}function vs(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function bs(e){return e.document||window.document}const ws=new WeakMap;function xs(e){let t=ws.get(e);return void 0===t&&ws.set(e,t=function(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}(e)),t}function ks(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let o,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=xs(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let l=n?e.createElementNS(n,i):e.createElement(i),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):l.setAttribute(e,c[e])}}for(let d=u;d<t.length;d++){let o=t[d];if(0===o){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:i}=ks(e,o,n,r);if(l.appendChild(t),i){if(s)throw new RangeError("Multiple content holes");s=i}}}return{dom:l,contentDOM:s}}const Ss=Math.pow(2,16);function Cs(e,t){return e+t*Ss}function Es(e){return 65535&e}class Ts{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Ns{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ranges=e,this.inverted=t,!e.length&&Ns.empty)return Ns.empty}recover(e){let t=0,n=Es(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Ss}(e)}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,n){let r=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+o],c=this.ranges[s+i],u=a+l;if(e<=u){let o=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return o;let i=e==(t<0?a:u)?null:Cs(s/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new Ts(o,d,i)}r+=c-l}return n?e+r:new Ts(e+r,0,null)}touches(e,t){let n=0,r=Es(t),o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[s+o];if(e<=t+a&&s==3*r)return!0;n+=this.ranges[s+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),o+=c-l}}invert(){return new Ns(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?Ns.empty:new Ns(e<0?[0,-e,0]:[0,0,e])}}Ns.empty=new Ns([]);class Os{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e?e.length:0;this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new Os(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new Os;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let o=this.from;o<this.to;o++){let n=this._maps[o].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(o);if(null!=t&&t>o&&t<this.to){o=t,e=this._maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new Ts(e,r,null)}}const js=Object.create(null);class Ms{getMap(){return Ns.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=js[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in js)throw new RangeError("Duplicate use of step JSON ID "+e);return js[e]=t,t.prototype.jsonID=e,t}}class As{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new As(e,null)}static fail(e){return new As(null,e)}static fromReplace(e,t,n,r){try{return As.ok(e.replace(t,n,r))}catch(wb){if(wb instanceof wi)return As.fail(wb.message);throw wb}}}function _s(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(_s(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return mi.fromArray(r)}class Rs extends Ms{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new xi(_s(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),r),t.openStart,t.openEnd);return As.fromReplace(e,this.from,this.to,o)}invert(){return new Ds(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Rs(t.pos,n.pos,this.mark)}merge(e){return e instanceof Rs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Rs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Rs(t.from,t.to,e.markFromJSON(t.mark))}}Ms.jsonID("addMark",Rs);class Ds extends Ms{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new xi(_s(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return As.fromReplace(e,this.from,this.to,n)}invert(){return new Rs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Ds(t.pos,n.pos,this.mark)}merge(e){return e instanceof Ds&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ds(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ds(t.from,t.to,e.markFromJSON(t.mark))}}Ms.jsonID("removeMark",Ds);class Ps extends Ms{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return As.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return As.fromReplace(e,this.pos,this.pos+1,new xi(mi.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new Ps(this.pos,t.marks[n]);return new Ps(this.pos,this.mark)}}return new Ls(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ps(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ps(t.pos,e.markFromJSON(t.mark))}}Ms.jsonID("addNodeMark",Ps);class Ls extends Ms{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return As.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return As.fromReplace(e,this.pos,this.pos+1,new xi(mi.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new Ps(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ls(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ls(t.pos,e.markFromJSON(t.mark))}}Ms.jsonID("removeNodeMark",Ls);class $s extends Ms{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&zs(e,this.from,this.to)?As.fail("Structure replace would overwrite content"):As.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ns([this.from,this.to-this.from,this.slice.size])}invert(e){return new $s(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new $s(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof $s)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?xi.empty:new xi(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new $s(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?xi.empty:new xi(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new $s(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new $s(t.from,t.to,xi.fromJSON(e,t.slice),!!t.structure)}}Ms.jsonID("replace",$s);class Is extends Ms{constructor(e,t,n,r,o,i){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=s}apply(e){if(this.structure&&(zs(e,this.from,this.gapFrom)||zs(e,this.gapTo,this.to)))return As.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return As.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?As.fromReplace(e,this.from,this.to,n):As.fail("Content does not fit in gap")}getMap(){return new Ns([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Is(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new Is(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Is(t.from,t.to,t.gapFrom,t.gapTo,xi.fromJSON(e,t.slice),t.insert,!!t.structure)}}function zs(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,o--}}return!1}function Bs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.doc.nodeAt(t),s=[],a=t+1;for(let l=0;l<i.childCount;l++){let t=i.child(l),c=a+t.nodeSize,u=r.matchType(t.type);if(u){r=u;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new Ds(a,c,t.marks[r]));if(o&&t.isText&&"pre"!=n.whitespace){let e,r,o=/\r?\n|\r/g;for(;e=o.exec(t.text);)r||(r=new xi(mi.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),s.push(new $s(a+e.index,a+e.index+e[0].length,r))}}else s.push(new $s(a,c,xi.empty));a=c}if(!r.validEnd){let t=r.fillBefore(mi.empty,!0);e.replace(a,a,new xi(t,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function Fs(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Vs(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!Fs(r,o,i))break}return null}function Hs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}(e,t),i=o&&function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?s:null}(r,t);return i?o.map(Us).concat({type:t,attrs:n}).concat(i.map(Us)):null}function Us(e){return{type:e,attrs:null}}function Ws(e,t,n,r){t.forEach(((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let o=e.mapping.slice(r).map(n+1+i+s.index);e.replaceWith(o,o+1,t.type.schema.linebreakReplacement.create())}}}))}function qs(e,t,n,r){t.forEach(((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+i);e.replaceWith(o,o+1,t.type.schema.text("\n"))}}))}function Ks(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let e=o.node(c),t=o.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=r&&r[u+1];i&&(n=n.replaceChild(0,i.type.create(i.attrs)));let s=r&&r[u]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(n))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function Js(e,t){let n=e.resolve(t),r=n.index();return Gs(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Gs(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let o=0;o<t.childCount;o++){let i=t.child(o),s=i.type==r?e.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n)return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function Qs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t);for(let o=r.depth;;o--){let e,i,s=r.index(o);if(o==r.depth?(e=r.nodeBefore,i=r.nodeAfter):n>0?(e=r.node(o+1),s++,i=r.node(o).maybeChild(s)):(e=r.node(o).maybeChild(s-1),i=r.node(o+1)),e&&!e.isTextblock&&Gs(e,i)&&r.node(o).canReplace(s,s+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function Xs(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),s=r.node(e),a=!1;if(1==i)a=s.canReplace(n,n,o);else{let e=s.contentMatchAt(n).findWrapping(o.firstChild.type);a=e&&s.canReplaceWith(n,n,e[0])}if(a)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function Ys(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xi.empty;if(t==n&&!r.size)return null;let o=e.resolve(t),i=e.resolve(n);return Zs(o,i,r)?new $s(t,n,r):new ea(o,i,r).fit()}function Zs(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Ms.jsonID("replaceAround",Is);class ea{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=mi.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=mi.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let o=this.placed,i=n.depth,s=r.depth;for(;i&&s&&1==o.childCount;)o=o.firstChild.content,i--,s--;let a=new xi(o,i,s);return e>-1?new Is(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new $s(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=ra(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let o=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:s,match:a}=this.frontier[i],l=null;if(1==t&&(o?a.matchType(o.type)||(l=a.fillBefore(mi.from(o),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:i,parent:r,inject:l};if(2==t&&o&&(e=a.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:i,parent:r,wrap:e};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=ra(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new xi(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=ra(e,t);if(r.childCount<=1&&t>0){let o=e.size-t<=t+r.size;this.unplaced=new xi(ta(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new xi(ta(e,t,1),t,n)}placeNodes(e){let{sliceDepth:t,frontierDepth:n,parent:r,inject:o,wrap:i}=e;for(;this.depth>n;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,c=0,u=[],{match:d,type:h}=this.frontier[n];if(o){for(let e=0;e<o.childCount;e++)u.push(o.child(e));d=d.matchFragment(o)}let p=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let e=a.child(c),t=d.matchType(e.type);if(!t)break;c++,(c>1||0==l||e.content.size)&&(d=t,u.push(oa(e.mark(h.allowedMarks(e.marks)),1==c?l:0,c==a.childCount?p:-1)))}let f=c==a.childCount;f||(p=-1),this.placed=na(this.placed,n,mi.from(u)),this.frontier[n].match=d,f&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<p;m++){let e=g.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),g=e.content}this.unplaced=f?0==t?xi.empty:new xi(ta(s.content,t-1,1),t-1,p<0?s.openEnd:t-1):new xi(ta(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ia(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=ia(e,t,r,n,o);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],o=ia(e,n,r,t,!0);if(!o||o.childCount)continue e}return{depth:t,fit:i,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=na(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=na(this.placed,this.depth,mi.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(mi.empty,!0);e.childCount&&(this.placed=na(this.placed,this.frontier.length,e))}}function ta(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(ta(e.firstChild.content,t-1,n)))}function na(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(na(e.lastChild.content,t-1,n)))}function ra(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function oa(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,oa(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(mi.empty,!0)))),e.copy(r)}function ia(e,t,n,r,o){let i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function sa(e,t,n,r,o){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(sa(o.content,t+1,n,r,o)))}if(t>r){let t=o.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(mi.empty,!0))}return e}function aa(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}class la extends Ms{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return As.fail("No node at attribute step's position");let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return As.fromReplace(e,this.pos,this.pos+1,new xi(mi.from(r),0,t.isLeaf?0:1))}getMap(){return Ns.empty}invert(e){return new la(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new la(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new la(t.pos,t.attr,t.value)}}Ms.jsonID("attr",la);class ca extends Ms{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return As.ok(n)}getMap(){return Ns.empty}invert(e){return new ca(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ca(t.attr,t.value)}}Ms.jsonID("docAttr",ca);let ua=class extends Error{};ua=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(ua.prototype=Object.create(Error.prototype)).constructor=ua,ua.prototype.name="TransformError";class da{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Os}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new ua(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xi.empty,r=Ys(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new xi(mi.from(n),0,0))}delete(e,t){return this.replace(e,t,xi.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),i=e.doc.resolve(n);if(Zs(o,i,r))return e.step(new $s(t,n,r));let s=aa(o,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let p=o.depth,f=o.pos-1;p>0;p--,f--){let e=o.node(p).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;s.indexOf(p)>-1?a=p:o.before(p)==f&&s.splice(1,0,-p)}let l=s.indexOf(a),c=[],u=r.openStart;for(let p=r.content,f=0;;f++){let e=p.firstChild;if(c.push(e),f==r.openStart)break;p=e.content}for(let p=u-1;p>=0;p--){let e=c[p],t=(d=e.type).spec.defining||d.spec.definingForContent;if(t&&!e.sameMarkup(o.node(Math.abs(a)-1)))u=p;else if(t||!e.type.isTextblock)break}var d;for(let p=r.openStart;p>=0;p--){let t=(p+u+1)%(r.openStart+1),a=c[t];if(a)for(let c=0;c<s.length;c++){let u=s[(c+l)%s.length],d=!0;u<0&&(d=!1,u=-u);let h=o.node(u-1),p=o.index(u-1);if(h.canReplaceWith(p,p,a.type,a.marks))return e.replace(o.before(u),d?i.after(u):n,new xi(sa(r.content,0,r.openStart,t),t,r.openEnd))}}let h=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>h));p--){let e=s[p];e<0||(t=o.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let o=r.depth-1;o>=0;o--){let e=r.index(o);if(r.node(o).canReplaceWith(e,e,n))return r.before(o+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let e=r.indexAfter(o);if(r.node(o).canReplaceWith(e,e,n))return r.after(o+1);if(e<r.node(o).childCount)return null}return null}(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new xi(mi.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=aa(r,o);for(let s=0;s<i.length;s++){let t=i[s],n=s==i.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),o.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),o.indexAfter(t-1))))return e.delete(r.before(t),o.after(t))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return e.delete(r.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:o,depth:i}=t,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=mi.empty,d=0;for(let f=i,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,u=mi.from(r.node(f).copy(u)),d++):l--;let h=mi.empty,p=0;for(let f=i,m=!1;f>n;f--)m||o.after(f+1)<o.end(f)?(m=!0,h=mi.from(o.node(f).copy(h)),p++):c++;e.step(new Is(l,c,s,a,new xi(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e){return function(e,t,n){let r=null,{linebreakReplacement:o}=e.doc.type.schema,i=e.doc.resolve(t-n),s=i.node().type;if(o&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(o);e&&!t?r=!1:!e&&t&&(r=!0)}let a=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);qs(e,r.node(),r.before(),a)}s.inlineContent&&Bs(e,t+n-1,s,i.node().contentMatchAt(i.index()),null==r);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new $s(c,l.map(t+n,-1),xi.empty,!0)),!0===r){let t=e.doc.resolve(c);Ws(e,t.node(),t.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}wrap(e,t){return function(e,t,n){let r=mi.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let e=n[s].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=mi.from(n[s].type.create(n[s].attrs,r))}let o=t.start,i=t.end;e.step(new Is(o,i,o,i,new xi(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e){return function(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{let s="function"==typeof o?o(t):o;if(t.isTextblock&&!t.hasMarkup(r,s)&&function(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){let o=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?o=!1:!e&&t&&(o=!0)}!1===o&&qs(e,t,n,i),Bs(e,e.mapping.slice(i).map(n,1),r,void 0,null===o);let a=e.mapping.slice(i),l=a.map(n,1),c=a.map(n+t.nodeSize,1);return e.step(new Is(l,c,l+1,c-1,new xi(mi.from(r.create(s,null,t.marks)),0,0),1,!0)),!0===o&&Ws(e,t,n,i),!1}}))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}setNodeMarkup(e,t){return function(e,t,n,r,o){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Is(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new xi(mi.from(s),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}setNodeAttribute(e,t,n){return this.step(new la(e,t,n)),this}setDocAttribute(e,t){return this.step(new ca(e,t)),this}addNodeMark(e,t){return this.step(new Ps(e,t)),this}removeNodeMark(e,t){if(!(t instanceof bi)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new Ls(e,t)),this}split(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.doc.resolve(t),i=mi.empty,s=mi.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=mi.from(o.node(a).copy(i));let e=r&&r[c];s=mi.from(e?e.type.create(e.attrs,s):o.node(a).copy(s))}e.step(new $s(t,t,new xi(i.append(s),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}addMark(e,t,n){return function(e,t,n,r){let o,i,s=[],a=[];e.doc.nodesBetween(t,n,((e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(o&&o.to==c&&o.mark.eq(u[e])?o.to=d:s.push(o=new Ds(c,d,u[e])));i&&i.to==c?i.to=d:a.push(i=new Rs(c,d,r))}})),s.forEach((t=>e.step(t))),a.forEach((t=>e.step(t)))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let o=[],i=0;e.doc.nodesBetween(t,n,((e,s)=>{if(!e.isInline)return;i++;let a=null;if(r instanceof rs){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(s+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<o.length;e++){let t=o[e];t.step==i-1&&l.eq(o[e].style)&&(n=t)}n?(n.to=r,n.step=i):o.push({style:l,from:Math.max(s,t),to:r,step:i})}}})),o.forEach((t=>e.step(new Ds(t.from,t.to,t.style))))}(this,e,t,n),this}clearIncompatible(e,t,n){return Bs(this,e,t,n),this}}const ha=Object.create(null);class pa{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new fa(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xi.empty,n=t.content.lastChild,r=null;for(let s=0;s<t.openEnd;s++)r=n,n=n.lastChild;let o=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:l}=i[s],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(l.pos),s?xi.empty:t),0==s&&Ca(e,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:s}=r[o],a=e.mapping.slice(n),l=a.map(i.pos),c=a.map(s.pos);o?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),Ca(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new ya(e):Sa(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let o=e.depth-1;o>=0;o--){let r=t<0?Sa(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):Sa(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(r)return r}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new xa(e.node(0))}static atStart(e){return Sa(e,e,0,0,1)||new xa(e)}static atEnd(e){return Sa(e,e,e.content.size,e.childCount,-1)||new xa(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=ha[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in ha)throw new RangeError("Duplicate use of selection JSON ID "+e);return ha[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ya.between(this.$anchor,this.$head).getBookmark()}}pa.prototype.visible=!0;class fa{constructor(e,t){this.$from=e,this.$to=t}}let ma=!1;function ga(e){ma||e.parent.inlineContent||(ma=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class ya extends pa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;ga(e),ga(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return pa.near(n);let r=e.resolve(t.map(this.anchor));return new ya(r.parent.inlineContent?r:n,n)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xi.empty;if(super.replace(e,t),t==xi.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof ya&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new va(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new ya(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=pa.findFrom(t,n,!0)||pa.findFrom(t,-n,!0);if(!e)return pa.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(pa.findFrom(e,-n,!0)||pa.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new ya(e,t)}}pa.jsonID("text",ya);class va{constructor(e,t){this.anchor=e,this.head=t}map(e){return new va(e.map(this.anchor),e.map(this.head))}resolve(e){return ya.between(e.resolve(this.anchor),e.resolve(this.head))}}class ba extends pa{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?pa.near(o):new ba(o)}content(){return new xi(mi.from(this.node),0,0)}eq(e){return e instanceof ba&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wa(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ba(e.resolve(t.anchor))}static create(e,t){return new ba(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}ba.prototype.visible=!1,pa.jsonID("node",ba);class wa{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new va(n,n):new wa(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&ba.isSelectable(n)?new ba(t):pa.near(t)}}class xa extends pa{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xi.empty;if(t==xi.empty){e.delete(0,e.doc.content.size);let t=pa.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new xa(e)}map(e){return new xa(e)}eq(e){return e instanceof xa}getBookmark(){return ka}}pa.jsonID("all",xa);const ka={map(){return this},resolve:e=>new xa(e)};function Sa(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return ya.create(e,n);for(let s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let r=t.child(s);if(r.isAtom){if(!i&&ba.isSelectable(r))return ba.create(e,n-(o<0?r.nodeSize:0))}else{let t=Sa(e,r,n+o,o<0?r.childCount:0,o,i);if(t)return t}n+=r.nodeSize*o}return null}function Ca(e,t,n){let r=e.steps.length-1;if(r<t)return;let o,i=e.steps[r];(i instanceof $s||i instanceof Is)&&(e.mapping.maps[r].forEach(((e,t,n,r)=>{null==o&&(o=r)})),e.setSelection(pa.near(e.doc.resolve(o),n)))}class Ea extends da{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return bi.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||bi.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let o=this.storedMarks;if(!o){let e=this.doc.resolve(t);o=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(pa.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function Ta(e,t){return t&&e?e.bind(t):e}class Na{constructor(e,t,n){this.name=e,this.init=Ta(t.init,n),this.apply=Ta(t.apply,n)}}const Oa=[new Na("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new Na("selection",{init:(e,t)=>e.selection||pa.atStart(t.doc),apply:e=>e.selection}),new Na("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new Na("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class ja{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Oa.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new Na(e.key,e.spec.state,e))}))}}class Ma{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let s=this.config.plugins[i];if(s.spec.appendTransaction){let a=r?r[i].n:0,l=r?r[i].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ma(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new Ea(this)}static create(e){let t=new ja(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Ma(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new ja(this.schema,e.plugins),n=t.fields,r=new Ma(t);for(let o=0;o<n.length;o++){let t=n[o].name;r[t]=this.hasOwnProperty(t)?this[t]:n[o].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new ja(e.schema,e.plugins),o=new Ma(r);return r.fields.forEach((r=>{if("doc"==r.name)o.doc=zi.fromJSON(e.schema,t.doc);else if("selection"==r.name)o.selection=pa.fromJSON(o.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let i in n){let s=n[i],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(o[r.name]=a.fromJSON.call(s,e,t[i],o))}o[r.name]=r.init(e,o)}})),o}}function Aa(e,t,n){for(let r in e){let o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=Aa(o,t,{})),n[r]=o}return n}class _a{constructor(e){this.spec=e,this.props={},e.props&&Aa(e.props,this,this.props),this.key=e.key?e.key.key:Da("plugin")}getState(e){return e[this.key]}}const Ra=Object.create(null);function Da(e){return e in Ra?e+"$"+ ++Ra[e]:(Ra[e]=0,e+"$")}class Pa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";this.key=Da(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const La=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},$a=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let Ia=null;const za=function(e,t,n){let r=Ia||(Ia=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},Ba=function(e,t,n,r){return n&&(Va(e,t,n,r,-1)||Va(e,t,n,r,1))},Fa=/^(img|br|input|textarea|hr)$/i;function Va(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:Ha(e))){let n=e.parentNode;if(!n||1!=n.nodeType||Ua(e)||Fa.test(e.nodeName)||"false"==e.contentEditable)return!1;t=La(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?Ha(e):0}}}function Ha(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ua(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Wa=function(e){return e.focusNode&&Ba(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function qa(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const Ka="undefined"!=typeof navigator?navigator:null,Ja="undefined"!=typeof document?document:null,Ga=Ka&&Ka.userAgent||"",Qa=/Edge\/(\d+)/.exec(Ga),Xa=/MSIE \d/.exec(Ga),Ya=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ga),Za=!!(Xa||Ya||Qa),el=Xa?document.documentMode:Ya?+Ya[1]:Qa?+Qa[1]:0,tl=!Za&&/gecko\/(\d+)/i.test(Ga);tl&&(/Firefox\/(\d+)/.exec(Ga)||[0,0])[1];const nl=!Za&&/Chrome\/(\d+)/.exec(Ga),rl=!!nl,ol=nl?+nl[1]:0,il=!Za&&!!Ka&&/Apple Computer/.test(Ka.vendor),sl=il&&(/Mobile\/\w+/.test(Ga)||!!Ka&&Ka.maxTouchPoints>2),al=sl||!!Ka&&/Mac/.test(Ka.platform),ll=!!Ka&&/Win/.test(Ka.platform),cl=/Android \d/.test(Ga),ul=!!Ja&&"webkitFontSmoothing"in Ja.documentElement.style,dl=ul?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function hl(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function pl(e,t){return"number"==typeof e?e:e[t]}function fl(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function ml(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(1!=s.nodeType){s=$a(s);continue}let e=s,n=e==i.body,a=n?hl(i):fl(e),l=0,c=0;if(t.top<a.top+pl(r,"top")?c=-(a.top-t.top+pl(o,"top")):t.bottom>a.bottom-pl(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+pl(o,"top")-a.top:t.bottom-a.bottom+pl(o,"bottom")),t.left<a.left+pl(r,"left")?l=-(a.left-t.left+pl(o,"left")):t.right>a.right-pl(r,"right")&&(l=t.right-a.right+pl(o,"right")),l||c)if(n)i.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let o=e.scrollLeft-n,i=e.scrollTop-r;t={left:t.left-o,top:t.top-i,right:t.right-o,bottom:t.bottom-i}}let u=n?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(u))break;s="absolute"==u?s.offsetParent:$a(s)}}function gl(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=$a(r));return t}function yl(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:i}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let vl=null;function bl(e,t){let n,r,o,i,s=2e8,a=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=za(u).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<s){n=u,s=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(a=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!o&&p.left<=t.left&&p.right>=t.left&&(o=u,i={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=d+1)}}return!n&&o&&(n=o,r=i,s=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let n=Cl(r,1);if(n.top!=n.bottom&&wl(t,n))return{node:e,offset:o+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||s&&1==n.nodeType?{node:e,offset:a}:bl(n,r)}function wl(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function xl(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let n=e.childNodes[i];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let o=e[r];if(wl(t,o))return xl(n,t,o)}}if((i=(i+1)%r)==o)break}return e}function kl(e,t){let n,r=e.dom.ownerDocument,o=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Ha(r.offsetNode),r.offset)}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Ha(r.startContainer),r.startOffset)}}}(r,t.left,t.top);i&&({node:n,offset:o}=i);let s,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=e.dom.getBoundingClientRect();if(!wl(t,n))return null;if(a=xl(e.dom,t,n),!a)return null}if(il)for(let c=a;n&&c;c=$a(c))c.draggable&&(n=void 0);if(a=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(a,t),n){if(tl&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length),o<n.childNodes.length)){let e,r=n.childNodes[o];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&o++}let r;ul&&o&&1==n.nodeType&&1==(r=n.childNodes[o-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&o--,n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(s=function(e,t,n,r){let o=-1;for(let i=t,s=!1;i!=e.dom;){let t,n=e.docView.nearestDesc(i,!0);if(!n)return null;if(1==n.dom.nodeType&&(n.node.isBlock&&n.parent||!n.contentDOM)&&((t=n.dom.getBoundingClientRect()).width||t.height)&&(n.node.isBlock&&n.parent&&(!s&&t.left>r.left||t.top>r.top?o=n.posBefore:(!s&&t.right<r.left||t.bottom<r.top)&&(o=n.posAfter),s=!0),!n.contentDOM&&o<0&&!n.node.isText))return(n.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2)?n.posBefore:n.posAfter;i=n.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==s&&(s=function(e,t,n){let{node:r,offset:o}=bl(t,n),i=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,o,i)}(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function Sl(e){return e.top<e.bottom||e.left<e.right}function Cl(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(Sl(e))return e}return Array.prototype.find.call(n,Sl)||e.getBoundingClientRect()}const El=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Tl(e,t,n){let{node:r,offset:o,atom:i}=e.docView.domFromPos(t,n<0?-1:1),s=ul||tl;if(3==r.nodeType){if(!s||!El.test(r.nodeValue)&&(n<0?o:o!=r.nodeValue.length)){let e=o,t=o,i=n<0?1:-1;return n<0&&!o?(t++,i=-1):n>=0&&o==r.nodeValue.length?(e--,i=1):n<0?e--:t++,Nl(Cl(za(r,e,t),i),i<0)}{let e=Cl(za(r,o,o),n);if(tl&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let t=Cl(za(r,o-1,o-1),-1);if(t.top==e.top){let n=Cl(za(r,o,o+1),-1);if(n.top!=e.top)return Nl(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&o&&(n<0||o==Ha(r))){let e=r.childNodes[o-1];if(1==e.nodeType)return Ol(e.getBoundingClientRect(),!1)}if(null==i&&o<Ha(r)){let e=r.childNodes[o];if(1==e.nodeType)return Ol(e.getBoundingClientRect(),!0)}return Ol(r.getBoundingClientRect(),n>=0)}if(null==i&&o&&(n<0||o==Ha(r))){let e=r.childNodes[o-1],t=3==e.nodeType?za(e,Ha(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return Nl(Cl(t,1),!1)}if(null==i&&o<Ha(r)){let e=r.childNodes[o];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?za(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return Nl(Cl(t,-1),!0)}return Nl(Cl(3==r.nodeType?za(r):r,-n),n>=0)}function Nl(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Ol(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function jl(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}const Ml=/[\u0590-\u08ac]/;let Al=null,_l=null,Rl=!1;function Dl(e,t,n){return Al==t&&_l==n?Rl:(Al=t,_l=n,Rl="up"==n||"down"==n?function(e,t,n){let r=t.selection,o="up"==n?r.$from:r.$to;return jl(e,t,(()=>{let{node:t}=e.docView.domFromPos(o.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=Tl(e,o.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=za(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let o=t[e];if(o.bottom>o.top+1&&("up"==n?r.top-o.top>2*(o.bottom-r.top):o.bottom-r.bottom>2*(r.bottom-o.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=e.domSelection();return a?Ml.test(r.parent.textContent)&&a.modify?jl(e,t,(()=>{let{focusNode:t,focusOffset:o,anchorNode:i,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&o==d;try{a.collapse(i,s),t&&(t!=i||o!=s)&&a.extend&&a.extend(t,o)}catch(p){}return null!=l&&(a.caretBidiLevel=l),h})):"left"==n||"backward"==n?i:s:r.pos==r.start()||r.pos==r.end()}(e,t,n))}class Pl{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>La(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,r=e;r;r=r.parentNode){let o,i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<o)return r.descAt(e-n-r.border);n=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let o=0;n<this.children.length;n++){let t=this.children[n],i=o+t.size;if(i>e||t instanceof Vl){r=e-o;break}o=i}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let o;n&&!(o=this.children[n-1]).size&&o instanceof Ll&&o.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?La(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?La(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let i=n,s=0;;s++){let n=this.children[s],a=i+n.size;if(-1==r&&e<=a){let o=i+n.border;if(e>=o&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,o);e=i;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=La(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){o=La(n.dom);break}t+=n.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),i=Math.max(e,t);for(let p=0,f=0;p<this.children.length;p++){let s=this.children[p],a=f+s.size;if(o>f&&i<a)return s.setSelection(e-f-s.border,t-f-s.border,n,r);f=a}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((tl||il)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(u=!(!t||"\n"!=e.nodeValue[t-1]),u&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:La(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(tl&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&il)&&Ba(s.node,s.offset,c.anchorNode,c.anchorOffset)&&Ba(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&!u){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(h){}}if(!d){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let r=n+o.border,s=i-o.border;if(e>=r&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=r||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-r,t-r):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Ll extends Pl{constructor(e,t,n,r){let o,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,(()=>o?o.parent?o.parent.posBeforeChild(o):void 0:r))),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class $l extends Pl{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class Il extends Pl{constructor(e,t,n,r,o){super(e,[],n,r),this.mark=t,this.spec=o}static create(e,t,n,r){let o=r.nodeViews[t.type.name],i=o&&o(t,r,n);return i&&i.dom||(i=ys.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new Il(e,t,i.dom,i.contentDOM||i.dom,i)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=Il.create(this.parent,this.mark,!0,n),o=this.children,i=this.size;t<i&&(o=tc(o,t,i,n)),e>0&&(o=tc(o,0,e,n));for(let s=0;s<o.length;s++)o[s].parent=r;return r.children=o,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class zl extends Pl{constructor(e,t,n,r,o,i,s,a,l){super(e,[],o,i),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,o,i){let s,a=o.nodeViews[t.type.name],l=a&&a(t,o,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:i),n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=ys.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Ql(c,n,t),l?s=new Hl(e,t,n,r,c,u||null,d,l,o,i+1):t.isText?new Fl(e,t,n,r,c,d,o):new zl(e,t,n,r,c,u||null,d,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>mi.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Xl(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,o=e.composing?this.localCompositionInfo(e,t):null,i=o&&o.pos>-1?o:null,s=o&&o.pos<0,a=new Zl(this,i&&i.node,e);!function(e,t,n,r){let o=t.locals(e),i=0;if(0==o.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,o,t.forChild(i,s),n),i+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d,h,p;for(;s<o.length&&o[s].to==i;){let e=o[s++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(ec);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=i&&a.splice(e--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let f=i+h.nodeSize;if(h.isText){let e=f;s<o.length&&o[s].from<e&&(e=o[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-i),h=h.cut(0,e-i),f=e,p=-1)}else for(;s<o.length&&o[s].to<f;)s++;r(h,h.isInline&&!h.isLeaf?a.filter((e=>!e.inline)):a.slice(),t.forChild(i,h),p),i=f}}(this.node,this.innerDeco,((t,o,i)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&a.syncToMarks(o==this.node.childCount?bi.none:this.node.child(o).marks,n,e),a.placeWidget(t,e,r)}),((t,i,l,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,i,l,c)||s&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(t,i,l,u,e)||a.updateNextNode(t,i,l,e,c,r)||a.addNode(t,i,l,e,r),r+=t.nodeSize})),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),Ul(this.contentDOM,this.children,e),sl&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof ya)||n<t||r>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let e=o.nodeValue,i=function(e,t,n,r){for(let o=0,i=0;o<e.childCount&&i<=r;){let s=e.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<e.childCount;){let t=e.child(o++);if(i+=t.nodeSize,!t.isText)break;l+=t.text}if(i>=n){if(i>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return i<0?null:{node:o,pos:i,text:e}}return{node:o,pos:-1,text:""}}protectLocalComposition(e,t){let{node:n,pos:r,text:o}=t;if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new $l(this,i,n,o);e.input.compositionNodes.push(s),this.children=tc(this.children,r,r+o.length,e,s)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(Xl(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Jl(this.dom,this.nodeDOM,Kl(this.outerDeco,this.node,t),Kl(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Bl(e,t,n,r,o){Ql(r,t,e);let i=new zl(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class Fl extends zl{constructor(e,t,n,r,o,i,s){super(e,t,n,r,o,null,i,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),o=document.createTextNode(r.text);return new Fl(this.parent,r,this.outerDeco,this.innerDeco,o,o,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Vl extends Pl{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Hl extends zl{constructor(e,t,n,r,o,i,s,a,l,c){super(e,t,n,r,o,i,s,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Ul(e,t,n){let r=e.firstChild,o=!1;for(let i=0;i<t.length;i++){let s=t[i],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=Yl(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(s instanceof Il){let t=r?r.previousSibling:e.lastChild;Ul(s.contentDOM,s.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=Yl(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const Wl=function(e){e&&(this.nodeName=e)};Wl.prototype=Object.create(null);const ql=[new Wl];function Kl(e,t,n){if(0==e.length)return ql;let r=n?ql[0]:new Wl,o=[r];for(let i=0;i<e.length;i++){let s=e[i].type.attrs;if(s){s.nodeName&&o.push(r=new Wl(s.nodeName));for(let e in s){let i=s[e];null!=i&&(n&&1==o.length&&o.push(r=new Wl(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+i:"style"==e?r.style=(r.style?r.style+";":"")+i:"nodeName"!=e&&(r[e]=i))}}}return o}function Jl(e,t,n,r){if(n==ql&&r==ql)return t;let o=t;for(let i=0;i<r.length;i++){let t=r[i],s=n[i];if(i){let n;s&&s.nodeName==t.nodeName&&o!=e&&(n=o.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(o),s=ql[0]),o=n}Gl(o,s||ql[0],t)}return o}function Gl(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==o.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<o.length;t++)-1==r.indexOf(o[t])&&e.classList.add(o[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function Ql(e,t,n){return Jl(e,e,ql,Kl(t,n,1!=e.nodeType))}function Xl(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Yl(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Zl{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof Il)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,o=this.stack.length>>1,i=Math.min(o,e.length);for(;r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[o])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=Il.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,n,r){let o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,o){let i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,o,i){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof zl){let l=this.preMatch.matched.get(a);if(null!=l&&l!=o)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&Xl(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,e,t,n,r,i)))return this.destroyBetween(this.index,s),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Xl(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let s=zl.create(this.top,t,n,r,o,i);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,n,r,o){let i=zl.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new Ll(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Il;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Fl)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((il||rl)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new Vl(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function ec(e,t){return e.type.side-t.type.side}function tc(e,t,n,r,o){let i=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function nc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,c=r.resolve(s);if(Wa(n)){for(a=s;o&&!o.node;)o=o.parent;let e=o.node;if(o&&e.isAtom&&ba.isSelectable(e)&&o.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,o=t==Ha(e);r||o;){if(e==n)return!0;let t=La(e);if(!(e=e.parentNode))return!1;r=r&&0==t,o=o&&t==Ha(e)}}(n.focusNode,n.focusOffset,o.dom))){let e=o.posBefore;l=new ba(s==e?c:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=s,o=s;for(let r=0;r<n.rangeCount;r++){let i=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(i.startContainer,i.startOffset,1)),o=Math.max(o,e.docView.posFromDOM(i.endContainer,i.endOffset,-1))}if(t<0)return null;[a,s]=o==e.state.selection.anchor?[o,t]:[t,o],c=r.resolve(s)}else a=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!l){l=dc(e,u,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1)}return l}function rc(e){return e.editable?e.hasFocus():pc(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function oc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(cc(e,n),rc(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&rl){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&Ba(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setStart(r.parentNode,La(r)+1):n.setStart(r,0);n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&Za&&el<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,o,{anchor:i,head:s}=n;!ic||n instanceof ya||(n.$from.parent.inlineContent||(r=sc(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=sc(e,n.to))),e.docView.setSelection(i,s,e,t),ic&&(r&&lc(r),o&&lc(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{rc(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const ic=il||rl&&ol<63;function sc(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(il&&o&&"false"==o.contentEditable)return ac(o);if((!o||"false"==o.contentEditable)&&(!i||"false"==i.contentEditable)){if(o)return ac(o);if(i)return ac(i)}}function ac(e){return e.contentEditable="true",il&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function lc(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function cc(e,t){if(t instanceof ba){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(uc(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else uc(e)}function uc(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function dc(e,t,n,r){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||ya.between(t,n,r)}function hc(e){return!(e.editable&&!e.hasFocus())&&pc(e)}function pc(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function fc(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&pa.findFrom(i,t)}function mc(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function gc(e,t,n){let r=e.state.selection;if(!(r instanceof ya)){if(r instanceof ba&&r.node.isInline)return mc(e,new ya(t>0?r.$to:r.$from));{let n=fc(e.state,t);return!!n&&mc(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,o=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=e.state.doc.resolve(n.pos+o.nodeSize*(t<0?-1:1));return mc(e,new ya(r.$anchor,i))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=fc(e.state,t);return!!(n&&n instanceof ba)&&mc(e,n)}if(!(al&&n.indexOf("m")>-1)){let n,o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText)return!1;let s=t<0?o.pos-i.nodeSize:o.pos;return!!(i.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(ba.isSelectable(i)?mc(e,new ba(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):!!ul&&mc(e,new ya(e.state.doc.resolve(t<0?s:s+i.nodeSize))))}}function yc(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function vc(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function bc(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=!1;tl&&1==n.nodeType&&r<yc(n)&&vc(n.childNodes[r],-1)&&(s=!0);for(;;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(vc(e,-1))o=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(wc(n))break;{let t=n.previousSibling;for(;t&&vc(t,-1);)o=n.parentNode,i=La(t),t=t.previousSibling;if(t)n=t,r=yc(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?xc(e,n,r):o&&xc(e,o,i)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=yc(n);for(;;)if(r<s){if(1!=n.nodeType)break;if(!vc(n.childNodes[r],1))break;o=n,i=++r}else{if(wc(n))break;{let t=n.nextSibling;for(;t&&vc(t,1);)o=t.parentNode,i=La(t)+1,t=t.nextSibling;if(t)n=t,r=0,s=yc(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}o&&xc(e,o,i)}(e)}function wc(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function xc(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!Ua(e);)t=La(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!Ua(e);)t=La(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Wa(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout((()=>{e.state==o&&oc(e)}),50)}function kc(e,t){let n=e.state.doc.resolve(t);if(!rl&&!ll&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function Sc(e,t,n){let r=e.state.selection;if(r instanceof ya&&!r.empty||n.indexOf("s")>-1)return!1;if(al&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=fc(e.state,t);if(n&&n instanceof ba)return mc(e,n)}if(!o.parent.inlineContent){let n=t<0?o:i,s=r instanceof xa?pa.near(n,t):pa.findFrom(n,t);return!!s&&mc(e,s)}return!1}function Cc(e,t){if(!(e.state.selection instanceof ya))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=e.state.tr;return t<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),e.dispatch(r),!0}return!1}function Ec(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Tc(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||al&&72==n&&"c"==r)return Cc(e,-1)||bc(e,-1);if(46==n&&!t.shiftKey||al&&68==n&&"c"==r)return Cc(e,1)||bc(e,1);if(13==n||27==n)return!0;if(37==n||al&&66==n&&"c"==r){let t=37==n?"ltr"==kc(e,e.state.selection.from)?-1:1:-1;return gc(e,t,r)||bc(e,t)}if(39==n||al&&70==n&&"c"==r){let t=39==n?"ltr"==kc(e,e.state.selection.from)?1:-1:1;return gc(e,t,r)||bc(e,t)}return 38==n||al&&80==n&&"c"==r?Sc(e,-1,r)||bc(e,-1):40==n||al&&78==n&&"c"==r?function(e){if(!il||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;Ec(e,n,"true"),setTimeout((()=>Ec(e,n,"false")),20)}return!1}(e)||Sc(e,1,r)||bc(e,1):r==(al?"m":"c")&&(66==n||73==n||89==n||90==n)}function Nc(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:r,openStart:o,openEnd:i}=t;for(;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||ys.fromSchema(e.state.schema),a=$c(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c,u=l.firstChild,d=0;for(;u&&1==u.nodeType&&(c=Pc[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Oc(e,t,n,r,o){let i,s,a=o.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",(n=>{t=n(t,a||r,e)})),a)return t?new xi(mi.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):xi.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,o,r,e)));if(n)s=n;else{let n=o.marks(),{schema:r}=e.state,s=ys.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),i=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=$c().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);(n=o&&Pc[o[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(r.innerHTML=function(e){let t=window.trustedTypes;if(!t)return e;Ic||(Ic=t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e}));return Ic.createHTML(e)}(e),n)for(let i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),ul&&function(e){let t=e.querySelectorAll(rl?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let e=i.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;i=e}if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||as.fromSchema(e.state.schema);s=t.parseSlice(i,{preserveWhitespace:!(!l&&!u),context:o,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||jc.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)s=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(wb){return e}let{content:o,openStart:i,openEnd:s}=e;for(let a=n.length-2;a>=0;a-=2){let e=r.nodes[n[a]];if(!e||e.hasRequiredAttrs())break;o=mi.from(e.create(n[a+1],o)),i++,s++}return new xi(o,i,s)}(Dc(s,+u[1],+u[2]),u[4]);else if(s=xi.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,o=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach((e=>{if(!i)return;let t,n=o.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&Ac(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=_c(i[i.length-1],r.length));let t=Mc(e,n);i.push(t),o=o.matchType(t.type),r=n}})),i)return mi.from(i)}return e}(s.content,o),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=Dc(s,e,t)}return e.someProp("transformPasted",(t=>{s=t(s,e)})),s}const jc=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Mc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let r=t.length-1;r>=n;r--)e=t[r].create(null,mi.from(e));return e}function Ac(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=Ac(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(mi.from(Mc(n,e,o+1))))}}function _c(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,_c(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(mi.empty,!0);return e.copy(n.append(r))}function Rc(e,t,n,r,o,i){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(i=0),o<r-1&&(a=Rc(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(mi.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function Dc(e,t,n){return t<e.openStart&&(e=new xi(Rc(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new xi(Rc(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const Pc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Lc=null;function $c(){return Lc||(Lc=document.implementation.createHTMLDocument("title"))}let Ic=null;const zc={},Bc={},Fc={touchstart:!0,touchmove:!0};class Vc{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Hc(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Uc(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>Wc(e,t))}))}function Wc(e,t){return e.someProp("handleDOMEvents",(n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function qc(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Kc(e){return{left:e.clientX,top:e.clientY}}function Jc(e,t,n,r,o){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,(t=>s>i.depth?t(e,n,i.nodeAfter,i.before(s),o,!0):t(e,n,i.node(s),i.before(s),o,!1))))return!0;return!1}function Gc(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Qc(e,t,n,r,o){return Jc(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(o?function(e,t){if(-1==t)return!1;let n,r,o=e.state.selection;o instanceof ba&&(n=o.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let e=s>i.depth?i.nodeAfter:i.node(s);if(ba.isSelectable(e)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(Gc(e,ba.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&ba.isSelectable(r))&&(Gc(e,new ba(n),"pointer"),!0)}(e,n))}function Xc(e,t,n,r){return Jc(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function Yc(e,t,n,r){return Jc(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(Gc(e,ya.create(r,0,r.content.size),"pointer"),!0);let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let t=i>o.depth?o.nodeAfter:o.node(i),n=o.before(i);if(t.inlineContent)Gc(e,ya.create(r,n+1,n+1+t.content.size),"pointer");else{if(!ba.isSelectable(t))continue;Gc(e,ba.create(r,n),"pointer")}return!0}}(e,n,r)}function Zc(e){return au(e)}Bc.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!nu(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!cl||!rl||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!sl||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||Tc(e,n)?n.preventDefault():Hc(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,qa(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},Bc.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},Bc.keypress=(e,t)=>{let n=t;if(nu(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||al&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof ya)||!r.$from.sameParent(r.$to)){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,r.$from.pos,r.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const eu=al?"metaKey":"ctrlKey";zc.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=Zc(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[eu]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=e.posAtCoords(Kc(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new tu(e,s,n,!!r)):("doubleClick"==i?Xc:Yc)(e,s.pos,s.inside,n)?n.preventDefault():Hc(e,"pointer"))};class tu{constructor(e,t,n,r){let o,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[eu],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);o=n.parent,i=n.depth?n.before():0}const s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=e.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||l instanceof ba&&l.from<=i&&l.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!tl||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Hc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>oc(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Kc(e))),this.updateAllowDefault(e),this.allowDefault||!t?Hc(this.view,"pointer"):Qc(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||il&&this.mightDrag&&!this.mightDrag.node.isAtom||rl&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Gc(this.view,pa.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Hc(this.view,"pointer")}move(e){this.updateAllowDefault(e),Hc(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function nu(e,t){return!!e.composing||!!(il&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}zc.touchstart=e=>{e.input.lastTouch=Date.now(),Zc(e),Hc(e,"pointer")},zc.touchmove=e=>{e.input.lastTouch=Date.now(),Hc(e,"pointer")},zc.contextmenu=e=>Zc(e);const ru=cl?5e3:-1;function ou(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>au(e)),t))}function iu(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function su(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=Ha(e=e.childNodes[t-1])}else{if(!e.parentNode||Ua(e))return null;t=La(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||Ua(e))return null;t=La(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return r}}return n||r}function au(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(cl&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),iu(e),t||e.docView&&e.docView.dirty){let n=nc(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||e.state.selection.empty?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}Bc.compositionstart=Bc.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof ya&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),au(e,!0),e.markCursor=null;else if(au(e,!t.selection.empty),tl&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}ou(e,ru)},Bc.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then((()=>e.domObserver.flush())),e.input.compositionID++,ou(e,20))};const lu=Za&&el<15||sl&&dl<604;function cu(e,t,n,r,o){let i=Oc(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,o,i||xi.empty))))return!0;if(!i)return!1;let s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function uu(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}zc.copy=Bc.cut=(e,t)=>{let n=t,r=e.state.selection,o="cut"==n.type;if(r.empty)return;let i=lu?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Nc(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Bc.paste=(e,t)=>{let n=t;if(e.composing&&!cl)return;let r=lu?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&cu(e,uu(r),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?cu(e,r.value,null,o,t):cu(e,r.textContent,r.innerHTML,o,t)}),50)}(e,n)};class du{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const hu=al?"altKey":"ctrlKey";function pu(e,t){let n=e.someProp("dragCopies",(e=>!e(t)));return null!=n?n:!t[hu]}zc.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o,i=e.state.selection,s=i.empty?null:e.posAtCoords(Kc(n));if(s&&s.pos>=i.from&&s.pos<=(i instanceof ba?i.to-1:i.to));else if(r&&r.mightDrag)o=ba.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(o=ba.create(e.state.doc,t.posBefore))}let a=(o||e.state.selection).content(),{dom:l,text:c,slice:u}=Nc(e,a);(!n.dataTransfer.files.length||!rl||ol>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(lu?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",lu||n.dataTransfer.setData("text/plain",c),e.dragging=new du(u,pu(e,n),o)},zc.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},Bc.dragover=Bc.dragenter=(e,t)=>t.preventDefault(),Bc.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(Kc(n));if(!o)return;let i=e.state.doc.resolve(o.pos),s=r&&r.slice;s?e.someProp("transformPasted",(t=>{s=t(s,e)})):s=Oc(e,uu(n.dataTransfer),lu?null:n.dataTransfer.getData("text/html"),!1,i);let a=!(!r||!pu(e,n));if(e.someProp("handleDrop",(t=>t(e,n,s||xi.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?Xs(e.state.doc,i.pos,s):i.pos;null==l&&(l=i.pos);let c=e.state.tr;if(a){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&ba.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new ba(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((e,n,r,o)=>t=o)),c.setSelection(dc(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},zc.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&oc(e)}),20))},zc.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},zc.beforeinput=(e,t)=>{if(rl&&cl&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,qa(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let os in Bc)zc[os]=Bc[os];function fu(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class mu{constructor(e,t){this.toDOM=e,this.spec=t||wu,this.side=this.spec.side||0}map(e,t,n,r){let{pos:o,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new vu(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof mu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&fu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class gu{constructor(e,t){this.attrs=e,this.spec=t||wu}map(e,t,n,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new vu(o,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof gu&&fu(this.attrs,e.attrs)&&fu(this.spec,e.spec)}static is(e){return e.type instanceof gu}destroy(){}}class yu{constructor(e,t){this.attrs=e,this.spec=t||wu}map(e,t,n,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new vu(o.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof yu&&fu(this.attrs,e.attrs)&&fu(this.spec,e.spec)}destroy(){}}class vu{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new vu(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new vu(e,e,new mu(t,n))}static inline(e,t,n,r){return new vu(e,t,new gu(n,r))}static node(e,t,n,r){return new vu(e,t,new yu(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof gu}get widget(){return this.type instanceof mu}}const bu=[],wu={};class xu{constructor(e,t){this.local=e.length?e:bu,this.children=t.length?t:bu}static create(e,t){return t.length?Nu(t,e,0,wu):ku}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,o){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,n,r+s,o)}}map(e,t,n){return this==ku||0==e.maps.length?this:this.mapInner(e,t,0,0,n||wu)}mapInner(e,t,n,r,o){let i;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){let a=e.slice();for(let c=0,u=i;c<n.maps.length;c++){let e=0;n.maps[c].forEach(((t,n,r,o)=>{let i=o-r-(n-t);for(let s=0;s<a.length;s+=3){let r=a[s+1];if(r<0||t>r+u-e)continue;let o=a[s]+u-e;n>=o?a[s+1]=t<=o?-2:-1:t>=u&&i&&(a[s]+=i,a[s+1]+=i)}e+=i})),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=n.map(e[c]+i),u=t-o;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[c+1]+i,-1)-o,{index:h,offset:p}=r.content.findIndex(u),f=r.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let r=a[c+2].mapInner(n,f,t+1,e[c]+i+1,s);r!=ku?(a[c]=u,a[c+1]=d,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,o,i,s){function a(e,t){for(let i=0;i<e.local.length;i++){let a=e.local[i].map(r,o,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t,n,o,i,s),c=Nu(l,r,0,s);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new xu(t.sort(Ou),a)}(this.children,i||[],e,t,n,r,o):i?new xu(i.sort(Ou),bu):ku}add(e,t){return t.length?this==ku?xu.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,o=0;e.forEach(((e,i)=>{let s,a=i+n;if(s=Eu(t,e,a)){for(r||(r=this.children.slice());o<r.length&&r[o]<i;)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(e,s,a+1):r.splice(o,0,i,i+e.nodeSize,Nu(s,e,a+1,wu)),o+=3}}));let i=Cu(o?Tu(t):t,-n);for(let s=0;s<i.length;s++)i[s].type.valid(e,i[s])||i.splice(s--,1);return new xu(i.length?this.local.concat(i).sort(Ou):this.local,r||this.children)}remove(e){return 0==e.length||this==ku?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let o=0;o<n.length;o+=3){let r,i=n[o]+t,s=n[o+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<s&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[o+2].removeInner(r,i+1);a!=ku?n[o+2]=a:(n.splice(o,3),o-=3)}if(r.length)for(let o,i=0;i<e.length;i++)if(o=e[i])for(let e=0;e<r.length;e++)r[e].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new xu(r,n):ku}forChild(e,t){if(this==ku)return this;if(t.isLeaf)return xu.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let o=e+1,i=o+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<i&&e.to>o&&e.type instanceof gu){let t=Math.max(o,e.from)-o,n=Math.min(i,e.to)-o;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new xu(r.sort(Ou),bu);return n?new Su([e,n]):e}return n||ku}eq(e){if(this==e)return!0;if(!(e instanceof xu)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return ju(this.localsInner(e))}localsInner(e){if(this==ku)return bu;if(e.inlineContent||!this.local.some(gu.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof gu||t.push(this.local[n]);return t}forEachSet(e){e(this)}}xu.empty=new xu([],[]),xu.removeOverlap=ju;const ku=xu.empty;class Su{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,wu)));return Su.from(n)}forChild(e,t){if(t.isLeaf)return xu.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=ku&&(o instanceof Su?n=n.concat(o.members):n.push(o))}return Su.from(n)}eq(e){if(!(e instanceof Su)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}return t?ju(n?t:t.sort(Ou)):bu}static from(e){switch(e.length){case 0:return ku;case 1:return e[0];default:return new Su(e.every((e=>e instanceof xu))?e:e.reduce(((e,t)=>e.concat(t instanceof xu?t:t.members)),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Cu(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new vu(o.from+t,o.to+t,o.type))}return n}function Eu(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i,s=0;s<e.length;s++)(i=e[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),e[s]=null);return o}function Tu(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Nu(e,t,n,r){let o=[],i=!1;t.forEach(((t,s)=>{let a=Eu(e,t,s+n);if(a){i=!0;let e=Nu(a,t,n+s+1,r);e!=ku&&o.push(s,s+t.nodeSize,e)}}));let s=Cu(i?Tu(e):e,-n).sort(Ou);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new xu(s,o):ku}function Ou(e,t){return e.from-t.from||e.to-t.to}function ju(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Mu(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Mu(t,o+1,i.copy(r.to,i.to)))}}return t}function Mu(e,t,n){for(;t<e.length&&Ou(n,e[t])>0;)t++;e.splice(t,0,n)}function Au(e){let t=[];return e.someProp("decorations",(n=>{let r=n(e.state);r&&r!=ku&&t.push(r)})),e.cursorWrapper&&t.push(xu.create(e.state.doc,[e.cursorWrapper.deco])),Su.from(t)}const _u={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ru=Za&&el<=11;class Du{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Pu{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Du,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);Za&&el<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Ru&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,_u)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(hc(this.view)){if(this.suppressingSelectionUpdates)return oc(this.view);if(Za&&el<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ba(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let o=e.focusNode;o;o=$a(o))n.add(o);for(let o=e.anchorNode;o;o=$a(o))if(n.has(o)){t=o;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&hc(e)&&!this.ignoreSelectionChange(n),o=-1,i=-1,s=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],a);e&&(o=o<0?e.from:Math.min(e.from,o),i=i<0?e.to:Math.max(e.to,i),e.typeOver&&(s=!0))}if(tl&&a.length){let t=a.filter((e=>"BR"==e.nodeName));if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;!t||"LI"!=t.nodeName||n&&zu(e,n)==t||r.remove()}}}let l=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Wa(n)&&(l=nc(e))&&l.eq(pa.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,oc(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,i),function(e){if(Lu.has(e))return;if(Lu.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=tl,$u)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$u=!0}}(e)),this.handleDOMChange(o,i,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||oc(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,o=e.nextSibling;if(Za&&el<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(o=i)}let i=r&&r.parentNode==e.target?La(r)+1:0,s=n.localPosFromDOM(e.target,i,-1),a=o&&o.parentNode==e.target?La(o):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Lu=new WeakMap,$u=!1;function Iu(e,t){let n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return Ba(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function zu(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function Bu(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(il&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||il&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Fu=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Vu(e,t,n,r,o){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=nc(e,t);if(n&&!e.state.selection.eq(n)){if(rl&&cl&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,qa(13,"Enter")))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),i&&r.setMeta("composition",i),e.dispatch(r)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l,c,u=e.state.selection,d=function(e,t,n){let r,{node:o,fromOffset:i,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],Wa(c)||r.push({node:c.focusNode,offset:c.focusOffset})),rl&&8===e.input.lastKeyCode)for(let g=s;g>i;g--){let e=o.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=g;break}if(!t||t.size)break}let d=e.state.doc,h=e.someProp("domParser")||as.fromSchema(e.state.schema),p=d.resolve(a),f=null,m=h.parse(o,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Bu,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=function(e,t,n,r,o){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==o){r-=s+Math.max(0,i-Math.min(s,a))-i}if(s<i&&e.size<t.size){let e=r<=i&&r>=s?i-r:0;i-=e,i&&i<t.size&&Wu(t.textBetween(i-1,i+1))&&(i+=e?1:-1),a=i+(a-s),s=i}else if(a<i){let t=r<=i&&r>=a?i-r:0;i-=t,i&&i<e.size&&Wu(e.textBetween(i-1,i+1))&&(i+=t?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}(p.content,d.doc.content,d.from,l,c);if(f&&e.input.domChangeCount++,(sl&&e.input.lastIOSEnter>Date.now()-225||cl)&&o.some((e=>1==e.nodeType&&!Fu.test(e.nodeName)))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",(t=>t(e,qa(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&u instanceof ya&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=Hu(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);i&&n.setMeta("composition",i),e.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof ya&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),Za&&el<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&" \xa0"==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=d.doc.resolveNoCache(f.start-d.from),y=d.doc.resolveNoCache(f.endB-d.from),v=h.resolve(f.start),b=g.sameParent(y)&&g.parent.inlineContent&&v.end()>=f.endA;if((sl&&e.input.lastIOSEnter>Date.now()-225&&(!b||o.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!b&&g.pos<d.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&(m=pa.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head>g.pos)&&e.someProp("handleKeyDown",(t=>t(e,qa(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&function(e,t,n,r,o){if(n-t<=o.pos-r.pos||Uu(r,!0,!1)<o.pos)return!1;let i=e.resolve(t);if(!r.parent.isTextblock){let e=i.nodeAfter;return null!=e&&n==t+e.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(Uu(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Uu(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(h,f.start,f.endA,g,y)&&e.someProp("handleKeyDown",(t=>t(e,qa(8,"Backspace")))))return void(cl&&rl&&e.domObserver.suppressSelectionUpdates());rl&&f.endB==f.start&&(e.input.lastChromeDelete=Date.now()),cl&&!b&&g.start()!=y.start()&&0==y.parentOffset&&g.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,y=d.doc.resolveNoCache(f.endB-d.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,qa(13,"Enter"))}))}),20));let w,x,k,S=f.start,C=f.endA;if(b)if(g.pos==y.pos)Za&&el<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>oc(e)),20)),w=e.state.tr.delete(S,C),x=h.resolve(f.start).marksAcross(h.resolve(f.endA));else if(f.endA==f.endB&&(k=function(e,t){let n,r,o,i=e.firstChild.marks,s=t.firstChild.marks,a=i,l=s;for(let u=0;u<s.length;u++)a=s[u].removeFromSet(a);for(let u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],n="add",o=e=>e.mark(r.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;r=l[0],n="remove",o=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let u=0;u<t.childCount;u++)c.push(o(t.child(u)));if(mi.from(c).eq(e))return{mark:r,type:n}}(g.parent.content.cut(g.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,f.endA-v.start()))))w=e.state.tr,"add"==k.type?w.addMark(S,C,k.mark):w.removeMark(S,C,k.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,y.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,S,C,t))))return;w=e.state.tr.insertText(t,S,C)}if(w||(w=e.state.tr.replace(S,C,d.doc.slice(f.start-d.from,f.endB-d.from))),d.sel){let t=Hu(e,w.doc,d.sel);t&&!(rl&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==S||t.head==w.mapping.map(C)-1)||Za&&t.empty&&t.head==S)&&w.setSelection(t)}x&&w.ensureMarks(x),i&&w.setMeta("composition",i),e.dispatch(w.scrollIntoView())}function Hu(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:dc(e,t.resolve(n.anchor),t.resolve(n.head))}function Uu(e,t,n){let r=e.depth,o=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,o++}return o}function Wu(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class qu{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Vc,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Xu),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Gu(this),Ju(this),this.nodeViews=Qu(this),this.docView=Bl(this.state.doc,Ku(this),Au(this),this.dom,this),this.domObserver=new Pu(this,((e,t,n,r)=>Vu(this,e,t,n,r))),this.domObserver.start(),function(e){for(let t in zc){let n=zc[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!qc(e,t)||Wc(e,t)||!e.editable&&t.type in Bc||n(e,t)},Fc[t]?{passive:!0}:void 0)}il&&e.dom.addEventListener("input",(()=>null)),Uc(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Uc(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Xu),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(iu(this),i=!0),this.state=e;let s=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=Qu(this);(function(e,t){let n=0,r=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let o in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,o=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&Uc(this),this.editable=Gu(this),Ju(this);let a=Au(this),l=Ku(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",u=o||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(r.selection)||(i=!0);let d="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top);for(let i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(i,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=o-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:gl(e.dom)}}(this);if(i){this.domObserver.stop();let t=u&&(Za||rl)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(u){let n=rl?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=su(this)),!o&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=Bl(e.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Ba(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?oc(this,t):(cc(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&function(e){let{refDOM:t,refTop:n,stack:r}=e,o=t?t.getBoundingClientRect().top:0;yl(r,0==o?0:o-n)}(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof ba){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&ml(this,t.getBoundingClientRect(),e)}else ml(this,this.coordsAtPos(this.state.selection.head,1),e);else;}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new du(e.slice,e.move,r<0?void 0:ba.create(this.state.doc,r))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let i=0;i<this.directPlugins.length;i++){let r=this.directPlugins[i].props[e];if(null!=r&&(n=t?t(r):r))return n}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let r=o[i].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(Za){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(vl)return e.focus(vl);let t=gl(e);e.focus(null==vl?{get preventScroll(){return vl={preventScroll:!0},!0}}:void 0),vl||(vl=!1,yl(t,0))}(this.dom),oc(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return kl(this,e)}coordsAtPos(e){return Tl(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return Dl(this,t||this.state,e)}pasteHTML(e,t){return cu(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return cu(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Nc(this,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Au(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Ia=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){Wc(e,t)||!zc[t.type]||!e.editable&&t.type in Bc||zc[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?il&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return Iu(e,n)}let n;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?Iu(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Ku(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),t.translate||(t.translate="no"),[vu.node(0,e.state.doc.content.size,t)]}function Ju(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:vu.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Gu(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function Qu(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Xu(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Yu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Zu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ed="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),td="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),nd=0;nd<10;nd++)Yu[48+nd]=Yu[96+nd]=String(nd);for(nd=1;nd<=24;nd++)Yu[nd+111]="F"+nd;for(nd=65;nd<=90;nd++)Yu[nd]=String.fromCharCode(nd+32),Zu[nd]=String.fromCharCode(nd);for(var rd in Yu)Zu.hasOwnProperty(rd)||(Zu[rd]=Yu[rd]);const od="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function id(e){let t,n,r,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let a=0;a<i.length-1;a++){let e=i[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);od?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function sd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function ad(e){let t=function(e){let t=Object.create(null);for(let n in e)t[id(n)]=e[n];return t}(e);return function(e,n){let r,o=function(e){var t=!(ed&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||td&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?Zu:Yu)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=t[sd(o,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=t[sd(o,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=Yu[n.keyCode])&&r!=o){let o=t[sd(r,n)];if(o&&o(e.state,e.dispatch,e))return!0}}return!1}}const ld=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function cd(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const ud=(e,t,n)=>{let r=cd(e,n);if(!r)return!1;let o=fd(r);if(!o){let n=r.blockRange(),o=n&&Vs(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let i=o.nodeBefore;if(Td(e,o,t,-1))return!0;if(0==r.parent.content.size&&(hd(i,"end")||ba.isSelectable(i)))for(let s=r.depth;;s--){let n=Ys(e.doc,r.before(s),r.after(s),xi.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(hd(i,"end")?pa.findFrom(r.doc.resolve(r.mapping.map(o.pos,-1)),-1):ba.create(r.doc,o.pos-i.nodeSize)),t(r.scrollIntoView())}return!0}if(1==s||r.node(s-1).childCount>1)break}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0)};function dd(e,t,n){let r=t.nodeBefore,o=t.pos-1;for(;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let i=t.nodeAfter,s=t.pos+1;for(;!i.isTextblock;s++){if(i.type.spec.isolating)return!1;let e=i.firstChild;if(!e)return!1;i=e}let a=Ys(e.doc,o,s,xi.empty);if(!a||a.from!=o||a instanceof $s&&a.slice.size>=s-o)return!1;if(n){let t=e.tr.step(a);t.setSelection(ya.create(t.doc,o)),n(t.scrollIntoView())}return!0}function hd(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const pd=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=fd(r)}let s=i&&i.nodeBefore;return!(!s||!ba.isSelectable(s))&&(t&&t(e.tr.setSelection(ba.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function fd(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function md(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const gd=(e,t,n)=>{let r=md(e,n);if(!r)return!1;let o=vd(r);if(!o)return!1;let i=o.nodeAfter;if(Td(e,o,t,1))return!0;if(0==r.parent.content.size&&(hd(i,"start")||ba.isSelectable(i))){let n=Ys(e.doc,r.before(),r.after(),xi.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(hd(i,"start")?pa.findFrom(r.doc.resolve(r.mapping.map(o.pos)),1):ba.create(r.doc,r.mapping.map(o.pos))),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)},yd=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=vd(r)}let s=i&&i.nodeAfter;return!(!s||!ba.isSelectable(s))&&(t&&t(e.tr.setSelection(ba.create(e.doc,i.pos)).scrollIntoView()),!0)};function vd(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const bd=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function wd(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const xd=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=wd(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(t){let r=n.after(),o=e.tr.replaceWith(r,r,s.createAndFill());o.setSelection(pa.near(o.doc.resolve(r),1)),t(o.scrollIntoView())}return!0},kd=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof xa||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=wd(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(n,i.createAndFill());s.setSelection(ya.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},Sd=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(Ks(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Vs(r);return null!=o&&(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)};const Cd=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof ba&&e.selection.node.isBlock)return!(!n.parentOffset||!Ks(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let o,i,s=[],a=!1,l=!1;for(let h=n.depth;;h--){if(n.node(h).isBlock){a=n.end(h)==n.pos+(n.depth-h),l=n.start(h)==n.pos-(n.depth-h),i=wd(n.node(h-1).contentMatchAt(n.indexAfter(h-1)));let e=Ed&&Ed(r.parent,a,n);s.unshift(e||(a&&i?{type:i}:null)),o=h;break}if(1==h)return!1;s.unshift(null)}let c=e.tr;(e.selection instanceof ya||e.selection instanceof xa)&&c.deleteSelection();let u=c.mapping.map(n.pos),d=Ks(c.doc,u,s.length,s);if(d||(s[0]=i?{type:i}:null,d=Ks(c.doc,u,s.length,s)),c.split(u,s.length,s),!a&&l&&n.node(o).type!=i){let e=c.mapping.map(n.before(o)),t=c.doc.resolve(e);i&&n.node(o-1).canReplaceWith(t.index(),t.index()+1,i)&&c.setNodeMarkup(c.mapping.map(n.before(o)),i)}return t&&t(c.scrollIntoView()),!0};var Ed;function Td(e,t,n,r){let o,i,s=t.nodeBefore,a=t.nodeAfter,l=s.type.spec.isolating||a.type.spec.isolating;if(!l&&function(e,t,n){let r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!o.isTextblock&&!Js(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(o=(i=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&i.matchType(o[0]||a.type).validEnd){if(n){let r=t.pos+a.nodeSize,i=mi.empty;for(let e=o.length-1;e>=0;e--)i=mi.from(o[e].create(null,i));i=mi.from(s.copy(i));let l=e.tr.step(new Is(t.pos-1,r,t.pos,r,new xi(i,1,0),o.length,!0)),c=l.doc.resolve(r+2*o.length);c.nodeAfter&&c.nodeAfter.type==s.type&&Js(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let u=a.type.spec.isolating||r>0&&l?null:pa.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),h=d&&Vs(d);if(null!=h&&h>=t.depth)return n&&n(e.tr.lift(d,h).scrollIntoView()),!0;if(c&&hd(a,"start",!0)&&hd(s,"end")){let r=s,o=[];for(;o.push(r),!r.isTextblock;)r=r.lastChild;let i=a,l=1;for(;!i.isTextblock;i=i.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,i.content)){if(n){let r=mi.empty;for(let e=o.length-1;e>=0;e--)r=mi.from(o[e].copy(r));n(e.tr.step(new Is(t.pos-o.length,t.pos+a.nodeSize,t.pos+l,t.pos+a.nodeSize-l,new xi(r,o.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Nd(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(ya.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}const Od=Nd(-1),jd=Nd(1);function Md(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(r,s,((r,i)=>{if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{let t=n.doc.resolve(i),r=t.index();o=t.parent.canReplaceWith(r,r+1,e)}}))}if(!o)return!1;if(r){let o=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[r];o.setBlockType(i,s,e,t)}r(o.scrollIntoView())}return!0}}function Ad(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}let _d=Ad(ld,ud,pd),Rd=Ad(ld,gd,yd);const Dd={Enter:Ad(bd,kd,Sd,Cd),"Mod-Enter":xd,Backspace:_d,"Mod-Backspace":_d,"Shift-Backspace":_d,Delete:Rd,"Mod-Delete":Rd,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new xa(e.doc))),!0)},Pd={"Ctrl-h":Dd.Backspace,"Alt-Backspace":Dd["Mod-Backspace"],"Ctrl-d":Dd.Delete,"Ctrl-Alt-Backspace":Dd["Mod-Delete"],"Alt-Delete":Dd["Mod-Delete"],"Alt-d":Dd["Mod-Delete"],"Ctrl-a":Od,"Ctrl-e":jd};for(let os in Dd)Pd[os]=Dd[os];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function Ld(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return!!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!1,i=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=s.resolve(t.start-2);i=new $i(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new $i(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),o=!0}let a=Hs(i,n,r,t);if(!a)return!1;e&&function(e,t,n,r,o){let i=mi.empty;for(let u=n.length-1;u>=0;u--)i=mi.from(n[u].type.create(n[u].attrs,i));e.step(new Is(t.start-(r?2:0),t.end,t.start,t.end,new xi(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let a=n.length-s,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,h=!0;u<d;u++,h=!1)!h&&Ks(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize}(e,t,a,o,n);return!0}(a,s,e,t)&&(r&&r(a.scrollIntoView()),!0)}}function $d(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==e));return!!i&&(!n||(r.node(i.depth-1).type==e?function(e,t,n,r){let o=e.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Is(i-1,s,i,s,new xi(mi.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new $i(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=Vs(r);if(null==a)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(i,-1)-1);Js(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos);return t(o.scrollIntoView()),!0}(t,n,e,i):function(e,t,n){let r=e.tr,o=n.parent;for(let p=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)p-=o.child(f).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?mi.empty:mi.from(o))))return!1;let d=i.pos,h=d+s.nodeSize;return r.step(new Is(d-(a?1:0),h+(l?1:0),d+1,h-1,new xi((a?mi.empty:mi.from(o.copy(mi.empty))).append(l?mi.empty:mi.from(o.copy(mi.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}(t,n,i)))}}function Id(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class zd{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){var e=this;const{rawCommands:t,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map((t=>{let[n,r]=t;return[n,function(){const t=r(...arguments)(s);return i.getMeta("preventDispatch")||e.hasCustomState||o.dispatch(i),t}]})))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!e,c=e||i.tr,u={...Object.fromEntries(Object.entries(r).map((e=>{let[r,o]=e;return[r,function(){const e=t.buildProps(c,n),r=o(...arguments)(e);return a.push(r),u}]}))),run:()=>(l||!n||c.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(c),a.every((e=>!0===e)))};return u}createCan(e){const{rawCommands:t,state:n}=this,r=!1,o=e||n.tr,i=this.buildProps(o,r),s=Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t,function(){return n(...arguments)({...i,dispatch:void 0})}]})));return{...s,chain:()=>this.createChain(o,r)}}buildProps(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s={tr:e,editor:r,view:i,state:Id({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,function(){return n(...arguments)(s)}]})))}};return s}}class Bd{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=this.callbacks[e];return o&&o.forEach((e=>e.apply(this,n))),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((e=>e!==t)):delete this.callbacks[e]),this}once(e,t){var n=this;const r=function(){n.off(e,r);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];t.apply(n,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Fd(e,t,n){if(void 0===e.config[t]&&e.parent)return Fd(e.parent,t,n);if("function"===typeof e.config[t]){return e.config[t].bind({...n,parent:e.parent?Fd(e.parent,t,n):null})}return e.config[t]}function Vd(e){return{baseExtensions:e.filter((e=>"extension"===e.type)),nodeExtensions:e.filter((e=>"node"===e.type)),markExtensions:e.filter((e=>"mark"===e.type))}}function Hd(e){const t=[],{nodeExtensions:n,markExtensions:r}=Vd(e),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach((e=>{const n=Fd(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:o});if(!n)return;n().forEach((e=>{e.types.forEach((n=>{Object.entries(e.attributes).forEach((e=>{let[r,o]=e;t.push({type:n,name:r,attribute:{...i,...o}})}))}))}))})),o.forEach((e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Fd(e,"addAttributes",n);if(!r)return;const o=r();Object.entries(o).forEach((n=>{let[r,o]=n;const s={...i,...o};"function"===typeof(null===s||void 0===s?void 0:s.default)&&(s.default=s.default()),(null===s||void 0===s?void 0:s.isRequired)&&void 0===(null===s||void 0===s?void 0:s.default)&&delete s.default,t.push({type:e.name,name:r,attribute:s})}))})),t}function Ud(e,t){if("string"===typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Wd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>!!e)).reduce(((e,t)=>{const n={...e};return Object.entries(t).forEach((e=>{let[t,r]=e;if(n[t])if("class"===t){const e=r?String(r).split(" "):[],o=n[t]?n[t].split(" "):[],i=e.filter((e=>!o.includes(e)));n[t]=[...o,...i].join(" ")}else if("style"===t){const e=r?r.split(";").map((e=>e.trim())).filter(Boolean):[],o=n[t]?n[t].split(";").map((e=>e.trim())).filter(Boolean):[],i=new Map;o.forEach((e=>{const[t,n]=e.split(":").map((e=>e.trim()));i.set(t,n)})),e.forEach((e=>{const[t,n]=e.split(":").map((e=>e.trim()));i.set(t,n)})),n[t]=Array.from(i.entries()).map((e=>{let[t,n]=e;return`${t}: ${n}`})).join("; ")}else n[t]=r;else n[t]=r})),n}),{})}function qd(e,t){return t.filter((t=>t.type===e.type.name)).filter((e=>e.attribute.rendered)).map((t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]})).reduce(((e,t)=>Wd(e,t)),{})}function Kd(e){return"function"===typeof e}function Jd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(Kd(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t?e.bind(t)(...r):e(...r)}return e}function Gd(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const o=t.reduce(((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!==typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null===r||void 0===r?e:{...e,[t.name]:r}}),{});return{...r,...o}}}}function Qd(e){return Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return("attrs"!==t||!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(n))&&(null!==n&&void 0!==n)})))}function Xd(e,t){var n;const r=Hd(e),{nodeExtensions:o,markExtensions:i}=Vd(e),s=null===(n=o.find((e=>Fd(e,"topNode"))))||void 0===n?void 0:n.name,a=Object.fromEntries(o.map((n=>{const o=r.filter((e=>e.type===n.name)),i={name:n.name,options:n.options,storage:n.storage,editor:t},s=Qd({...e.reduce(((e,t)=>{const r=Fd(t,"extendNodeSchema",i);return{...e,...r?r(n):{}}}),{}),content:Jd(Fd(n,"content",i)),marks:Jd(Fd(n,"marks",i)),group:Jd(Fd(n,"group",i)),inline:Jd(Fd(n,"inline",i)),atom:Jd(Fd(n,"atom",i)),selectable:Jd(Fd(n,"selectable",i)),draggable:Jd(Fd(n,"draggable",i)),code:Jd(Fd(n,"code",i)),whitespace:Jd(Fd(n,"whitespace",i)),linebreakReplacement:Jd(Fd(n,"linebreakReplacement",i)),defining:Jd(Fd(n,"defining",i)),isolating:Jd(Fd(n,"isolating",i)),attrs:Object.fromEntries(o.map((e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))}),a=Jd(Fd(n,"parseHTML",i));a&&(s.parseDOM=a.map((e=>Gd(e,o))));const l=Fd(n,"renderHTML",i);l&&(s.toDOM=e=>l({node:e,HTMLAttributes:qd(e,o)}));const c=Fd(n,"renderText",i);return c&&(s.toText=c),[n.name,s]}))),l=Object.fromEntries(i.map((n=>{const o=r.filter((e=>e.type===n.name)),i={name:n.name,options:n.options,storage:n.storage,editor:t},s=Qd({...e.reduce(((e,t)=>{const r=Fd(t,"extendMarkSchema",i);return{...e,...r?r(n):{}}}),{}),inclusive:Jd(Fd(n,"inclusive",i)),excludes:Jd(Fd(n,"excludes",i)),group:Jd(Fd(n,"group",i)),spanning:Jd(Fd(n,"spanning",i)),code:Jd(Fd(n,"code",i)),attrs:Object.fromEntries(o.map((e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))}),a=Jd(Fd(n,"parseHTML",i));a&&(s.parseDOM=a.map((e=>Gd(e,o))));const l=Fd(n,"renderHTML",i);return l&&(s.toDOM=e=>l({mark:e,HTMLAttributes:qd(e,o)})),[n.name,s]})));return new is({topNode:s,nodes:a,marks:l})}function Yd(e,t){return t.nodes[e]||t.marks[e]||null}function Zd(e,t){return Array.isArray(t)?t.some((t=>("string"===typeof t?t:t.name)===e.name)):t}function eh(e,t){const n=ys.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function th(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class nh{constructor(e){this.find=e.find,this.handler=e.handler}}function rh(e){var t;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find((e=>e.type.spec.code))))return!1;let u=!1;const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,((e,t,o,i)=>{var s,a;const l=(null===(a=(s=e.type.spec).toText)||void 0===a?void 0:a.call(s,{node:e,pos:t,parent:o,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))})),n}(c)+i;return s.forEach((e=>{if(u)return;const t=((e,t)=>{if(th(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r})(d,e.find);if(!t)return;const s=l.state.tr,c=Id({state:l.state,transaction:s}),h={from:r-(t[0].length-i.length),to:o},{commands:p,chain:f,can:m}=new zd({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:f,can:m})&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:o,text:i}),l.dispatch(s),u=!0)})),u}function oh(e){const{editor:t,rules:n}=e,r=new _a({state:{init:()=>null,apply(e,o,i){const s=e.getMeta(r);if(s)return s;const a=e.getMeta("applyInputRules");return!!a&&setTimeout((()=>{let{text:e}=a;"string"===typeof e||(e=eh(mi.from(e),i.schema));const{from:o}=a,s=o+e.length;rh({editor:t,from:o,to:s,text:e,rules:n,plugin:r})})),e.selectionSet||e.docChanged?null:o}},props:{handleTextInput:(e,o,i,s)=>rh({editor:t,from:o,to:i,text:s,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout((()=>{const{$cursor:o}=e.state.selection;o&&rh({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})})),!1)},handleKeyDown(e,o){if("Enter"!==o.key)return!1;const{$cursor:i}=e.state.selection;return!!i&&rh({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function ih(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function sh(e,t){const n={...e};return ih(e)&&ih(t)&&Object.keys(t).forEach((r=>{ih(t[r])&&ih(e[r])?n[r]=sh(e[r],t[r]):n[r]=t[r]})),n}class ah{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jd(Fd(this,"addOptions",{name:this.name}))),this.storage=Jd(Fd(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new ah(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>sh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new ah(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Jd(Fd(t,"addOptions",{name:t.name})),t.storage=Jd(Fd(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit(e){let{editor:t,mark:n}=e;const{tr:r}=t.state,o=t.state.selection.$from;if(o.pos===o.end()){const e=o.marks();if(!!!e.find((e=>(null===e||void 0===e?void 0:e.type.name)===n.name)))return!1;const i=e.find((e=>(null===e||void 0===e?void 0:e.type.name)===n.name));return i&&r.removeStoredMark(i),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}}class lh{constructor(e){this.find=e.find,this.handler=e.handler}}function ch(e){const{editor:t,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:c,can:u}=new zd({editor:t,state:n}),d=[];n.doc.nodesBetween(r,o,((e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const h=Math.max(r,t),p=Math.min(o,t+e.content.size);((e,t,n)=>{if(th(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map((t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]})(e.textBetween(h-t,p-t,void 0,"\ufffc"),i.find,s).forEach((e=>{if(void 0===e.index)return;const t=h+e.index+1,r=t+e[0].length,o={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},p=i.handler({state:n,range:o,match:e,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(p)}))}));return d.every((e=>null!==e))}let uh=null;function dh(e){const{editor:t,rules:n}=e;let r,o=null,i=!1,s=!1,a="undefined"!==typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{r="undefined"!==typeof DragEvent?new DragEvent("drop"):null}catch{r=null}const l=e=>{let{state:n,from:o,to:i,rule:s,pasteEvt:l}=e;const c=n.tr,u=Id({state:n,transaction:c});if(ch({editor:t,state:u,from:Math.max(o-1,0),to:i.b-1,rule:s,pasteEvent:l,dropEvent:r})&&c.steps.length){try{r="undefined"!==typeof DragEvent?new DragEvent("drop"):null}catch{r=null}return a="undefined"!==typeof ClipboardEvent?new ClipboardEvent("paste"):null,c}};return n.map((e=>new _a({view(e){const n=n=>{var r;o=(null===(r=e.dom.parentElement)||void 0===r?void 0:r.contains(n.target))?e.dom.parentElement:null,o&&(uh=t)},r=()=>{uh&&(uh=null)};return window.addEventListener("dragstart",n),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",n),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(s=o===e.dom.parentElement,r=t,!s){const e=uh;e&&setTimeout((()=>{const t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})}),10)}return!1},paste:(e,t)=>{var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return a=t,i=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{const o=t[0],c="paste"===o.getMeta("uiEvent")&&!i,u="drop"===o.getMeta("uiEvent")&&!s,d=o.getMeta("applyPasteRules"),h=!!d;if(!c&&!u&&!h)return;if(h){let{text:t}=d;"string"===typeof t||(t=eh(mi.from(t),r.schema));const{from:n}=d,o=n+t.length,i=(e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n})(t);return l({rule:e,state:r,from:n,to:{b:o},pasteEvt:i})}const p=n.doc.content.findDiffStart(r.doc.content),f=n.doc.content.findDiffEnd(r.doc.content);return"number"===typeof p&&f&&p!==f.b?l({rule:e,state:r,from:p,to:f,pasteEvt:a}):void 0}})))}class hh{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=hh.resolve(e),this.schema=Xd(this.extensions,t),this.setupExtensions()}static resolve(e){const t=hh.sort(hh.flatten(e)),n=function(e){const t=e.filter(((t,n)=>e.indexOf(t)!==n));return Array.from(new Set(t))}(t.map((e=>e.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((e=>`'${e}'`)).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map((e=>{const t=Fd(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e})).flat(10)}static sort(e){return e.sort(((e,t)=>{const n=Fd(e,"priority")||100,r=Fd(t,"priority")||100;return n>r?-1:n<r?1:0}))}get commands(){return this.extensions.reduce(((e,t)=>{const n=Fd(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Yd(t.name,this.schema)});return n?{...e,...n()}:e}),{})}get plugins(){const{editor:e}=this,t=hh.sort([...this.extensions].reverse()),n=[],r=[],o=t.map((t=>{const o={name:t.name,options:t.options,storage:t.storage,editor:e,type:Yd(t.name,this.schema)},i=[],s=Fd(t,"addKeyboardShortcuts",o);let a={};if("mark"===t.type&&Fd(t,"exitable",o)&&(a.ArrowRight=()=>ah.handleExit({editor:e,mark:t})),s){const t=Object.fromEntries(Object.entries(s()).map((t=>{let[n,r]=t;return[n,()=>r({editor:e})]})));a={...a,...t}}const l=new _a({props:{handleKeyDown:ad(a)}});i.push(l);const c=Fd(t,"addInputRules",o);Zd(t,e.options.enableInputRules)&&c&&n.push(...c());const u=Fd(t,"addPasteRules",o);Zd(t,e.options.enablePasteRules)&&u&&r.push(...u());const d=Fd(t,"addProseMirrorPlugins",o);if(d){const e=d();i.push(...e)}return i})).flat();return[oh({editor:e,rules:n}),...dh({editor:e,rules:r}),...o]}get attributes(){return Hd(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Vd(this.extensions);return Object.fromEntries(t.filter((e=>!!Fd(e,"addNodeView"))).map((t=>{const n=this.attributes.filter((e=>e.type===t.name)),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:Ud(t.name,this.schema)},o=Fd(t,"addNodeView",r);if(!o)return[];return[t.name,(r,i,s,a,l)=>{const c=qd(r,n);return o()({node:r,view:i,getPos:s,decorations:a,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]})))}setupExtensions(){this.extensions.forEach((e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Yd(e.name,this.schema)};if("mark"===e.type){(null===(t=Jd(Fd(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name)}const r=Fd(e,"onBeforeCreate",n),o=Fd(e,"onCreate",n),i=Fd(e,"onUpdate",n),s=Fd(e,"onSelectionUpdate",n),a=Fd(e,"onTransaction",n),l=Fd(e,"onFocus",n),c=Fd(e,"onBlur",n),u=Fd(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),i&&this.editor.on("update",i),s&&this.editor.on("selectionUpdate",s),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)}))}}class ph{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jd(Fd(this,"addOptions",{name:this.name}))),this.storage=Jd(Fd(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new ph(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>sh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new ph({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Jd(Fd(t,"addOptions",{name:t.name})),t.storage=Jd(Fd(t,"addStorage",{name:t.name,options:t.options})),t}}function fh(e,t,n){const{from:r,to:o}=t,{blockSeparator:i="\n\n",textSerializers:s={}}=n||{};let a="";return e.nodesBetween(r,o,((e,n,l,c)=>{var u;e.isBlock&&n>r&&(a+=i);const d=null===s||void 0===s?void 0:s[e.type.name];if(d)return l&&(a+=d({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(a+=null===(u=null===e||void 0===e?void 0:e.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,o-n))})),a}function mh(e){return Object.fromEntries(Object.entries(e.nodes).filter((e=>{let[,t]=e;return t.spec.toText})).map((e=>{let[t,n]=e;return[t,n.spec.toText]})))}const gh=ph.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new _a({key:new Pa("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:i}=o,s=Math.min(...i.map((e=>e.$from.pos))),a=Math.max(...i.map((e=>e.$to.pos))),l=mh(n);return fh(r,{from:s,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function yh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0};const r=Object.keys(t);return!r.length||r.every((r=>n.strict?t[r]===e[r]:th(t[r])?t[r].test(e[r]):t[r]===e[r]))}function vh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find((e=>e.type===t&&yh(Object.fromEntries(Object.keys(n).map((t=>[t,e.attrs[t]]))),n)))}function bh(e,t){return!!vh(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function wh(e,t,n){var r;if(!e||!t)return;let o=e.parent.childAfter(e.parentOffset);if(o.node&&o.node.marks.some((e=>e.type===t))||(o=e.parent.childBefore(e.parentOffset)),!o.node||!o.node.marks.some((e=>e.type===t)))return;n=n||(null===(r=o.node.marks[0])||void 0===r?void 0:r.attrs);if(!vh([...o.node.marks],t,n))return;let i=o.index,s=e.start()+o.offset,a=i+1,l=s+o.node.nodeSize;for(;i>0&&bh([...e.parent.child(i-1).marks],t,n);)i-=1,s-=e.parent.child(i).nodeSize;for(;a<e.parent.childCount&&bh([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function xh(e,t){if("string"===typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function kh(e){return e instanceof ya}function Sh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function Ch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;const n=pa.atStart(e),r=pa.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const o=n.from,i=r.to;return"all"===t?ya.create(e,Sh(0,o,i),Sh(e.content.size,o,i)):ya.create(e,Sh(t,o,i),Sh(t,o,i))}function Eh(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function Th(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Nh=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&Nh(r)}return e};function Oh(e){const t=`<body>${e}</body>`,n=(new window.DOMParser).parseFromString(t,"text/html").body;return Nh(n)}function jh(e,t,n){if(e instanceof zi||e instanceof mi)return e;n={slice:!0,parseOptions:{},...n};const r="string"===typeof e;if("object"===typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return mi.fromArray(e.map((e=>t.nodeFromJSON(e))));const r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),jh("",t,n)}if(r){if(n.errorOnInvalidContent){let r=!1,o="";const i=new is({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,o="string"===typeof e?e:e.outerHTML,null)}]}})});if(n.slice?as.fromSchema(i).parseSlice(Oh(e),n.parseOptions):as.fromSchema(i).parse(Oh(e),n.parseOptions),n.errorOnInvalidContent&&r)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const r=as.fromSchema(t);return n.slice?r.parseSlice(Oh(e),n.parseOptions).content:r.parse(Oh(e),n.parseOptions)}return jh("",t,n)}function Mh(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function Ah(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{from:r,to:o,empty:i}=e.selection,s=t?Ud(t,e.schema):null,a=[];e.doc.nodesBetween(r,o,((e,t)=>{if(e.isText)return;const n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);a.push({node:e,from:n,to:i})}));const l=o-r,c=a.filter((e=>!s||s.name===e.node.type.name)).filter((e=>yh(e.node.attrs,n,{strict:!1})));if(i)return!!c.length;return c.reduce(((e,t)=>e+t.to-t.from),0)>=l}function _h(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Rh(e,t){const n="string"===typeof t?[t]:t;return Object.keys(e).reduce(((t,r)=>(n.includes(r)||(t[r]=e[r]),t)),{})}function Dh(e,t){return jh(e,t,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},errorOnInvalidContent:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).errorOnInvalidContent})}function Ph(e,t){const n=xh(t,e.schema),{from:r,to:o,empty:i}=e.selection,s=[];i?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,(e=>{s.push(...e.marks)}));const a=s.find((e=>e.type.name===n.name));return a?{...a.attrs}:{}}function Lh(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}function $h(e,t){return fh(e,{from:0,to:e.content.size},t)}function Ih(e,t){const n=_h("string"===typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=Ud(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,(e=>{i.push(e)}));const s=i.reverse().find((e=>e.type.name===n.name));return s?{...s.attrs}:{}}(e,t):"mark"===n?Ph(e,t):{}}function zh(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach((t=>{const o=wh(n.resolve(e),t.type);o&&r.push({mark:t,...o})})):n.nodesBetween(e,t,((e,t)=>{e&&void 0!==(null===e||void 0===e?void 0:e.nodeSize)&&r.push(...e.marks.map((n=>({from:t,to:t+e.nodeSize,mark:n}))))})),r}function Bh(e,t,n){return Object.fromEntries(Object.entries(n).filter((n=>{let[r]=n;const o=e.find((e=>e.type===t&&e.name===r));return!!o&&o.attribute.keepOnSplit})))}function Fh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{empty:r,ranges:o}=e.selection,i=t?xh(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter((e=>!i||i.name===e.type.name)).find((e=>yh(e.attrs,n,{strict:!1})));let s=0;const a=[];if(o.forEach((t=>{let{$from:n,$to:r}=t;const o=n.pos,i=r.pos;e.doc.nodesBetween(o,i,((e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);s+=r-n,a.push(...e.marks.map((e=>({mark:e,from:n,to:r}))))}))})),0===s)return!1;const l=a.filter((e=>!i||i.name===e.mark.type.name)).filter((e=>yh(e.mark.attrs,n,{strict:!1}))).reduce(((e,t)=>e+t.to-t.from),0),c=a.filter((e=>!i||e.mark.type!==i&&e.mark.type.excludes(i))).reduce(((e,t)=>e+t.to-t.from),0);return(l>0?l+c:l)>=s}function Vh(e,t){const{nodeExtensions:n}=Vd(t),r=n.find((t=>t.name===e));if(!r)return!1;const o=Jd(Fd(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"===typeof o&&o.split(" ").includes("list")}function Hh(e){let{checkChildren:t=!0,ignoreWhitespace:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(r=e.text)&&void 0!==r?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let r=!0;return e.content.forEach((e=>{!1!==r&&(Hh(e,{ignoreWhitespace:n,checkChildren:t})||(r=!1))})),r}return!1}function Uh(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter((e=>null===t||void 0===t?void 0:t.includes(e.type.name)));e.tr.ensureMarks(r)}}const Wh=(e,t)=>{const n=Lh((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const o=e.doc.nodeAt(r);return n.node.type!==(null===o||void 0===o?void 0:o.type)||!Js(e.doc,n.pos)||(e.join(n.pos),!0)},qh=(e,t)=>{const n=Lh((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const o=e.doc.nodeAt(r);return n.node.type!==(null===o||void 0===o?void 0:o.type)||!Js(e.doc,r)||(e.join(r),!0)};var Kh=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame((()=>{var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())})),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:r}=e;const{selection:o}=n,{ranges:i}=o;return!r||(i.forEach((e=>{let{$from:r,$to:o}=e;t.doc.nodesBetween(r.pos,o.pos,((e,t)=>{if(e.type.isText)return;const{doc:r,mapping:o}=n,i=r.resolve(o.map(t)),s=r.resolve(o.map(t+e.nodeSize)),a=i.blockRange(s);if(!a)return;const l=Vs(a);if(e.type.isTextblock){const{defaultType:e}=i.parent.contentMatchAt(i.index());n.setNodeMarkup(a.start,e)}(l||0===l)&&n.lift(a,l)}))})),!0)},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return kd(t,n)},cut:(e,t)=>n=>{let{editor:r,tr:o}=n;const{state:i}=r,s=i.doc.slice(e.from,e.to);o.deleteRange(e.from,e.to);const a=o.mapping.map(t);return o.insert(a,s.content),o.setSelection(new ya(o.doc.resolve(a-1))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e;const{selection:r}=t,o=r.$anchor.node();if(o.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1){if(i.node(s).type===o.type){if(n){const e=i.before(s),n=i.after(s);t.delete(e,n).scrollIntoView()}return!0}}return!1},deleteNode:e=>t=>{let{tr:n,state:r,dispatch:o}=t;const i=Ud(e,r.schema),s=n.selection.$anchor;for(let e=s.depth;e>0;e-=1){if(s.node(e).type===i){if(o){const t=s.before(e),r=s.after(e);n.delete(t,r).scrollIntoView()}return!0}}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:r}=t;const{from:o,to:i}=e;return r&&n.delete(o,i),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return ld(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return xd(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n;const s=xh(e,o.schema),{doc:a,selection:l}=r,{$from:c,from:u,to:d}=l;if(i){const e=wh(c,s,t);if(e&&e.from<=u&&e.to>=d){const t=ya.create(a,e.from,e.to);r.setSelection(t)}}return!0}},first:e=>t=>{const n="function"===typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:r,view:o,tr:i,dispatch:s}=n;t={scrollIntoView:!0,...t};const a=()=>{(Th()||Eh())&&o.dom.focus(),requestAnimationFrame((()=>{r.isDestroyed||(o.focus(),(null===t||void 0===t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())}))};if(o.hasFocus()&&null===e||!1===e)return!0;if(s&&null===e&&!kh(r.state.selection))return a(),!0;const l=Ch(i.doc,e)||r.state.selection,c=r.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0}},forEach:(e,t)=>n=>e.every(((e,r)=>t(e,{...n,index:r}))),insertContent:(e,t)=>n=>{let{tr:r,commands:o}=n;return o.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)},insertContentAt:(e,t,n)=>r=>{let{tr:o,dispatch:i,editor:s}=r;var a;if(i){let r;n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};try{r=jh(t,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:null!==(a=n.errorOnInvalidContent)&&void 0!==a?a:s.options.enableContentCheck})}catch(wb){return s.emit("contentError",{editor:s,error:wb,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:i,to:l}="number"===typeof e?{from:e,to:e}:{from:e.from,to:e.to},c=!0,u=!0;if(("type"in r?[r]:r).forEach((e=>{e.check(),c=!!c&&(e.isText&&0===e.marks.length),u=!!u&&e.isBlock})),i===l&&u){const{parent:e}=o.doc.resolve(i);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(i-=1,l+=1)}let d;if(c){if(Array.isArray(t))d=t.map((e=>e.text||"")).join("");else if(t instanceof mi){let e="";t.forEach((t=>{t.text&&(e+=t.text)})),d=e}else d="object"===typeof t&&t&&t.text?t.text:t;o.insertText(d,i,l)}else d=r,o.replaceWith(i,l,d);n.updateSelection&&function(e,t,n){const r=e.steps.length-1;if(r<t)return;const o=e.steps[r];if(!(o instanceof $s||o instanceof Is))return;const i=e.mapping.maps[r];let s=0;i.forEach(((e,t,n,r)=>{0===s&&(s=r)})),e.setSelection(pa.near(e.doc.resolve(s),n))}(o,o.steps.length-1,-1),n.applyInputRules&&o.setMeta("applyInputRules",{from:i,text:d}),n.applyPasteRules&&o.setMeta("applyPasteRules",{from:i,text:d})}return!0},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return ud(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,r=e.selection;if(r instanceof ba){if(r.node.isTextblock||!Js(e.doc,r.to))return!1;n=r.to}else if(n=Qs(e.doc,r.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return gd(t,n)},joinItemBackward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{const e=Qs(t.doc,t.selection.$from.pos,-1);return null!==e&&void 0!==e&&(r.join(e,2),n&&n(r),!0)}catch{return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{const e=Qs(t.doc,t.selection.$from.pos,1);return null!==e&&void 0!==e&&(r.join(e,2),n&&n(r),!0)}catch{return!1}},joinTextblockBackward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let r=cd(e,n);if(!r)return!1;let o=fd(r);return!!o&&dd(e,o,t)})(t,n)},joinTextblockForward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let r=md(e,n);if(!r)return!1;let o=vd(r);return!!o&&dd(e,o,t)})(t,n)},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,r=e.selection,o=r instanceof ba;if(o){if(r.node.isTextblock||!Js(e.doc,r.from))return!1;n=r.from}else if(n=Qs(e.doc,r.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);o&&r.setSelection(ba.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0})(t,n)},keyboardShortcut:e=>t=>{let{editor:n,view:r,tr:o,dispatch:i}=t;const s=function(e){const t=e.split(/-(?!$)/);let n,r,o,i,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);Th()||Mh()?i=!0:r=!0}}return n&&(s=`Alt-${s}`),r&&(s=`Ctrl-${s}`),i&&(s=`Meta-${s}`),o&&(s=`Shift-${s}`),s}(e).split(/-(?!$)/),a=s.find((e=>!["Alt","Ctrl","Meta","Shift"].includes(e))),l=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction((()=>{r.someProp("handleKeyDown",(e=>e(r,l)))}));return null===c||void 0===c||c.steps.forEach((e=>{const t=e.map(o.mapping);t&&i&&o.maybeStep(t)})),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n;return!!Ah(r,Ud(e,r.schema),t)&&((e,t)=>{let{$from:n,$to:r}=e.selection,o=n.blockRange(r),i=o&&Vs(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)})(r,o)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return Sd(t,n)},liftListItem:e=>t=>{let{state:n,dispatch:r}=t;return $d(Ud(e,n.schema))(n,r)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return bd(t,n)},resetAttributes:(e,t)=>n=>{let{tr:r,state:o,dispatch:i}=n,s=null,a=null;const l=_h("string"===typeof e?e:e.name,o.schema);return!!l&&("node"===l&&(s=Ud(e,o.schema)),"mark"===l&&(a=xh(e,o.schema)),i&&r.selection.ranges.forEach((e=>{o.doc.nodesBetween(e.$from.pos,e.$to.pos,((e,n)=>{s&&s===e.type&&r.setNodeMarkup(n,void 0,Rh(e.attrs,t)),a&&e.marks.length&&e.marks.forEach((o=>{a===o.type&&r.addMark(n,n+e.nodeSize,a.create(Rh(o.attrs,t)))}))}))})),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,dispatch:n}=e;if(n){const e=new xa(t.doc);t.setSelection(e)}return!0},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return pd(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return yd(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,{$from:r,to:o}=e.selection,i=r.sharedDepth(o);return 0!=i&&(n=r.before(i),t&&t(e.tr.setSelection(ba.create(e.doc,n))),!0)})(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return jd(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return Od(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o=>{let{editor:i,tr:s,dispatch:a,commands:l}=o;var c,u;const{doc:d}=s;if("full"!==n.preserveWhitespace){const o=Dh(e,i.schema,n,{errorOnInvalidContent:null!==(c=r.errorOnInvalidContent)&&void 0!==c?c:i.options.enableContentCheck});return a&&s.replaceWith(0,d.content.size,o).setMeta("preventUpdate",!t),!0}return a&&s.setMeta("preventUpdate",!t),l.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(u=r.errorOnInvalidContent)&&void 0!==u?u:i.options.enableContentCheck})}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n;const{selection:s}=r,{empty:a,ranges:l}=s,c=xh(e,o.schema);if(i)if(a){const e=Ph(o,c);r.addStoredMark(c.create({...e,...t}))}else l.forEach((e=>{const n=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(n,i,((e,o)=>{const s=Math.max(o,n),a=Math.min(o+e.nodeSize,i);e.marks.find((e=>e.type===c))?e.marks.forEach((e=>{c===e.type&&r.addMark(s,a,c.create({...e.attrs,...t}))})):r.addMark(s,a,c.create(t))}))}));return function(e,t,n){var r;const{selection:o}=t;let i=null;if(kh(o)&&(i=o.$cursor),i){const t=null!==(r=e.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(t)||!t.some((e=>e.type.excludes(n)))}const{ranges:s}=o;return s.some((t=>{let{$from:r,$to:o}=t,i=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,o.pos,((e,t,r)=>{if(i)return!1;if(e.isInline){const t=!r||r.type.allowsMarkType(n),o=!!n.isInSet(e.marks)||!e.marks.some((e=>e.type.excludes(n)));i=t&&o}return!i})),i}))}(o,r,c)}},setMeta:(e,t)=>n=>{let{tr:r}=n;return r.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o,chain:i}=n;const s=Ud(e,r.schema);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),s.isTextblock?i().command((e=>{let{commands:n}=e;return!!Md(s,{...a,...t})(r)||n.clearNodes()})).command((e=>{let{state:n}=e;return Md(s,{...a,...t})(n,o)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){const{doc:t}=n,r=Sh(e,0,t.content.size),o=ba.create(t,r);n.setSelection(o)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){const{doc:t}=n,{from:r,to:o}="number"===typeof e?{from:e,to:e}:e,i=ya.atStart(t).from,s=ya.atEnd(t).to,a=Sh(r,i,s),l=Sh(o,i,s),c=ya.create(t,a,l);n.setSelection(c)}return!0},sinkListItem:e=>t=>{let{state:n,dispatch:r}=t;const o=Ud(e,n.schema);return(i=o,function(e,t){let{$from:n,$to:r}=e.selection,o=n.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==i));if(!o)return!1;let s=o.startIndex;if(0==s)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=i)return!1;if(t){let n=l.lastChild&&l.lastChild.type==a.type,r=mi.from(n?i.create():null),s=new xi(mi.from(i.create(null,mi.from(a.type.create(null,r)))),n?3:1,0),c=o.start,u=o.end;t(e.tr.step(new Is(c-(n?3:1),u,c,u,s,1,!0)).scrollIntoView())}return!0})(n,r);var i},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:r,dispatch:o,editor:i}=t;const{selection:s,doc:a}=n,{$from:l,$to:c}=s,u=Bh(i.extensionManager.attributes,l.node().type.name,l.node().attrs);if(s instanceof ba&&s.node.isBlock)return!(!l.parentOffset||!Ks(a,l.pos))&&(o&&(e&&Uh(r,i.extensionManager.splittableMarks),n.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=c.parentOffset===c.parent.content.size,h=0===l.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,f=Ks(n.doc,n.mapping.map(l.pos),1,p);if(p||f||!Ks(n.doc,n.mapping.map(l.pos),1,h?[{type:h}]:void 0)||(f=!0,p=h?[{type:h,attrs:u}]:void 0),o){if(f&&(s instanceof ya&&n.deleteSelection(),n.split(n.mapping.map(l.pos),1,p),h&&!d&&!l.parentOffset&&l.parent.type!==h)){const e=n.mapping.map(l.before()),t=n.doc.resolve(e);l.node(-1).canReplaceWith(t.index(),t.index()+1,h)&&n.setNodeMarkup(n.mapping.map(l.before()),h)}e&&Uh(r,i.extensionManager.splittableMarks),n.scrollIntoView()}return f}},splitListItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i,editor:s}=n;var a;const l=Ud(e,o.schema),{$from:c,$to:u}=o.selection,d=o.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const h=c.node(-1);if(h.type!==l)return!1;const p=s.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let e=mi.empty;const n=c.index(-1)?1:c.index(-2)?2:3;for(let t=c.depth-n;t>=c.depth-3;t-=1)e=mi.from(c.node(t).copy(e));const o=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,i={...Bh(p,c.node().type.name,c.node().attrs),...t},s=(null===(a=l.contentMatch.defaultType)||void 0===a?void 0:a.createAndFill(i))||void 0;e=e.append(mi.from(l.createAndFill(null,s)||void 0));const u=c.before(c.depth-(n-1));r.replace(u,c.after(-o),new xi(e,4-n,0));let d=-1;r.doc.nodesBetween(u,r.doc.content.size,((e,t)=>{if(d>-1)return!1;e.isTextblock&&0===e.content.size&&(d=t+1)})),d>-1&&r.setSelection(ya.near(r.doc.resolve(d))),r.scrollIntoView()}return!0}const f=u.pos===c.end()?h.contentMatchAt(0).defaultType:null,m={...Bh(p,h.type.name,h.attrs),...t},g={...Bh(p,c.node().type.name,c.node().attrs),...t};r.delete(c.pos,u.pos);const y=f?[{type:l,attrs:m},{type:f,attrs:g}]:[{type:l,attrs:m}];if(!Ks(r.doc,c.pos,2))return!1;if(i){const{selection:e,storedMarks:t}=o,{splittableMarks:n}=s.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();if(r.split(c.pos,2,y).scrollIntoView(),!a||!i)return!0;const l=a.filter((e=>n.includes(e.type.name)));r.ensureMarks(l)}return!0}},toggleList:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o=>{let{editor:i,tr:s,state:a,dispatch:l,chain:c,commands:u,can:d}=o;const{extensions:h,splittableMarks:p}=i.extensionManager,f=Ud(e,a.schema),m=Ud(t,a.schema),{selection:g,storedMarks:y}=a,{$from:v,$to:b}=g,w=v.blockRange(b),x=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const k=Lh((e=>Vh(e.type.name,h)))(g);if(w.depth>=1&&k&&w.depth-k.depth<=1){if(k.node.type===f)return u.liftListItem(m);if(Vh(k.node.type.name,h)&&f.validContent(k.node.content)&&l)return c().command((()=>(s.setNodeMarkup(k.pos,f),!0))).command((()=>Wh(s,f))).command((()=>qh(s,f))).run()}return n&&x&&l?c().command((()=>{const e=d().wrapInList(f,r),t=x.filter((e=>p.includes(e.type.name)));return s.ensureMarks(t),!!e||u.clearNodes()})).wrapInList(f,r).command((()=>Wh(s,f))).command((()=>qh(s,f))).run():c().command((()=>!!d().wrapInList(f,r)||u.clearNodes())).wrapInList(f,r).command((()=>Wh(s,f))).command((()=>qh(s,f))).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:o,commands:i}=r;const{extendEmptyMarkRange:s=!1}=n,a=xh(e,o.schema);return Fh(o,a,t)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,t)}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:o,commands:i}=r;const s=Ud(e,o.schema),a=Ud(t,o.schema),l=Ah(o,s,n);let c;return o.selection.$anchor.sameParent(o.selection.$head)&&(c=o.selection.$anchor.parent.attrs),l?i.setNode(a,c):i.setNode(s,{...c,...n})}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,commands:o}=n;const i=Ud(e,r.schema);return Ah(r,i,t)?o.lift(i):o.wrapIn(i,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e;const r=t.plugins;for(let o=0;o<r.length;o+=1){const e=r[o];let i;if(e.spec.isInputRules&&(i=e.getState(t))){if(n){const e=t.tr,n=i.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(i.text){const n=e.doc.resolve(i.from).marks();e.replaceWith(i.from,i.to,t.schema.text(i.text,n))}else e.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e;const{selection:r}=t,{empty:o,ranges:i}=r;return o||n&&i.forEach((e=>{t.removeMark(e.$from.pos,e.$to.pos)})),!0},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n;var s;const{extendEmptyMarkRange:a=!1}=t,{selection:l}=r,c=xh(e,o.schema),{$from:u,empty:d,ranges:h}=l;if(!i)return!0;if(d&&a){let{from:e,to:t}=l;const n=null===(s=u.marks().find((e=>e.type===c)))||void 0===s?void 0:s.attrs,o=wh(u,c,n);o&&(e=o.from,t=o.to),r.removeMark(e,t,c)}else h.forEach((e=>{r.removeMark(e.$from.pos,e.$to.pos,c)}));return r.removeStoredMark(c),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n,s=null,a=null;const l=_h("string"===typeof e?e:e.name,o.schema);return!!l&&("node"===l&&(s=Ud(e,o.schema)),"mark"===l&&(a=xh(e,o.schema)),i&&r.selection.ranges.forEach((e=>{const n=e.$from.pos,i=e.$to.pos;let l,c,u,d;r.selection.empty?o.doc.nodesBetween(n,i,((e,t)=>{s&&s===e.type&&(u=Math.max(t,n),d=Math.min(t+e.nodeSize,i),l=t,c=e)})):o.doc.nodesBetween(n,i,((e,o)=>{o<n&&s&&s===e.type&&(u=Math.max(o,n),d=Math.min(o+e.nodeSize,i),l=o,c=e),o>=n&&o<=i&&(s&&s===e.type&&r.setNodeMarkup(o,void 0,{...e.attrs,...t}),a&&e.marks.length&&e.marks.forEach((s=>{if(a===s.type){const l=Math.max(o,n),c=Math.min(o+e.nodeSize,i);r.addMark(l,c,a.create({...s.attrs,...t}))}})))})),c&&(void 0!==l&&r.setNodeMarkup(l,void 0,{...c.attrs,...t}),a&&c.marks.length&&c.marks.forEach((e=>{a===e.type&&r.addMark(u,d,a.create({...e.attrs,...t}))})))})),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&Hs(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}}(Ud(e,r.schema),t)(r,o)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n;return Ld(Ud(e,r.schema),t)(r,o)}}});const Jh=ph.create({name:"commands",addCommands:()=>({...Kh})}),Gh=ph.create({name:"drop",addProseMirrorPlugins(){return[new _a({key:new Pa("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),Qh=ph.create({name:"editable",addProseMirrorPlugins(){return[new _a({key:new Pa("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Xh=new Pa("focusEvents"),Yh=ph.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new _a({key:Xh,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Zh=ph.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first((e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command((e=>{let{tr:n}=e;const{selection:r,doc:o}=n,{empty:i,$anchor:s}=r,{pos:a,parent:l}=s,c=s.parent.isTextblock&&a>0?n.doc.resolve(a-1):s,u=c.parent.type.spec.isolating,d=s.pos-s.parentOffset,h=u&&1===c.parent.childCount?d===s.pos:pa.atStart(o).from===a;return!(!i||!l.type.isTextblock||l.textContent.length||!h||h&&"paragraph"===s.parent.type.name)&&t.clearNodes()})),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]})),t=()=>this.editor.commands.first((e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]})),n={Enter:()=>this.editor.commands.first((e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]})),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},o={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Th()||Mh()?o:r},addProseMirrorPlugins(){return[new _a({key:new Pa("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some((e=>e.getMeta("composition"))))return;const r=e.some((e=>e.docChanged))&&!t.doc.eq(n.doc),o=e.some((e=>e.getMeta("preventClearDocument")));if(!r||o)return;const{empty:i,from:s,to:a}=t.selection,l=pa.atStart(t.doc).from,c=pa.atEnd(t.doc).to;if(i||!(s===l&&a===c))return;if(!Hh(n.doc))return;const u=n.tr,d=Id({state:n,transaction:u}),{commands:h}=new zd({editor:this.editor,state:d});return h.clearNodes(),u.steps.length?u:void 0}})]}}),ep=ph.create({name:"paste",addProseMirrorPlugins(){return[new _a({key:new Pa("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),tp=ph.create({name:"tabindex",addProseMirrorPlugins(){return[new _a({key:new Pa("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class np{get name(){return this.node.type.name}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new np(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new np(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new np(e,this.editor)}get children(){const e=[];return this.node.content.forEach(((t,n)=>{const r=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,i=this.pos+n+(o?0:1),s=this.resolvedPos.doc.resolve(i);if(!r&&s.depth<=this.depth)return;const a=new np(s,this.editor,r,r?t:null);r&&(a.actualDepth=this.depth+1),e.push(new np(s,this.editor,r,r?t:null))})),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){const e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];if(e[o]!==t[o])break}}else n=r;r=r.parent}return n}querySelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;const o=Object.keys(t);return this.children.forEach((i=>{if(!(n&&r.length>0)){if(i.node.type.name===e){o.every((e=>t[e]===i.node.attrs[e]))&&r.push(i)}n&&r.length>0||(r=r.concat(i.querySelectorAll(e,t,n)))}})),r}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}class rp extends Bd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:e=>{let{error:t}=e;throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",(e=>{let{event:t,slice:n,moved:r}=e;return this.options.onDrop(t,n,r)})),this.on("paste",(e=>{let{event:t,slice:n}=e;return this.options.onPaste(t,n)})),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(null!==r)return r;const o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style"+(n?`-${n}`:""),""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=Kd(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach((e=>{const r="string"===typeof e?`${e}$`:e.key;n=t.filter((e=>!e.key.startsWith(r)))})),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[Qh,gh.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),Jh,Yh,Zh,tp,Gh,ep].filter((e=>"object"!==typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name])):[],...this.options.extensions].filter((e=>["extension","node","mark"].includes(null===e||void 0===e?void 0:e.type)));this.extensionManager=new hh(n,this)}createCommandManager(){this.commandManager=new zd({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Dh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(wb){if(!(wb instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(wb.message))throw wb;this.emit("contentError",{editor:this,error:wb,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter((e=>"collaboration"!==e.name)),this.createExtensionManager()}}),t=Dh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=Ch(t,this.options.autofocus);this.view=new qu(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ma.create({doc:t,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)})):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),o=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Ih(this.state,e)}isActive(e,t){const n="string"===typeof e?e:null,r="string"===typeof e?t:e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return Ah(e,null,n)||Fh(e,null,n);const r=_h(t,e.schema);return"node"===r?Ah(e,t,n):"mark"===r&&Fh(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return eh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return $h(this.state.doc,{blockSeparator:t,textSerializers:{...mh(this.schema),...n}})}get isEmpty(){return Hh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}$node(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new np(t,this)}get $doc(){return this.$pos(0)}}function op(e){return new nh({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t;const i=Jd(e.getAttributes,void 0,o);if(!1===i||null===i)return null;const{tr:s}=n,a=o[o.length-1],l=o[0];if(a){const t=l.search(/\S/),o=r.from+l.indexOf(a),c=o+a.length;if(zh(r.from,r.to,n.doc).filter((t=>t.mark.type.excluded.find((n=>n===e.type&&n!==t.mark.type)))).filter((e=>e.to>o)).length)return null;c<r.to&&s.delete(c,r.to),o>r.from&&s.delete(r.from+t,o);const u=r.from+t+a.length;s.addMark(r.from+t,u,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function ip(e){return new nh({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t;const i=Jd(e.getAttributes,void 0,o)||{},{tr:s}=n,a=r.from;let l=r.to;const c=e.type.create(i);if(o[1]){let e=a+o[0].lastIndexOf(o[1]);e>l?e=l:l=e+o[1].length;const t=o[0][o[0].length-1];s.insertText(t,a+o[0].length-1),s.replaceWith(e,l,c)}else if(o[0]){const t=e.type.isInline?a:a-1;s.insert(t,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(l))}s.scrollIntoView()}})}function sp(e){return new nh({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t;const i=n.doc.resolve(r.from),s=Jd(e.getAttributes,void 0,o)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,s)}})}function ap(e){return new nh({find:e.find,handler:t=>{let{state:n,range:r,match:o,chain:i}=t;const s=Jd(e.getAttributes,void 0,o)||{},a=n.tr.delete(r.from,r.to),l=a.doc.resolve(r.from).blockRange(),c=l&&Hs(l,e.type,s);if(!c)return null;if(a.wrap(l,c),e.keepMarks&&e.editor){const{selection:t,storedMarks:r}=n,{splittableMarks:o}=e.editor.extensionManager,i=r||t.$to.parentOffset&&t.$from.marks();if(i){const e=i.filter((e=>o.includes(e.type.name)));a.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,s).run()}const u=a.doc.resolve(r.from-1).nodeBefore;u&&u.type===e.type&&Js(a.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(o,u))&&a.join(r.from-1)}})}class lp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jd(Fd(this,"addOptions",{name:this.name}))),this.storage=Jd(Fd(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new lp(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>sh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new lp(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Jd(Fd(t,"addOptions",{name:t.name})),t.storage=Jd(Fd(t,"addStorage",{name:t.name,options:t.options})),t}}function cp(e){return new lh({find:e.find,handler:t=>{let{state:n,range:r,match:o,pasteEvent:i}=t;const s=Jd(e.getAttributes,void 0,o,i);if(!1===s||null===s)return null;const{tr:a}=n,l=o[o.length-1],c=o[0];let u=r.to;if(l){const t=c.search(/\S/),o=r.from+c.indexOf(l),i=o+l.length;if(zh(r.from,r.to,n.doc).filter((t=>t.mark.type.excluded.find((n=>n===e.type&&n!==t.mark.type)))).filter((e=>e.to>o)).length)return null;i<r.to&&a.delete(i,r.to),o>r.from&&a.delete(r.from+t,o),u=r.from+t+l.length,a.addMark(r.from+t,u,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}function up(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dp,hp={exports:{}},pp={};hp.exports=function(){if(dp)return pp;dp=1;var e=o,t="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},n=e.useState,r=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function a(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(o){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),l=n({inst:{value:o,getSnapshot:t}}),c=l[0].inst,u=l[1];return i((function(){c.value=o,c.getSnapshot=t,a(c)&&u({inst:c})}),[e,o,t]),r((function(){return a(c)&&u({inst:c}),e((function(){a(c)&&u({inst:c})}))}),[e]),s(o),o};return pp.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:l,pp}();var fp=hp.exports;const mp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):t&&(t.current=e)}))}},gp=e=>{let{contentComponent:t}=e;const n=fp.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return o.createElement(o.Fragment,null,Object.values(n))};class yp extends o.Component{constructor(e){var t;super(e),this.editorContentRef=o.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null===(t=e.editor)||void 0===t?void 0:t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){const e=new Set;let t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,r){t={...t,[n]:vt.createPortal(r.reactElement,r.element,n)},e.forEach((e=>e()))},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach((e=>e()))}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe((()=>{this.setState((e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0})),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()}))),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e)return;if(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...n}=this.props;return o.createElement(o.Fragment,null,o.createElement("div",{ref:mp(t,this.editorContentRef),...n}),(null===e||void 0===e?void 0:e.contentComponent)&&o.createElement(gp,{contentComponent:e.contentComponent}))}}const vp=(0,o.forwardRef)(((e,t)=>{const n=o.useMemo((()=>Math.floor(4294967295*Math.random()).toString()),[e.editor]);return o.createElement(yp,{key:n,innerRef:t,...e})})),bp=o.memo(vp);var wp,xp=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(o of t.entries())if(!n.has(o[0]))return!1;for(o of t.entries())if(!e(o[1],n.get(o[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(o of t.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(t[o]!==n[o])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!==o--;){var s=i[o];if(("_owner"!==s||!t.$$typeof)&&!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},kp=up(xp),Sp={exports:{}},Cp={};Sp.exports=function(){if(wp)return Cp;wp=1;var e=o,t=fp,n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,l=e.useDebugValue;return Cp.useSyncExternalStoreWithSelector=function(e,t,o,c,u){var d=i(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=a((function(){function e(e){if(!s){if(s=!0,r=e,e=c(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return i=t}return i=e}if(t=i,n(r,e))return t;var o=c(e);return void 0!==u&&u(t,o)?t:(r=e,i=o)}var r,i,s=!1,a=void 0===o?null:o;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]}),[t,o,c,u]);var p=r(e,d[0],d[1]);return s((function(){h.hasValue=!0,h.value=p}),[p]),l(p),p},Cp}();var Ep=Sp.exports;const Tp="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;class Np{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach((e=>e()))},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}}const Op="undefined"===typeof window,jp=Op||Boolean("undefined"!==typeof window&&window.next);class Mp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach((e=>e()))}getInitialEditor(){return void 0===this.options.current.immediatelyRender?Op||jp?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){var e=this;const t={...this.options.current,onBeforeCreate:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onBeforeCreate)||void 0===n?void 0:n.call(t,...o)},onBlur:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onBlur)||void 0===n?void 0:n.call(t,...o)},onCreate:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onCreate)||void 0===n?void 0:n.call(t,...o)},onDestroy:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onDestroy)||void 0===n?void 0:n.call(t,...o)},onFocus:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onFocus)||void 0===n?void 0:n.call(t,...o)},onSelectionUpdate:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onSelectionUpdate)||void 0===n?void 0:n.call(t,...o)},onTransaction:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onTransaction)||void 0===n?void 0:n.call(t,...o)},onUpdate:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onUpdate)||void 0===n?void 0:n.call(t,...o)},onContentError:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onContentError)||void 0===n?void 0:n.call(t,...o)},onDrop:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onDrop)||void 0===n?void 0:n.call(t,...o)},onPaste:function(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return null===(n=(t=e.options.current).onPaste)||void 0===n?void 0:n.call(t,...o)}};return new rp(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every((n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every(((e,n)=>{var r;return e===(null===(r=t.extensions)||void 0===r?void 0:r[n])})):e[n]===t[n])))}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?Mp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps)return void(this.previousDeps=e);const t=this.previousDeps.length===e.length&&this.previousDeps.every(((t,n)=>t===e[n]));if(t)return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout((()=>{this.isComponentMounted&&this.instanceId===e?t&&t.setOptions(this.options.current):t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))}),1)}}function Ap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,o.useRef)(e);n.current=e;const[r]=(0,o.useState)((()=>new Mp(n))),i=fp.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return(0,o.useDebugValue)(i),(0,o.useEffect)(r.onRender(t)),function(e){var t;const[n]=(0,o.useState)((()=>new Np(e.editor))),r=Ep.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!==(t=e.equalityFn)&&void 0!==t?t:kp);Tp((()=>n.watch(e.editor)),[e.editor,n]),(0,o.useDebugValue)(r)}({editor:i,selector:t=>{let{transactionNumber:n}=t;return!1===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===n?0:n+1}}),i}const _p=(0,o.createContext)({editor:null});_p.Consumer;const Rp=(0,o.createContext)({onDragStart:void 0}),Dp=()=>(0,o.useContext)(Rp);o.forwardRef(((e,t)=>{const{onDragStart:n}=Dp(),r=e.as||"div";return o.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})}));const Pp=/^\s*>\s$/,Lp=lp.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML(e){let{HTMLAttributes:t}=e;return["blockquote",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>e=>{let{commands:t}=e;return t.wrapIn(this.name)},toggleBlockquote:()=>e=>{let{commands:t}=e;return t.toggleWrap(this.name)},unsetBlockquote:()=>e=>{let{commands:t}=e;return t.lift(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ap({find:Pp,type:this.type})]}}),$p=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Ip=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,zp=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Bp=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Fp=ah.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML(e){let{HTMLAttributes:t}=e;return["strong",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleBold:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetBold:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[op({find:$p,type:this.type}),op({find:zp,type:this.type})]},addPasteRules(){return[cp({find:Ip,type:this.type}),cp({find:Bp,type:this.type})]}}),Vp="textStyle",Hp=/^\s*([-+*])\s$/,Up=lp.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML(e){let{HTMLAttributes:t}=e;return["ul",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>e=>{let{commands:t,chain:n}=e;return this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(Vp)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=ap({find:Hp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ap({find:Hp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Vp),editor:this.editor})),[e]}}),Wp=/(^|[^`])`([^`]+)`(?!`)/,qp=/(^|[^`])`([^`]+)`(?!`)/g,Kp=ah.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML(e){let{HTMLAttributes:t}=e;return["code",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleCode:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetCode:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[op({find:Wp,type:this.type})]},addPasteRules(){return[cp({find:qp,type:this.type})]}}),Jp=/^```([a-z]+)?[\s\n]$/,Gp=/^~~~([a-z]+)?[\s\n]$/,Qp=lp.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,r=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter((e=>e.startsWith(n))).map((e=>e.replace(n,"")))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["pre",Wd(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>t=>{let{commands:n}=t;return n.setNode(this.name,e)},toggleCodeBlock:e=>t=>{let{commands:n}=t;return n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;const{state:n}=t,{selection:r}=n,{$from:o,empty:i}=r;if(!i||o.parent.type!==this.type)return!1;const s=o.parentOffset===o.parent.nodeSize-2,a=o.parent.textContent.endsWith("\n\n");return!(!s||!a)&&t.chain().command((e=>{let{tr:t}=e;return t.delete(o.pos-2,o.pos),!0})).exitCode().run()},ArrowDown:e=>{let{editor:t}=e;if(!this.options.exitOnArrowDown)return!1;const{state:n}=t,{selection:r,doc:o}=n,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type)return!1;if(!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();if(void 0===a)return!1;return o.nodeAt(a)?t.commands.command((e=>{let{tr:t}=e;return t.setSelection(pa.near(o.resolve(a))),!0})):t.commands.exitCode()}}},addInputRules(){return[sp({find:Jp,type:this.type,getAttributes:e=>({language:e[1]})}),sp({find:Gp,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new _a({key:new Pa("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=null===o||void 0===o?void 0:o.mode;if(!n||!i)return!1;const{tr:s,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,"\n"));return s.replaceSelectionWith(this.type.create({language:i},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(ya.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),Xp=lp.create({name:"doc",topNode:!0,content:"block+"});function Yp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _a({view:t=>new Zp(t,e)})}class Zp{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map((t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}destroy(){this.handlers.forEach((e=>{let{name:t,handler:n}=e;return this.editorView.dom.removeEventListener(t,n)}))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let o=t.getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos);e={left:t.left-this.width/2,right:t.left+this.width/2,top:t.top,bottom:t.bottom}}let r,o,i=this.editorView.dom.offsetParent;if(this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!i||i==document.body&&"static"==getComputedStyle(i).position)r=-pageXOffset,o=-pageYOffset;else{let e=i.getBoundingClientRect();r=e.left-i.scrollLeft,o=e.top-i.scrollTop}this.element.style.left=e.left-r+"px",this.element.style.top=e.top-o+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t,e):r;if(t&&!o){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=Xs(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const ef=ph.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[Yp(this.options)]}});class tf extends pa{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return tf.valid(n)?new tf(n):pa.near(n)}content(){return xi.empty}eq(e){return e instanceof tf&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new tf(e.resolve(t.pos))}getBookmark(){return new nf(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!n&&tf.valid(e))return e;let r=e.pos,o=null;for(let n=e.depth;;n--){let i=e.node(n);if(t>0?e.indexAfter(n)<i.childCount:e.index(n)>0){o=i.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(tf.valid(s))return s}for(;;){let i=t>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!ba.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*t),n=!1;continue e}break}o=i,r+=t;let s=e.doc.resolve(r);if(tf.valid(s))return s}return null}}}tf.prototype.visible=!1,tf.findFrom=tf.findGapCursorFrom,pa.jsonID("gapcursor",tf);class nf{constructor(e){this.pos=e}map(e){return new nf(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return tf.valid(t)?new tf(t):pa.near(t)}}const rf=ad({ArrowLeft:of("horiz",-1),ArrowRight:of("horiz",1),ArrowUp:of("vert",-1),ArrowDown:of("vert",1)});function of(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){let i=e.selection,s=t>0?i.$to:i.$from,a=i.empty;if(i instanceof ya){if(!o.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}let l=tf.findGapCursorFrom(s,t,a);return!!l&&(r&&r(e.tr.setSelection(new tf(l))),!0)}}function sf(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!tf.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&ba.isSelectable(e.state.doc.nodeAt(o.inside)))&&(e.dispatch(e.state.tr.setSelection(new tf(r))),!0)}function af(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof tf))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=mi.empty;for(let s=r.length-1;s>=0;s--)o=mi.from(r[s].createAndFill(null,o));let i=e.state.tr.replace(n.pos,n.pos,new xi(o,0,0));return i.setSelection(ya.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function lf(e){if(!(e.selection instanceof tf))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",xu.create(e.doc,[vu.widget(e.selection.head,t,{key:"gapcursor"})])}const cf=ph.create({name:"gapCursor",addProseMirrorPlugins:()=>[new _a({props:{decorations:lf,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&tf.valid(n)?new tf(n):null,handleClick:sf,handleKeyDown:rf,handleDOMEvents:{beforeinput:af}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=Jd(Fd(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),uf=lp.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML(e){let{HTMLAttributes:t}=e;return["br",Wd(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>e=>{let{commands:t,chain:n,state:r,editor:o}=e;return t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:e,storedMarks:t}=r;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:s}=o.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();return n().insertContent({type:this.name}).command((e=>{let{tr:t,dispatch:n}=e;if(n&&a&&i){const e=a.filter((e=>s.includes(e.type.name)));t.ensureMarks(e)}return!0})).run()}))])}}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),df=lp.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map((e=>({tag:`h${e}`,attrs:{level:e}})))},renderHTML(e){let{node:t,HTMLAttributes:n}=e;return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Wd(this.options.HTMLAttributes,n),0]},addCommands(){return{setHeading:e=>t=>{let{commands:n}=t;return!!this.options.levels.includes(e.level)&&n.setNode(this.name,e)},toggleHeading:e=>t=>{let{commands:n}=t;return!!this.options.levels.includes(e.level)&&n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return this.options.levels.reduce(((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})})),{})},addInputRules(){return this.options.levels.map((e=>sp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}})))}});var hf=200,pf=function(){};pf.prototype.append=function(e){return e.length?(e=pf.from(e),!this.length&&e||e.length<hf&&this.leafAppend(e)||this.length<hf&&e.leafPrepend(this)||this.appendInner(e)):this},pf.prototype.prepend=function(e){return e.length?pf.from(e).append(this):this},pf.prototype.appendInner=function(e){return new mf(this,e)},pf.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?pf.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},pf.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},pf.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},pf.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},pf.from=function(e){return e instanceof pf?e:e&&e.length?new ff(e):pf.empty};var ff=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=hf)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=hf)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(pf);pf.empty=new ff([]);var mf=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(pf);const gf=pf;class yf{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,o=this.items.length;for(;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(n=this.remapping(o,this.items.length),r=n.maps.length);let i,s,a=e.tr,l=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(o,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new vf(e.map));let t,o=e.step.map(n.slice(r));o&&a.maybeStep(o).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new vf(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,s=new yf(this.items.slice(0,o).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:i}}addTransform(e,t,n,r){let o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),u=new vf(e.mapping.maps[c],l,t);(n=a&&a.merge(u))&&(u=n,c?o.pop():s=s.slice(0,s.length-1)),o.push(u),t&&(i++,t=void 0),r||(a=u)}let l=i-n.depth;return l>wf&&(s=function(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}(s,l),i-=l),new yf(s.append(o),i)}remapping(e,t){let n=new Os;return this.items.forEach(((t,r)=>{let o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new yf(this.items.append(e.map((e=>new vf(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((e=>{e.selection&&s--}),r);let a=t;this.items.forEach((t=>{let r=o.getMirror(--a);if(null==r)return;i=Math.min(i,r);let l=o.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(o.slice(a+1,r));c&&s++,n.push(new vf(l,i,c))}else n.push(new vf(l))}),r);let l=[];for(let d=t;d<i;d++)l.push(new vf(o.maps[d]));let c=this.items.slice(0,r).append(l).append(n),u=new yf(c,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach(((i,s)=>{if(s>=e)r.push(i),i.selection&&o++;else if(i.step){let e=i.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=i.selection&&i.selection.map(t.slice(n));a&&o++;let l,c=new vf(s.invert(),e,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else i.map&&n--}),this.items.length,0),new yf(gf.from(r.reverse()),o)}}yf.empty=new yf(gf.empty,0);class vf{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new vf(t.getMap().invert(),t,this.selection)}}}class bf{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}}const wf=20;function xf(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach(((e,n,r,o)=>t.push(r,o)));return t}function kf(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}let Sf=!1,Cf=null;function Ef(e){let t=e.plugins;if(Cf!=t){Sf=!1,Cf=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Sf=!0;break}}return Sf}const Tf=new Pa("history"),Nf=new Pa("closeHistory");function Of(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new _a({key:Tf,state:{init:()=>new bf(yf.empty,yf.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let o,i=n.getMeta(Tf);if(i)return i.historyState;n.getMeta(Nf)&&(e=new bf(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(Tf))return s.getMeta(Tf).redo?new bf(e.done.addTransform(n,void 0,r,Ef(t)),e.undone,xf(n.mapping.maps),e.prevTime,e.prevComposition):new bf(e.done,e.undone.addTransform(n,void 0,r,Ef(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new bf(e.done.rebased(n,o),e.undone.rebased(n,o),kf(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new bf(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),kf(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let o=n.getMeta("composition"),i=0==e.prevTime||!s&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),a=s?kf(e.prevRanges,n.mapping):xf(n.mapping.maps);return new bf(e.done.addTransform(n,i?t.selection.getBookmark():void 0,r,Ef(t)),yf.empty,a,n.time,null==o?e.prevComposition:o)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?Mf:"historyRedo"==n?Af:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function jf(e,t){return(n,r)=>{let o=Tf.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(r){let i=function(e,t,n){let r=Ef(t),o=Tf.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),l=new bf(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(Tf,{redo:n,historyState:l})}(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}const Mf=jf(!1,!0),Af=jf(!0,!0);jf(!1,!1),jf(!0,!1);const _f=ph.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>e=>{let{state:t,dispatch:n}=e;return Mf(t,n)},redo:()=>e=>{let{state:t,dispatch:n}=e;return Af(t,n)}}),addProseMirrorPlugins(){return[Of(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),Rf=lp.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",Wd(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>e=>{let{chain:t,state:n}=e;const{selection:r}=n,{$from:o,$to:i}=r,s=t();return 0===o.parentOffset?s.insertContentAt({from:Math.max(o.pos-1,0),to:i.pos},{type:this.name}):r instanceof ba?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command((e=>{let{tr:t,dispatch:n}=e;var r;if(n){const{$to:e}=t.selection,n=e.end();if(e.nodeAfter)e.nodeAfter.isTextblock?t.setSelection(ya.create(t.doc,e.pos+1)):e.nodeAfter.isBlock?t.setSelection(ba.create(t.doc,e.pos)):t.setSelection(ya.create(t.doc,e.pos));else{const o=null===(r=e.parent.type.contentMatch.defaultType)||void 0===r?void 0:r.create();o&&(t.insert(n,o),t.setSelection(ya.create(t.doc,n+1)))}t.scrollIntoView()}return!0})).run()}}},addInputRules(){return[ip({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),Df=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Pf=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Lf=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,$f=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,If=ah.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["em",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleItalic:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetItalic:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[op({find:Df,type:this.type}),op({find:Lf,type:this.type})]},addPasteRules(){return[cp({find:Pf,type:this.type}),cp({find:$f,type:this.type})]}}),zf=lp.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML(e){let{HTMLAttributes:t}=e;return["li",Wd(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Bf="textStyle",Ff=/^(\d+)\.\s$/,Vf=lp.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML(e){let{HTMLAttributes:t}=e;const{start:n,...r}=t;return 1===n?["ol",Wd(this.options.HTMLAttributes,r),0]:["ol",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>e=>{let{commands:t,chain:n}=e;return this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(Bf)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=ap({find:Ff,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ap({find:Ff,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Bf)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),Hf=lp.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML(e){let{HTMLAttributes:t}=e;return["p",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>e=>{let{commands:t}=e;return t.setNode(this.name)}}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Uf=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Wf=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,qf=ah.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["s",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleStrike:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetStrike:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[op({find:Uf,type:this.type})]},addPasteRules(){return[cp({find:Wf,type:this.type})]}}),Kf=lp.create({name:"text",group:"inline"}),Jf=ph.create({name:"starterKit",addExtensions(){const e=[];return!1!==this.options.bold&&e.push(Fp.configure(this.options.bold)),!1!==this.options.blockquote&&e.push(Lp.configure(this.options.blockquote)),!1!==this.options.bulletList&&e.push(Up.configure(this.options.bulletList)),!1!==this.options.code&&e.push(Kp.configure(this.options.code)),!1!==this.options.codeBlock&&e.push(Qp.configure(this.options.codeBlock)),!1!==this.options.document&&e.push(Xp.configure(this.options.document)),!1!==this.options.dropcursor&&e.push(ef.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&e.push(cf.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&e.push(uf.configure(this.options.hardBreak)),!1!==this.options.heading&&e.push(df.configure(this.options.heading)),!1!==this.options.history&&e.push(_f.configure(this.options.history)),!1!==this.options.horizontalRule&&e.push(Rf.configure(this.options.horizontalRule)),!1!==this.options.italic&&e.push(If.configure(this.options.italic)),!1!==this.options.listItem&&e.push(zf.configure(this.options.listItem)),!1!==this.options.orderedList&&e.push(Vf.configure(this.options.orderedList)),!1!==this.options.paragraph&&e.push(Hf.configure(this.options.paragraph)),!1!==this.options.strike&&e.push(qf.configure(this.options.strike)),!1!==this.options.text&&e.push(Kf.configure(this.options.text)),e}}),Gf=ah.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["u",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleUnderline:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetUnderline:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Qf=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Xf=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Yf=ah.create({name:"highlight",addOptions:()=>({multicolor:!1,HTMLAttributes:{}}),addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML:()=>[{tag:"mark"}],renderHTML(e){let{HTMLAttributes:t}=e;return["mark",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:e=>t=>{let{commands:n}=t;return n.setMark(this.name,e)},toggleHighlight:e=>t=>{let{commands:n}=t;return n.toggleMark(this.name,e)},unsetHighlight:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[op({find:Qf,type:this.type})]},addPasteRules(){return[cp({find:Xf,type:this.type})]}});function Zf(e){var t;const{char:n,allowSpaces:r,allowToIncludeChar:o,allowedPrefixes:i,startOfLine:s,$position:a}=e,l=r&&!o,c=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");const u=new RegExp(`\\s${c}$`),d=s?"^":"",h=o?"":c,p=l?new RegExp(`${d}${c}.*?(?=\\s${h}|$)`,"gm"):new RegExp(`${d}(?:^)?${c}[^\\s${h}]*`,"gm"),f=(null===(t=a.nodeBefore)||void 0===t?void 0:t.isText)&&a.nodeBefore.text;if(!f)return null;const m=a.pos-f.length,g=Array.from(f.matchAll(p)).pop();if(!g||void 0===g.input||void 0===g.index)return null;const y=g.input.slice(Math.max(0,g.index-1),g.index),v=new RegExp(`^[${null===i||void 0===i?void 0:i.join("")}\0]?$`).test(y);if(null!==i&&!v)return null;const b=m+g.index;let w=b+g[0].length;return l&&u.test(f.slice(w-1,w+1))&&(g[0]+=" ",w+=1),b<a.pos&&w>=a.pos?{range:{from:b,to:w},query:g[0].slice(n.length),text:g[0]}:null}const em=new Pa("suggestion");function tm(e){let t,{pluginKey:n=em,editor:r,char:o="@",allowSpaces:i=!1,allowToIncludeChar:s=!1,allowedPrefixes:a=[" "],startOfLine:l=!1,decorationTag:c="span",decorationClass:u="suggestion",command:d=()=>null,items:h=()=>[],render:p=()=>({}),allow:f=()=>!0,findSuggestionMatch:m=Zf}=e;const g=null===p||void 0===p?void 0:p(),y=new _a({key:n,view(){return{update:async(e,n)=>{var o,i,s,a,l,c,u;const p=null===(o=this.key)||void 0===o?void 0:o.getState(n),f=null===(i=this.key)||void 0===i?void 0:i.getState(e.state),m=p.active&&f.active&&p.range.from!==f.range.from,y=!p.active&&f.active,v=p.active&&!f.active,b=!y&&!v&&p.query!==f.query,w=y||m&&b,x=b||m,k=v||m&&b;if(!w&&!x&&!k)return;const S=k&&!w?p:f,C=e.dom.querySelector(`[data-decoration-id="${S.decorationId}"]`);t={editor:r,range:S.range,query:S.query,text:S.text,items:[],command:e=>d({editor:r,range:S.range,props:e}),decorationNode:C,clientRect:C?()=>{var t;const{decorationId:n}=null===(t=this.key)||void 0===t?void 0:t.getState(r.state),o=e.dom.querySelector(`[data-decoration-id="${n}"]`);return(null===o||void 0===o?void 0:o.getBoundingClientRect())||null}:null},w&&(null===(s=null===g||void 0===g?void 0:g.onBeforeStart)||void 0===s||s.call(g,t)),x&&(null===(a=null===g||void 0===g?void 0:g.onBeforeUpdate)||void 0===a||a.call(g,t)),(x||w)&&(t.items=await h({editor:r,query:S.query})),k&&(null===(l=null===g||void 0===g?void 0:g.onExit)||void 0===l||l.call(g,t)),x&&(null===(c=null===g||void 0===g?void 0:g.onUpdate)||void 0===c||c.call(g,t)),w&&(null===(u=null===g||void 0===g?void 0:g.onStart)||void 0===u||u.call(g,t))},destroy:()=>{var e;t&&(null===(e=null===g||void 0===g?void 0:g.onExit)||void 0===e||e.call(g,t))}}},state:{init:()=>({active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}),apply(e,t,n,c){const{isEditable:u}=r,{composing:d}=r.view,{selection:h}=e,{empty:p,from:g}=h,y={...t};if(y.composing=d,u&&(p||r.view.composing)){!(g<t.range.from||g>t.range.to)||d||t.composing||(y.active=!1);const e=m({char:o,allowSpaces:i,allowToIncludeChar:s,allowedPrefixes:a,startOfLine:l,$position:h.$from}),n=`id_${Math.floor(4294967295*Math.random())}`;e&&f({editor:r,state:c,range:e.range,isActive:t.active})?(y.active=!0,y.decorationId=t.decorationId?t.decorationId:n,y.range=e.range,y.query=e.query,y.text=e.text):y.active=!1}else y.active=!1;return y.active||(y.decorationId=null,y.range={from:0,to:0},y.query=null,y.text=null),y}},props:{handleKeyDown(e,t){var n;const{active:r,range:o}=y.getState(e.state);return r&&(null===(n=null===g||void 0===g?void 0:g.onKeyDown)||void 0===n?void 0:n.call(g,{view:e,event:t,range:o}))||!1},decorations(e){const{active:t,range:n,decorationId:r}=y.getState(e);return t?xu.create(e.doc,[vu.inline(n.from,n.to,{nodeName:c,class:u,"data-decoration-id":r})]):null}}});return y}const nm=new Pa("mention"),rm=lp.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText(e){let{options:t,node:n}=e;var r;return`${t.suggestion.char}${null!==(r=n.attrs.label)&&void 0!==r?r:n.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML(e){let{options:t,node:n}=e;var r;return["span",Wd(this.HTMLAttributes,t.HTMLAttributes),`${t.suggestion.char}${null!==(r=n.attrs.label)&&void 0!==r?r:n.attrs.id}`]},suggestion:{char:"@",pluginKey:nm,command:e=>{let{editor:t,range:n,props:r}=e;var o,i,s;const a=t.view.state.selection.$to.nodeAfter;(null===(o=null===a||void 0===a?void 0:a.text)||void 0===o?void 0:o.startsWith(" "))&&(n.to+=1),t.chain().focus().insertContentAt(n,[{type:this.name,attrs:r},{type:"text",text:" "}]).run(),null===(s=null===(i=t.view.dom.ownerDocument.defaultView)||void 0===i?void 0:i.getSelection())||void 0===s||s.collapseToEnd()},allow:e=>{let{state:t,range:n}=e;const r=t.doc.resolve(n.from),o=t.schema.nodes[this.name];return!!r.parent.type.contentMatch.matchType(o)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}}}),parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML(e){let{node:t,HTMLAttributes:n}=e;if(void 0!==this.options.renderLabel)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Wd({"data-type":this.name},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})];const r={...this.options};r.HTMLAttributes=Wd({"data-type":this.name},this.options.HTMLAttributes,n);const o=this.options.renderHTML({options:r,node:t});return"string"===typeof o?["span",Wd({"data-type":this.name},this.options.HTMLAttributes,n),o]:o},renderText(e){let{node:t}=e;return void 0!==this.options.renderLabel?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel({options:this.options,node:t})):this.options.renderText({options:this.options,node:t})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command((e=>{let{tr:t,state:n}=e,r=!1;const{selection:o}=n,{empty:i,anchor:s}=o;return!!i&&(n.doc.nodesBetween(s-1,s,((e,n)=>{if(e.type.name===this.name)return r=!0,t.insertText(this.options.deleteTriggerWithBackspace?"":this.options.suggestion.char||"",n,n+e.nodeSize),!1})),r)}))}},addProseMirrorPlugins(){return[tm({editor:this.editor,...this.options.suggestion})]}}),om=ah.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{},mergeNestedSpanStyles:!1}),parseHTML(){return[{tag:"span",getAttrs:e=>!!e.hasAttribute("style")&&(this.options.mergeNestedSpanStyles&&(e=>{if(!e.children.length)return;const t=e.querySelectorAll("span");t&&t.forEach((e=>{var t,n;const r=e.getAttribute("style"),o=null===(n=null===(t=e.parentElement)||void 0===t?void 0:t.closest("span"))||void 0===n?void 0:n.getAttribute("style");e.setAttribute("style",`${o};${r}`)}))})(e),{})}]},renderHTML(e){let{HTMLAttributes:t}=e;return["span",Wd(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>e=>{let{tr:t}=e;const{selection:n}=t;return t.doc.nodesBetween(n.from,n.to,((e,n)=>{if(e.isTextblock)return!0;e.marks.filter((e=>e.type===this.type)).some((e=>Object.values(e.attrs).some((e=>!!e))))||t.removeMark(n,n+e.nodeSize,this.type)})),!0}}}}),im=e=>{let{apiUrl:t,token:n,initialContent:r,onChange:o}=e;const i=Ap({extensions:[Xp,om,Jf,Gf,qf,Yf,rm.configure({HTMLAttributes:{class:"mention-link"},suggestion:{char:"@",startOfLine:!1,items:async e=>{let{query:r}=e;if(!r)return[];try{return(await Qr.get(`${t}/api/users/search?query=${r}`,{headers:{Authorization:`Bearer ${n}`}})).data.map((e=>({id:e._id,label:e.username})))}catch(o){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0438\u0441\u043a\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439:",o),[]}},render:()=>{let e;return{onStart:t=>{var n;e=document.createElement("div"),e.className="mention-dropdown",t.items.forEach((n=>{const r=document.createElement("div");r.className="mention-item",r.textContent=`@${n.label}`,r.onclick=()=>t.command(n),e.appendChild(r)}));const r=null===(n=t.clientRect)||void 0===n?void 0:n.call(t);r&&(e.style.position="absolute",e.style.top=`${r.top+window.scrollY+30}px`,e.style.left=`${r.left+window.scrollX}px`,e.style.zIndex=9999),document.body.appendChild(e)},onUpdate(t){e&&(e.innerHTML="",t.items.forEach((n=>{const r=document.createElement("div");r.className="mention-item",r.textContent=`@${n.label}`,r.onclick=()=>t.command(n),e.appendChild(r)})))},onExit(){var t;null===(t=e)||void 0===t||t.remove()}}}}})],content:r||"",onUpdate:e=>{let{editor:t}=e;o(t.getJSON())}});return(0,Xr.jsx)(bp,{editor:i})},sm=e=>{let{content:t}=e;const n=Ap({editable:!1,extensions:[Jf,Gf,qf,Yf,rm.configure({HTMLAttributes:{class:"mention"}})],content:t});return n?(0,Xr.jsx)(bp,{editor:n}):null},am=e=>{let{profile:t,groupName:n}=e;return(0,Xr.jsxs)("div",{className:"profile-details-tab",children:[(0,Xr.jsx)("h3",{children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),(0,Xr.jsxs)("div",{className:"details-contacts",children:[(0,Xr.jsxs)("p",{children:["Email:",(0,Xr.jsxs)("strong",{children:[" ",t.email||"\u041d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"]})]}),(0,Xr.jsxs)("p",{children:["\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430:",(0,Xr.jsxs)("strong",{children:[" ",t.phone||"\u041d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"]})]})]}),(0,Xr.jsxs)("div",{className:"details-learning",children:[(0,Xr.jsxs)("p",{children:[(0,Xr.jsx)("strong",{children:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f:"})," ",t.direction||"--"]}),(0,Xr.jsxs)("p",{children:[(0,Xr.jsx)("strong",{children:"\u041a\u0443\u0440\u0441:"})," ",t.course||"--"]}),(0,Xr.jsxs)("p",{children:[(0,Xr.jsx)("strong",{children:"\u0413\u0440\u0443\u043f\u043f\u0430:"})," ",n||"--"]})]}),t.curator&&(0,Xr.jsxs)("div",{className:"curator-card",children:[(0,Xr.jsx)("h4",{children:"\u041a\u0443\u0440\u0430\u0442\u043e\u0440"}),(0,Xr.jsxs)("div",{className:"curator-container",children:[(0,Xr.jsx)("div",{className:"curator-container-left",children:(0,Xr.jsx)("img",{src:t.curator.avatar,alt:"\u0430\u0432\u0430\u0442\u0430\u0440 \u043a\u0443\u0440\u0430\u0442\u043e\u0440\u0430",className:"curator-avatar"})}),(0,Xr.jsxs)("div",{className:"curator-container-right",children:[(0,Xr.jsxs)(ot,{to:`/profile/${t.curator._id}`,children:["\ud83d\udc64 ",t.curator.username]}),(0,Xr.jsxs)("p",{children:["\ud83d\udce7 ",t.curator.email||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,Xr.jsxs)("p",{children:["\ud83d\udcde ",t.curator.phone||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,Xr.jsxs)("p",{children:["\ud83d\udee1\ufe0f \u0420\u043e\u043b\u044c:"," ","teacher"===t.curator.role?"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c":"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440"]})]})]})]})]})},lm=e=>{var t,n;let{user:r,token:i,apiUrl:s}=e;const{id:a}=re(),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(""),[f,m]=(0,o.useState)(!0),[g,y]=(0,o.useState)((null===r||void 0===r?void 0:r.avatar)||""),v=(0,o.useRef)(null),[b,w]=(0,o.useState)(null),[x,k]=(0,o.useState)([]),[S,C]=(0,o.useState)(!1),[E,T]=(0,o.useState)(!1),[N,O]=(0,o.useState)(""),j=ne(),M=(null===r||void 0===r?void 0:r._id)===a,A=x.filter((e=>{var t;return null===(t=u.badges)||void 0===t?void 0:t.includes(e._id)})),_=Z(),R=new URLSearchParams(_.search).get("tab")||"profile";(0,o.useEffect)((()=>{m(!0);(async()=>{try{const e=await Qr.get(`${s}/api/users/${a}`,{headers:{Authorization:`Bearer ${i}`}});if(d(e.data),"student"===e.data.role&&e.data.groupId){const t=await Qr.get(`${s}/api/groups/${e.data.groupId}`,{headers:{Authorization:`Bearer ${i}`}});p(t.data.name),y(e.data.avatar)}const t=await Qr.post(`${s}/api/users/${a}/update-rating`,null,{headers:{Authorization:`Bearer ${i}`}});void 0!==t.data.rating&&w(t.data.rating);const n=await Qr.get(`${s}/api/badges`,{headers:{Authorization:`Bearer ${i}`}});if(k(n.data),"student"===e.data.role&&e.data.groupId){const t=await Qr.get(`${s}/api/groups/${e.data.groupId}`,{headers:{Authorization:`Bearer ${i}`}});d((e=>({...e,direction:t.data.direction,course:t.data.course,groupName:t.data.name,curator:t.data.curator})))}}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f:",e)}finally{m(!1)}})()}),[a,s,i]),(0,o.useEffect)((()=>{y(g||"https://res.cloudinary.com/dbw9zoxts/image/upload/v1743674361/avatars/nufw7lvuhkqy9jgjorbv.png")}),[r]),(0,o.useEffect)((()=>{null!==u&&void 0!==u&&u.description&&O(u.description)}),[null===u||void 0===u?void 0:u.description]),(0,o.useEffect)((()=>{M||"details"!==R||j(`/profile/${a}?tab=profile`)}),[M,R,j,a]);return f||!u?(0,Xr.jsx)(io,{className:"profile-loading"}):u?("details"===R||Xr.Fragment,(0,Xr.jsxs)("div",{className:"user-profile",children:[(0,Xr.jsx)("button",{onClick:()=>j(-1),className:"back-button",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),M&&(0,Xr.jsxs)("div",{className:"profile-tabs",children:[(0,Xr.jsx)("button",{className:"profile-tab-button "+("profile"===R?"active":""),onClick:()=>j(`/profile/${a}?tab=profile`),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,Xr.jsx)("button",{className:"details-tab-button "+("details"===R?"active":""),onClick:()=>j(`/profile/${a}?tab=details`),children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e"})]}),"details"===R?(0,Xr.jsx)(am,{profile:u,groupName:h}):(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsxs)("div",{className:"profile-card",children:[(0,Xr.jsx)("div",{className:"profile-avatar",children:M?(0,Xr.jsxs)("div",{children:[(0,Xr.jsx)("img",{src:g||"https://res.cloudinary.com/dbw9zoxts/image/upload/v1743674361/avatars/nufw7lvuhkqy9jgjorbv.png",alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",onClick:()=>{v.current.click()},className:"avatar-img self",style:{cursor:"pointer"}}),(0,Xr.jsx)("input",{type:"file",accept:"image/*",ref:v,onChange:async e=>{const t=e.target.files[0];if(t)try{const e=new FormData;e.append("avatar",t);const n=(await Qr.post(`${s}/api/users/upload-avatar`,e,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"multipart/form-data"}})).data.url;await Qr.patch(`${s}/api/users/avatar`,{avatarUrl:n},{headers:{Authorization:`Bearer ${i}`}}),r.avatar=n,y(n),localStorage.setItem("user",JSON.stringify({...r}))}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0430\u0432\u0430\u0442\u0430\u0440\u0430:",n)}},style:{display:"none"}})]}):(0,Xr.jsx)("img",{src:u.avatar||"https://res.cloudinary.com/dbw9zoxts/image/upload/v1743674361/avatars/nufw7lvuhkqy9jgjorbv.png",alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",className:"avatar-img"})}),(0,Xr.jsxs)("div",{className:"profile-info",children:[(0,Xr.jsxs)("div",{className:"profile-name",children:[u.username," ","67ab1aa0af53f6eca8443d6e"===u._id&&(0,Xr.jsx)(oi,{color:"#faa307",height:"20px",style:{transform:"translateY(5px)"}}),M&&(0,Xr.jsx)("span",{className:"self-label",children:"(\u0432\u044b)"})," "]}),(0,Xr.jsx)("div",{className:"badge-list-profile",children:((null===(t=u.visibleBadges)||void 0===t?void 0:t.length)>0||M)&&(0,Xr.jsxs)("div",{className:"profile-badges",children:[null===(n=u.visibleBadges)||void 0===n?void 0:n.map((e=>x.find((t=>t._id===e)))).filter(Boolean).map((e=>(0,Xr.jsx)("div",{className:"profile-badge",title:e.name,children:(0,Xr.jsx)("img",{src:e.icon,alt:e.name})},e._id))),M&&(0,Xr.jsx)("div",{className:"profile-badge add-badge",onClick:()=>C(!0),title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u043a\u0438",children:(0,Xr.jsx)(ii,{color:"gray"})}),S&&(0,Xr.jsxs)("div",{className:"badge-picker",children:[(0,Xr.jsx)("h4",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e 5 \u0437\u043d\u0430\u0447\u043a\u043e\u0432"}),(0,Xr.jsx)("div",{className:"badge-options",children:A.map((e=>{var t;const n=null===(t=u.visibleBadges)||void 0===t?void 0:t.includes(e._id);return(0,Xr.jsx)("div",{className:"badge-option "+(n?"selected":""),onClick:()=>(e=>{let t=[...u.visibleBadges||[]];t=t.filter((e=>"string"===typeof e)),t.includes(e._id)?t=t.filter((t=>t!==e._id)):t.length<5&&t.push(e._id),d((e=>({...e,visibleBadges:t})))})(e),children:(0,Xr.jsx)("img",{src:e.icon,alt:e.name})},e._id)}))}),(0,Xr.jsxs)("div",{className:"badge-picker-button-container",children:[(0,Xr.jsx)("button",{onClick:async()=>{try{const e=u.visibleBadges.filter((e=>"string"===typeof e));await Qr.put(`${s}/api/users/${r._id}/update-visible-badges`,{visibleBadges:e},{headers:{Authorization:`Bearer ${i}`}}),Io.success("\u0417\u043d\u0430\u0447\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b!"),C(!1)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u043d\u0430\u0447\u043a\u043e\u0432",e),Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0437\u043d\u0430\u0447\u043a\u043e\u0432")}},children:"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>C(!1),children:"\u2716 \u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})]})}),(0,Xr.jsx)("p",{children:(0,Xr.jsxs)("small",{children:[(0,Xr.jsx)("strong",{children:"ID:"})," ",u._id]})}),(0,Xr.jsxs)("p",{children:[(0,Xr.jsx)("strong",{children:"\u0421\u0442\u0430\u0442\u0443\u0441:"})," ","student"===u.role?"\u0423\u0447\u0435\u043d\u0438\u043a":"teacher"===u.role?"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c":"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440"]}),"student"===u.role&&(0,Xr.jsxs)("p",{children:[(0,Xr.jsx)("strong",{children:"\u0413\u0440\u0443\u043f\u043f\u0430:"})," ",h||"\u2014"]}),(0,Xr.jsxs)("div",{className:"profile-rating",children:[(0,Xr.jsx)("p",{children:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433:"}),"67ab1aa0af53f6eca8443d6e"!==u._id?"student"===u.role?(0,Xr.jsx)("div",{className:"stars",style:{transform:"translateY(3px)"},children:[...Array(5)].map(((e,t)=>{const n=t+1<=b,r=t+.5===b;return(0,Xr.jsx)("span",{children:n?(0,Xr.jsx)(si,{className:"text-yellow-400 w-5 h-5",color:"#faa307",fill:"#ffba08"}):r?(0,Xr.jsx)(si,{className:"text-yellow-400 w-5 h-5 opacity-50",color:"#faa307",fill:"#ffba08",opacity:"50%"}):(0,Xr.jsx)(si,{className:"text-gray-300 w-5 h-5",color:"gray"})},t)}))}):(0,Xr.jsx)("div",{className:"stars",style:{transform:"translateY(3px)"},children:[...Array(5)].map(((e,t)=>(0,Xr.jsx)("span",{children:(0,Xr.jsx)(si,{color:"#00b4d8",fill:"#48cae4"})},t)))}):(0,Xr.jsx)("div",{className:"stars",style:{transform:"translateY(3px)"},children:[...Array(5)].map(((e,t)=>(0,Xr.jsx)("span",{children:(0,Xr.jsx)(si,{color:"#c9184a",fill:"#ff4d6d"})},t)))})]}),M&&(0,Xr.jsx)(ot,{to:`/profile/${r._id}/settings`,style:{textDecoration:"none",color:"black",cursor:"pointer"},children:(0,Xr.jsx)(ai,{})}),!M&&(0,Xr.jsx)("button",{onClick:()=>c(!0),children:"\u0420\u0435\u043f\u043e\u0440\u0442"})]})]}),l&&(0,Xr.jsx)(ci,{isOpen:l,onClose:()=>c(!1),onSubmit:async(e,t)=>{try{await Qr.post(`${s}/api/reports`,{targetId:e,message:t},{headers:{Authorization:`Bearer ${i}`}}),Io.success("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430")}catch(n){Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0436\u0430\u043b\u043e\u0431\u044b")}},targetId:u._id}),(0,Xr.jsxs)("div",{className:"description-container",children:[(0,Xr.jsxs)("div",{className:"description-header",children:[(0,Xr.jsx)("h3",{children:"\u041e \u0441\u0435\u0431\u0435"}),M&&!E&&(0,Xr.jsx)("button",{onClick:()=>T(!0),className:"description-edit-button",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:(0,Xr.jsx)(li,{height:"20px",width:"20px"})})]}),E?M&&(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)(im,{apiUrl:s,token:i,initialContent:u.description,onChange:e=>O(e)}),(0,Xr.jsxs)("div",{className:"desc-buttons",children:[(0,Xr.jsx)("button",{onClick:async()=>{try{await Qr.put(`${s}/api/users/${r._id}/update-description`,{description:N},{headers:{Authorization:`Bearer ${i}`}}),d((e=>({...e,description:N}))),T(!1),Io.success("\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e!")}catch(e){Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",e)}},children:"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>T(!1),children:"\u2716 \u041e\u0442\u043c\u0435\u043d\u0430"})]})]}):u.description?(0,Xr.jsx)("div",{className:"profile-description",children:(0,Xr.jsx)(sm,{content:u.description})}):(0,Xr.jsx)("div",{className:"no-description",children:M?"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e.":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442."})]}),u.allowComments&&(0,Xr.jsx)(ui,{apiUrl:s,token:i,targetUserId:u._id,currentUser:r})]})]})):(0,Xr.jsx)("div",{className:"profile-not-found",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})};var cm,um;function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dm.apply(null,arguments)}function hm(e,t){let{title:n,titleId:r,...i}=e;return o.createElement("svg",dm({viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),cm||(cm=o.createElement("defs",null,o.createElement("style",null,".cls-1{fill:black;}"))),n?o.createElement("title",{id:r},n):null,um||(um=o.createElement("g",{"data-name":"Layer 19",id:"Layer_19"},o.createElement("path",{className:"cls-1",d:"M16,17a8,8,0,1,1,8-8A8,8,0,0,1,16,17ZM16,3a6,6,0,1,0,6,6A6,6,0,0,0,16,3Z"}),o.createElement("path",{className:"cls-1",d:"M23,31H9a5,5,0,0,1-5-5V22a1,1,0,0,1,.49-.86l5-3a1,1,0,0,1,1,1.72L6,22.57V26a3,3,0,0,0,3,3H23a3,3,0,0,0,3-3V22.57l-4.51-2.71a1,1,0,1,1,1-1.72l5,3A1,1,0,0,1,28,22v4A5,5,0,0,1,23,31Z"}))))}const pm=o.forwardRef(hm);n.p;var fm,mm,gm,ym,vm,bm,wm,xm,km;function Sm(){return Sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sm.apply(null,arguments)}function Cm(e,t){let{title:n,titleId:r,...i}=e;return o.createElement("svg",Sm({id:"Icons",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?o.createElement("title",{id:r},n):null,fm||(fm=o.createElement("defs",null,o.createElement("style",null,".cls-1{fill:#232323;}"))),mm||(mm=o.createElement("path",{className:"cls-1",d:"M20,2H19V1a1,1,0,0,0-2,0V2H7V1A1,1,0,0,0,5,1V2H4A4,4,0,0,0,0,6V20a4,4,0,0,0,4,4H20a4,4,0,0,0,4-4V6A4,4,0,0,0,20,2Zm2,18a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H5V5A1,1,0,0,0,7,5V4H17V5a1,1,0,0,0,2,0V4h1a2,2,0,0,1,2,2Z"})),gm||(gm=o.createElement("path",{className:"cls-1",d:"M19,7H5A1,1,0,0,0,5,9H19a1,1,0,0,0,0-2Z"})),ym||(ym=o.createElement("path",{className:"cls-1",d:"M7,12H5a1,1,0,0,0,0,2H7a1,1,0,0,0,0-2Z"})),vm||(vm=o.createElement("path",{className:"cls-1",d:"M7,17H5a1,1,0,0,0,0,2H7a1,1,0,0,0,0-2Z"})),bm||(bm=o.createElement("path",{className:"cls-1",d:"M13,12H11a1,1,0,0,0,0,2h2a1,1,0,0,0,0-2Z"})),wm||(wm=o.createElement("path",{className:"cls-1",d:"M13,17H11a1,1,0,0,0,0,2h2a1,1,0,0,0,0-2Z"})),xm||(xm=o.createElement("path",{className:"cls-1",d:"M19,12H17a1,1,0,0,0,0,2h2a1,1,0,0,0,0-2Z"})),km||(km=o.createElement("path",{className:"cls-1",d:"M19,17H17a1,1,0,0,0,0,2h2a1,1,0,0,0,0-2Z"})))}const Em=o.forwardRef(Cm);n.p;var Tm;function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nm.apply(null,arguments)}function Om(e,t){let{title:n,titleId:r,...i}=e;return o.createElement("svg",Nm({viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?o.createElement("title",{id:r},n):null,Tm||(Tm=o.createElement("g",{"data-name":"menu ",id:"menu_"},o.createElement("path",{d:"M29,6H3A1,1,0,0,0,3,8H29a1,1,0,0,0,0-2Z"}),o.createElement("path",{d:"M3,17H16a1,1,0,0,0,0-2H3a1,1,0,0,0,0,2Z"}),o.createElement("path",{d:"M25,24H3a1,1,0,0,0,0,2H25a1,1,0,0,0,0-2Z"}))))}const jm=o.forwardRef(Om);n.p;var Mm,Am;function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_m.apply(null,arguments)}function Rm(e,t){let{title:n,titleId:r,...i}=e;return o.createElement("svg",_m({width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?o.createElement("title",{id:r},n):null,Mm||(Mm=o.createElement("path",{d:"M18.7491 9.70957V9.00497C18.7491 5.13623 15.7274 2 12 2C8.27256 2 5.25087 5.13623 5.25087 9.00497V9.70957C5.25087 10.5552 5.00972 11.3818 4.5578 12.0854L3.45036 13.8095C2.43882 15.3843 3.21105 17.5249 4.97036 18.0229C9.57274 19.3257 14.4273 19.3257 19.0296 18.0229C20.789 17.5249 21.5612 15.3843 20.5496 13.8095L19.4422 12.0854C18.9903 11.3818 18.7491 10.5552 18.7491 9.70957Z",stroke:"#1C274C",strokeWidth:1.5})),Am||(Am=o.createElement("path",{d:"M7.5 19C8.15503 20.7478 9.92246 22 12 22C14.0775 22 15.845 20.7478 16.5 19",stroke:"#1C274C",strokeWidth:1.5,strokeLinecap:"round"})))}const Dm=o.forwardRef(Rm);n.p;function Pm(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function Lm(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function $m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map((t=>{const r=Lm(t,e);return n||"function"!=typeof r||(n=!0),r}));if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():Lm(t[e],null)}}}}function Im(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.useCallback($m(...t),t)}function zm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const r=()=>{const t=n.map((e=>o.createContext(e)));return function(n){const r=n?.[e]||t;return o.useMemo((()=>({[`__scope${e}`]:{...n,[e]:r}})),[n,r])}};return r.scopeName=e,[function(t,r){const i=o.createContext(r),s=n.length;n=[...n,r];const a=t=>{const{scope:n,children:r,...a}=t,l=n?.[e]?.[s]||i,c=o.useMemo((()=>a),Object.values(a));return(0,Xr.jsx)(l.Provider,{value:c,children:r})};return a.displayName=t+"Provider",[a,function(n,a){const l=a?.[e]?.[s]||i,c=o.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Bm(r,...t)]}function Bm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[0];if(1===t.length)return r;const i=()=>{const e=t.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(t){const n=e.reduce(((e,n)=>{let{useScope:r,scopeName:o}=n;return{...e,...r(t)[`__scope${o}`]}}),{});return o.useMemo((()=>({[`__scope${r.scopeName}`]:n})),[n])}};return i.scopeName=r.scopeName,i}function Fm(e){const t=Vm(e),n=o.forwardRef(((e,n)=>{const{children:r,...i}=e,s=o.Children.toArray(r),a=s.find(Wm);if(a){const e=a.props.children,r=s.map((t=>t===a?o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null:t));return(0,Xr.jsx)(t,{...i,ref:n,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null})}return(0,Xr.jsx)(t,{...i,ref:n,children:r})}));return n.displayName=`${e}.Slot`,n}function Vm(e){const t=o.forwardRef(((e,t)=>{const{children:n,...r}=e;if(o.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=function(){i(...arguments),o(...arguments)}:o&&(n[r]=o):"style"===r?n[r]={...o,...i}:"className"===r&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==o.Fragment&&(i.ref=t?$m(t,e):e),o.cloneElement(n,i)}return o.Children.count(n)>1?o.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var Hm=Symbol("radix.slottable");function Um(e){const t=e=>{let{children:t}=e;return(0,Xr.jsx)(Xr.Fragment,{children:t})};return t.displayName=`${e}.Slottable`,t.__radixId=Hm,t}function Wm(e){return o.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Hm}var qm=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const n=Fm(`Primitive.${t}`),r=o.forwardRef(((e,r)=>{const{asChild:o,...i}=e,s=o?n:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,Xr.jsx)(s,{...i,ref:r})}));return r.displayName=`Primitive.${t}`,{...e,[t]:r}}),{});function Km(e){const t=o.useRef(e);return o.useEffect((()=>{t.current=e})),o.useMemo((()=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current?.(...n)}),[])}var Jm,Gm="dismissableLayer.update",Qm="dismissableLayer.pointerDownOutside",Xm="dismissableLayer.focusOutside",Ym=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zm=o.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...c}=e,u=o.useContext(Ym),[d,h]=o.useState(null),p=d?.ownerDocument??globalThis?.document,[,f]=o.useState({}),m=Im(t,(e=>h(e))),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),b=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,x=b>=v,k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=Km(e),r=o.useRef(!1),i=o.useRef((()=>{}));return o.useEffect((()=>{const e=e=>{if(e.target&&!r.current){let r=function(){ng(Qm,n,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}}),[t,n]),{onPointerDownCapture:()=>r.current=!0}}((e=>{const t=e.target,n=[...u.branches].some((e=>e.contains(t)));x&&!n&&(i?.(e),a?.(e),e.defaultPrevented||l?.())}),p),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=Km(e),r=o.useRef(!1);return o.useEffect((()=>{const e=e=>{if(e.target&&!r.current){ng(Xm,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}((e=>{const t=e.target;[...u.branches].some((e=>e.contains(t)))||(s?.(e),a?.(e),e.defaultPrevented||l?.())}),p);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=Km(e);o.useEffect((()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})}),[n,t])}((e=>{b===u.layers.size-1&&(r?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))}),p),o.useEffect((()=>{if(d)return n&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(Jm=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),tg(),()=>{n&&1===u.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=Jm)}}),[d,p,n,u]),o.useEffect((()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),tg())}),[d,u]),o.useEffect((()=>{const e=()=>f({});return document.addEventListener(Gm,e),()=>document.removeEventListener(Gm,e)}),[]),(0,Xr.jsx)(qm.div,{...c,ref:m,style:{pointerEvents:w?x?"auto":"none":void 0,...e.style},onFocusCapture:Pm(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Pm(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Pm(e.onPointerDownCapture,k.onPointerDownCapture)})}));Zm.displayName="DismissableLayer";var eg=o.forwardRef(((e,t)=>{const n=o.useContext(Ym),r=o.useRef(null),i=Im(t,r);return o.useEffect((()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}}),[n.branches]),(0,Xr.jsx)(qm.div,{...e,ref:i})}));function tg(){const e=new CustomEvent(Gm);document.dispatchEvent(e)}function ng(e,t,n,r){let{discrete:o}=r;const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),o?function(e,t){e&&vt.flushSync((()=>e.dispatchEvent(t)))}(i,s):i.dispatchEvent(s)}eg.displayName="DismissableLayerBranch";var rg=globalThis?.document?o.useLayoutEffect:()=>{},og=i[" useId ".trim().toString()]||(()=>{}),ig=0;const sg=["top","right","bottom","left"],ag=Math.min,lg=Math.max,cg=Math.round,ug=Math.floor,dg=e=>({x:e,y:e}),hg={left:"right",right:"left",bottom:"top",top:"bottom"},pg={start:"end",end:"start"};function fg(e,t,n){return lg(e,ag(t,n))}function mg(e,t){return"function"===typeof e?e(t):e}function gg(e){return e.split("-")[0]}function yg(e){return e.split("-")[1]}function vg(e){return"x"===e?"y":"x"}function bg(e){return"y"===e?"height":"width"}function wg(e){return["top","bottom"].includes(gg(e))?"y":"x"}function xg(e){return vg(wg(e))}function kg(e){return e.replace(/start|end/g,(e=>pg[e]))}function Sg(e){return e.replace(/left|right|bottom|top/g,(e=>hg[e]))}function Cg(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Eg(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Tg(e,t,n){let{reference:r,floating:o}=e;const i=wg(t),s=xg(t),a=bg(s),l=gg(t),c="y"===i,u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[a]/2-o[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(yg(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1)}return p}async function Ng(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=mg(t,e),f=Cg(p),m=a[h?"floating"===d?"reference":"floating":d],g=Eg(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(m)))||n?m:m.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,v=await(null==i.getOffsetParent?void 0:i.getOffsetParent(a.floating)),b=await(null==i.isElement?void 0:i.isElement(v))&&await(null==i.getScale?void 0:i.getScale(v))||{x:1,y:1},w=Eg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-w.top+f.top)/b.y,bottom:(w.bottom-g.bottom+f.bottom)/b.y,left:(g.left-w.left+f.left)/b.x,right:(w.right-g.right+f.right)/b.x}}function Og(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jg(e){return sg.some((t=>e[t]>=0))}function Mg(){return"undefined"!==typeof window}function Ag(e){return Dg(e)?(e.nodeName||"").toLowerCase():"#document"}function _g(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Rg(e){var t;return null==(t=(Dg(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Dg(e){return!!Mg()&&(e instanceof Node||e instanceof _g(e).Node)}function Pg(e){return!!Mg()&&(e instanceof Element||e instanceof _g(e).Element)}function Lg(e){return!!Mg()&&(e instanceof HTMLElement||e instanceof _g(e).HTMLElement)}function $g(e){return!(!Mg()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof _g(e).ShadowRoot)}function Ig(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Ug(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function zg(e){return["table","td","th"].includes(Ag(e))}function Bg(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(wb){return!1}}))}function Fg(e){const t=Vg(),n=Pg(e)?Ug(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Vg(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Hg(e){return["html","body","#document"].includes(Ag(e))}function Ug(e){return _g(e).getComputedStyle(e)}function Wg(e){return Pg(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qg(e){if("html"===Ag(e))return e;const t=e.assignedSlot||e.parentNode||$g(e)&&e.host||Rg(e);return $g(t)?t.host:t}function Kg(e){const t=qg(e);return Hg(t)?e.ownerDocument?e.ownerDocument.body:e.body:Lg(t)&&Ig(t)?t:Kg(t)}function Jg(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=Kg(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),s=_g(o);if(i){const e=Gg(s);return t.concat(s,s.visualViewport||[],Ig(o)?o:[],e&&n?Jg(e):[])}return t.concat(o,Jg(o,[],n))}function Gg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Qg(e){const t=Ug(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Lg(e),i=o?e.offsetWidth:n,s=o?e.offsetHeight:r,a=cg(n)!==i||cg(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function Xg(e){return Pg(e)?e:e.contextElement}function Yg(e){const t=Xg(e);if(!Lg(t))return dg(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=Qg(t);let s=(i?cg(n.width):n.width)/r,a=(i?cg(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const Zg=dg(0);function ey(e){const t=_g(e);return Vg()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Zg}function ty(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=Xg(e);let s=dg(1);t&&(r?Pg(r)&&(s=Yg(r)):s=Yg(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==_g(e))&&t}(i,n,r)?ey(i):dg(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,u=o.width/s.x,d=o.height/s.y;if(i){const e=_g(i),t=r&&Pg(r)?_g(r):r;let n=e,o=Gg(n);for(;o&&r&&t!==n;){const e=Yg(o),t=o.getBoundingClientRect(),r=Ug(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=i,c+=s,n=_g(o),o=Gg(n)}}return Eg({width:u,height:d,x:l,y:c})}function ny(e,t){const n=Wg(e).scrollLeft;return t?t.left+n:ty(Rg(e)).left+n}function ry(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:ny(e,r)),y:r.top+t.scrollTop}}function oy(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=_g(e),r=Rg(e),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const e=Vg();(!e||e&&"fixed"===t)&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=Rg(e),n=Wg(e),r=e.ownerDocument.body,o=lg(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=lg(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+ny(e);const a=-n.scrollTop;return"rtl"===Ug(r).direction&&(s+=lg(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}(Rg(e));else if(Pg(t))r=function(e,t){const n=ty(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=Lg(e)?Yg(e):dg(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=ey(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Eg(r)}function iy(e,t){const n=qg(e);return!(n===t||!Pg(n)||Hg(n))&&("fixed"===Ug(n).position||iy(n,t))}function sy(e,t,n){const r=Lg(t),o=Rg(t),i="fixed"===n,s=ty(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=dg(0);if(r||!r&&!i)if(("body"!==Ag(t)||Ig(o))&&(a=Wg(t)),r){const e=ty(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&(l.x=ny(o));const c=!o||r||i?dg(0):ry(o,a);return{x:s.left+a.scrollLeft-l.x-c.x,y:s.top+a.scrollTop-l.y-c.y,width:s.width,height:s.height}}function ay(e){return"static"===Ug(e).position}function ly(e,t){if(!Lg(e)||"fixed"===Ug(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Rg(e)===n&&(n=n.ownerDocument.body),n}function cy(e,t){const n=_g(e);if(Bg(e))return n;if(!Lg(e)){let t=qg(e);for(;t&&!Hg(t);){if(Pg(t)&&!ay(t))return t;t=qg(t)}return n}let r=ly(e,t);for(;r&&zg(r)&&ay(r);)r=ly(r,t);return r&&Hg(r)&&ay(r)&&!Fg(r)?n:r||function(e){let t=qg(e);for(;Lg(t)&&!Hg(t);){if(Fg(t))return t;if(Bg(t))return null;t=qg(t)}return null}(e)||n}const uy={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,s=Rg(r),a=!!t&&Bg(t.floating);if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=dg(1);const u=dg(0),d=Lg(r);if((d||!d&&!i)&&(("body"!==Ag(r)||Ig(s))&&(l=Wg(r)),Lg(r))){const e=ty(r);c=Yg(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!s||d||i?dg(0):ry(s,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Rg,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i="clippingAncestors"===n?Bg(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Jg(e,[],!1).filter((e=>Pg(e)&&"body"!==Ag(e))),o=null;const i="fixed"===Ug(e).position;let s=i?qg(e):e;for(;Pg(s)&&!Hg(s);){const t=Ug(s),n=Fg(s);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||Ig(s)&&!n&&iy(e,s))?r=r.filter((e=>e!==s)):o=t,s=qg(s)}return t.set(e,r),r}(t,this._c):[].concat(n),s=[...i,r],a=s[0],l=s.reduce(((e,n)=>{const r=oy(t,n,o);return e.top=lg(r.top,e.top),e.right=ag(r.right,e.right),e.bottom=ag(r.bottom,e.bottom),e.left=lg(r.left,e.left),e}),oy(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:cy,getElementRects:async function(e){const t=this.getOffsetParent||cy,n=this.getDimensions,r=await n(e.floating);return{reference:sy(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Qg(e);return{width:t,height:n}},getScale:Yg,isElement:Pg,isRTL:function(e){return"rtl"===Ug(e).direction}};function dy(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function hy(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=Xg(e),u=o||i?[...c?Jg(c):[],...Jg(t)]:[];u.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=c&&a?function(e,t){let n,r=null;const o=Rg(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(a||t(),!h||!p)return;const f={rootMargin:-ug(d)+"px "+-ug(o.clientWidth-(u+h))+"px "+-ug(o.clientHeight-(d+p))+"px "+-ug(u)+"px",threshold:lg(0,ag(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return s();r?s(!1,r):n=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==r||dy(c,e.getBoundingClientRect())||s(),m=!1}try{r=new IntersectionObserver(g,{...f,root:o.ownerDocument})}catch(wb){r=new IntersectionObserver(g,f)}r.observe(e)}(!0),i}(c,n):null;let h,p=-1,f=null;s&&(f=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),c&&!l&&f.observe(c),f.observe(t));let m=l?ty(e):null;return l&&function t(){const r=ty(e);m&&!dy(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const py=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),s=gg(n),a=yg(n),l="y"===wg(n),c=["left","top"].includes(s)?-1:1,u=i&&l?-1:1,d=mg(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"===typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},fy=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=mg(e,t),c={x:n,y:r},u=await Ng(t,l),d=wg(gg(o)),h=vg(d);let p=c[h],f=c[d];if(i){const e="y"===h?"bottom":"right";p=fg(p+u["y"===h?"top":"left"],p,p-u[e])}if(s){const e="y"===d?"bottom":"right";f=fg(f+u["y"===d?"top":"left"],f,f-u[e])}const m=a.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:i,[d]:s}}}}}},my=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=mg(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const y=gg(o),v=wg(a),b=gg(a)===a,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=h||(b||!m?[Sg(a)]:function(e){const t=Sg(e);return[kg(e),t,kg(t)]}(a)),k="none"!==f;!h&&k&&x.push(...function(e,t,n,r){const o=yg(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:s;default:return[]}}(gg(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(kg)))),i}(a,m,f,w));const S=[a,...x],C=await Ng(t,g),E=[];let T=(null==(r=i.flip)?void 0:r.overflows)||[];if(u&&E.push(C[y]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=yg(e),o=xg(e),i=bg(o);let s="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Sg(s)),[s,Sg(s)]}(o,s,w);E.push(C[e[0]],C[e[1]])}if(T=[...T,{placement:o,overflows:E}],!E.every((e=>e<=0))){var N,O;const e=((null==(N=i.flip)?void 0:N.index)||0)+1,t=S[e];if(t)return{data:{index:e,overflows:T},reset:{placement:t}};let n=null==(O=T.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:O.placement;if(!n)switch(p){case"bestFit":{var j;const e=null==(j=T.filter((e=>{if(k){const t=wg(e.placement);return t===v||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:j[0];e&&(n=e);break}case"initialPlacement":n=a}if(o!==n)return{reset:{placement:n}}}return{}}}},gy=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:s,elements:a}=t,{apply:l=()=>{},...c}=mg(e,t),u=await Ng(t,c),d=gg(o),h=yg(o),p="y"===wg(o),{width:f,height:m}=i.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=h===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g="end"===h?"top":"bottom");const v=m-u.top-u.bottom,b=f-u.left-u.right,w=ag(m-u[g],v),x=ag(f-u[y],b),k=!t.middlewareData.shift;let S=w,C=x;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(C=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(S=v),k&&!h){const e=lg(u.left,0),t=lg(u.right,0),n=lg(u.top,0),r=lg(u.bottom,0);p?C=f-2*(0!==e||0!==t?e+t:lg(u.left,u.right)):S=m-2*(0!==n||0!==r?n+r:lg(u.top,u.bottom))}await l({...t,availableWidth:C,availableHeight:S});const E=await s.getDimensions(a.floating);return f!==E.width||m!==E.height?{reset:{rects:!0}}:{}}}},yy=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=mg(e,t);switch(r){case"referenceHidden":{const e=Og(await Ng(t,{...o,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:jg(e)}}}case"escaped":{const e=Og(await Ng(t,{...o,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:jg(e)}}}default:return{}}}}},vy=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=mg(e,t)||{};if(null==c)return{};const d=Cg(u),h={x:n,y:r},p=xg(o),f=bg(p),m=await s.getDimensions(c),g="y"===p,y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=i.reference[f]+i.reference[p]-h[p]-i.floating[f],x=h[p]-i.reference[p],k=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let S=k?k[b]:0;S&&await(null==s.isElement?void 0:s.isElement(k))||(S=a.floating[b]||i.floating[f]);const C=w/2-x/2,E=S/2-m[f]/2-1,T=ag(d[y],E),N=ag(d[v],E),O=T,j=S-m[f]-N,M=S/2-m[f]/2+C,A=fg(O,M,j),_=!l.arrow&&null!=yg(o)&&M!==A&&i.reference[f]/2-(M<O?T:N)-m[f]/2<0,R=_?M<O?M-O:M-j:0;return{[p]:h[p]+R,data:{[p]:A,centerOffset:M-A-R,..._&&{alignmentOffset:R}},reset:_}}}),by=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=mg(e,t),u={x:n,y:r},d=wg(o),h=vg(d);let p=u[h],f=u[d];const m=mg(a,t),g="number"===typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=i.reference[h]-i.floating[e]+g.mainAxis,n=i.reference[h]+i.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var y,v;const e="y"===h?"width":"height",t=["top","left"].includes(gg(o)),n=i.reference[d]-i.floating[e]+(t&&(null==(y=s.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),r=i.reference[d]+i.reference[e]+(t?0:(null==(v=s.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);f<n?f=n:f>r&&(f=r)}return{[h]:p,[d]:f}}}},wy=(e,t,n)=>{const r=new Map,o={platform:uy,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=Tg(c,r,l),h=r,p={},f=0;for(let m=0;m<a.length;m++){const{name:n,fn:i}=a[m],{x:g,y:y,data:v,reset:b}=await i({x:u,y:d,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,p={...p,[n]:{...p[n],...v}},b&&f<=50&&(f++,"object"===typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:u,y:d}=Tg(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:o,middlewareData:p}})(e,t,{...o,platform:i})};var xy="undefined"!==typeof document?o.useLayoutEffect:o.useEffect;function ky(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!ky(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!==r--;){const n=o[r];if(("_owner"!==n||!e.$$typeof)&&!ky(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Sy(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Cy(e,t){const n=Sy(e);return Math.round(t*n)/n}function Ey(e){const t=o.useRef(e);return xy((()=>{t.current=e})),t}const Ty=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(o=n,{}.hasOwnProperty.call(o,"current"))?null!=n.current?vy({element:n.current,padding:r}).fn(t):{}:n?vy({element:n,padding:r}).fn(t):{};var o}}),Ny=(e,t)=>({...fy(e),options:[e,t]}),Oy=(e,t)=>({...by(e),options:[e,t]}),jy=(e,t)=>({...my(e),options:[e,t]}),My=(e,t)=>({...gy(e),options:[e,t]}),Ay=(e,t)=>({...yy(e),options:[e,t]}),_y=(e,t)=>({...Ty(e),options:[e,t]});var Ry=o.forwardRef(((e,t)=>{const{children:n,width:r=10,height:o=5,...i}=e;return(0,Xr.jsx)(qm.svg,{...i,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,Xr.jsx)("polygon",{points:"0,0 30,0 15,10"})})}));Ry.displayName="Arrow";var Dy=Ry;var Py="Popper",[Ly,$y]=zm(Py),[Iy,zy]=Ly(Py),By=e=>{const{__scopePopper:t,children:n}=e,[r,i]=o.useState(null);return(0,Xr.jsx)(Iy,{scope:t,anchor:r,onAnchorChange:i,children:n})};By.displayName=Py;var Fy="PopperAnchor",Vy=o.forwardRef(((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=zy(Fy,n),a=o.useRef(null),l=Im(t,a);return o.useEffect((()=>{s.onAnchorChange(r?.current||a.current)})),r?null:(0,Xr.jsx)(qm.div,{...i,ref:l})}));Vy.displayName=Fy;var Hy="PopperContent",[Uy,Wy]=Ly(Hy),qy=o.forwardRef(((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=e,y=zy(Hy,n),[v,b]=o.useState(null),w=Im(t,(e=>b(e))),[x,k]=o.useState(null),S=function(e){const[t,n]=o.useState(void 0);return rg((()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let o,i;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;o=t.inlineSize,i=t.blockSize}else o=e.offsetWidth,i=e.offsetHeight;n({width:o,height:i})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)}),[e]),t}(x),C=S?.width??0,E=S?.height??0,T=r+("center"!==s?"-"+s:""),N="number"===typeof d?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],j=O.length>0,M={padding:N,boundary:O.filter(Qy),altBoundary:j},{refs:A,floatingStyles:_,placement:R,isPositioned:D,middlewareData:P}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=o.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=o.useState(r);ky(p,r)||f(r);const[m,g]=o.useState(null),[y,v]=o.useState(null),b=o.useCallback((e=>{e!==S.current&&(S.current=e,g(e))}),[]),w=o.useCallback((e=>{e!==C.current&&(C.current=e,v(e))}),[]),x=s||m,k=a||y,S=o.useRef(null),C=o.useRef(null),E=o.useRef(d),T=null!=c,N=Ey(c),O=Ey(i),j=Ey(u),M=o.useCallback((()=>{if(!S.current||!C.current)return;const e={placement:t,strategy:n,middleware:p};O.current&&(e.platform=O.current),wy(S.current,C.current,e).then((e=>{const t={...e,isPositioned:!1!==j.current};A.current&&!ky(E.current,t)&&(E.current=t,vt.flushSync((()=>{h(t)})))}))}),[p,t,n,O,j]);xy((()=>{!1===u&&E.current.isPositioned&&(E.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[u]);const A=o.useRef(!1);xy((()=>(A.current=!0,()=>{A.current=!1})),[]),xy((()=>{if(x&&(S.current=x),k&&(C.current=k),x&&k){if(N.current)return N.current(x,k,M);M()}}),[x,k,M,N,T]);const _=o.useMemo((()=>({reference:S,floating:C,setReference:b,setFloating:w})),[b,w]),R=o.useMemo((()=>({reference:x,floating:k})),[x,k]),D=o.useMemo((()=>{const e={position:n,left:0,top:0};if(!R.floating)return e;const t=Cy(R.floating,d.x),r=Cy(R.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+r+"px)",...Sy(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,l,R.floating,d.x,d.y]);return o.useMemo((()=>({...d,update:M,refs:_,elements:R,floatingStyles:D})),[d,M,_,R,D])}({strategy:"fixed",placement:T,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hy(...t,{animationFrame:"always"===f})},elements:{reference:y.anchor},middleware:[(L={mainAxis:i+E,alignmentAxis:a},{...py(L),options:[L,$]}),c&&Ny({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?Oy():void 0,...M}),c&&jy({...M}),My({...M,apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:o}=e;const{width:i,height:s}=n.reference,a=t.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${o}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${s}px`)}}),x&&_y({element:x,padding:l}),Xy({arrowWidth:C,arrowHeight:E}),p&&Ay({strategy:"referenceHidden",...M})]});var L,$;const[I,z]=Yy(R),B=Km(m);rg((()=>{D&&B?.()}),[D,B]);const F=P.arrow?.x,V=P.arrow?.y,H=0!==P.arrow?.centerOffset,[U,W]=o.useState();return rg((()=>{v&&W(window.getComputedStyle(v).zIndex)}),[v]),(0,Xr.jsx)("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:D?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[P.transformOrigin?.x,P.transformOrigin?.y].join(" "),...P.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,Xr.jsx)(Uy,{scope:n,placedSide:I,onArrowChange:k,arrowX:F,arrowY:V,shouldHideArrow:H,children:(0,Xr.jsx)(qm.div,{"data-side":I,"data-align":z,...g,ref:w,style:{...g.style,animation:D?void 0:"none"}})})})}));qy.displayName=Hy;var Ky="PopperArrow",Jy={top:"bottom",right:"left",bottom:"top",left:"right"},Gy=o.forwardRef((function(e,t){const{__scopePopper:n,...r}=e,o=Wy(Ky,n),i=Jy[o.placedSide];return(0,Xr.jsx)("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:(0,Xr.jsx)(Dy,{...r,ref:t,style:{...r.style,display:"block"}})})}));function Qy(e){return null!==e}Gy.displayName=Ky;var Xy=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,i=0!==o.arrow?.centerOffset,s=i?0:e.arrowWidth,a=i?0:e.arrowHeight,[l,c]=Yy(n),u={start:"0%",center:"50%",end:"100%"}[c],d=(o.arrow?.x??0)+s/2,h=(o.arrow?.y??0)+a/2;let p="",f="";return"bottom"===l?(p=i?u:`${d}px`,f=-a+"px"):"top"===l?(p=i?u:`${d}px`,f=`${r.floating.height+a}px`):"right"===l?(p=-a+"px",f=i?u:`${h}px`):"left"===l&&(p=`${r.floating.width+a}px`,f=i?u:`${h}px`),{data:{x:p,y:f}}}});function Yy(e){const[t,n="center"]=e.split("-");return[t,n]}var Zy=By,ev=Vy,tv=qy,nv=Gy,rv=o.forwardRef(((e,t)=>{const{container:n,...r}=e,[i,s]=o.useState(!1);rg((()=>s(!0)),[]);const a=n||i&&globalThis?.document?.body;return a?vt.createPortal((0,Xr.jsx)(qm.div,{...r,ref:t}),a):null}));rv.displayName="Portal";var ov=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=o.useState(),r=o.useRef({}),i=o.useRef(e),s=o.useRef("none"),a=e?"mounted":"unmounted",[l,c]=function(e,t){return o.useReducer(((e,n)=>t[e][n]??e),e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect((()=>{const e=iv(r.current);s.current="mounted"===l?e:"none"}),[l]),rg((()=>{const t=r.current,n=i.current;if(n!==e){const r=s.current,o=iv(t);if(e)c("MOUNT");else if("none"===o||"none"===t?.display)c("UNMOUNT");else{c(n&&r!==o?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,c]),rg((()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,o=o=>{const s=iv(r.current).includes(o.animationName);if(o.target===t&&s&&(c("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)}))}},a=e=>{e.target===t&&(s.current=iv(r.current))};return t.addEventListener("animationstart",a),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",a),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}c("ANIMATION_END")}),[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:o.useCallback((e=>{e&&(r.current=getComputedStyle(e)),n(e)}),[])}}(t),i="function"===typeof n?n({present:r.isPresent}):o.Children.only(n),s=Im(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(i));return"function"===typeof n||r.isPresent?o.cloneElement(i,{ref:s}):null};function iv(e){return e?.animationName||"none"}ov.displayName="Presence";function sv(e){let{prop:t,defaultProp:n,onChange:r=()=>{}}=e;const[i,s]=function(e){let{defaultProp:t,onChange:n}=e;const r=o.useState(t),[i]=r,s=o.useRef(i),a=Km(n);return o.useEffect((()=>{s.current!==i&&(a(i),s.current=i)}),[i,s,a]),r}({defaultProp:n,onChange:r}),a=void 0!==t,l=a?t:i,c=Km(r);return[l,o.useCallback((e=>{if(a){const n="function"===typeof e?e(t):e;n!==t&&c(n)}else s(e)}),[a,t,s,c])]}var av=o.forwardRef(((e,t)=>(0,Xr.jsx)(qm.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));av.displayName="VisuallyHidden";var lv=av,[cv,uv]=zm("Tooltip",[$y]),dv=$y(),hv="TooltipProvider",pv=700,fv="tooltip.open",[mv,gv]=cv(hv),yv=e=>{const{__scopeTooltip:t,delayDuration:n=pv,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=e,a=o.useRef(!0),l=o.useRef(!1),c=o.useRef(0);return o.useEffect((()=>{const e=c.current;return()=>window.clearTimeout(e)}),[]),(0,Xr.jsx)(mv,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:o.useCallback((()=>{window.clearTimeout(c.current),a.current=!1}),[]),onClose:o.useCallback((()=>{window.clearTimeout(c.current),c.current=window.setTimeout((()=>a.current=!0),r)}),[r]),isPointerInTransitRef:l,onPointerInTransitChange:o.useCallback((e=>{l.current=e}),[]),disableHoverableContent:i,children:s})};yv.displayName=hv;var vv="Tooltip",[bv,wv]=cv(vv),xv=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:l}=e,c=gv(vv,e.__scopeTooltip),u=dv(t),[d,h]=o.useState(null),p=function(e){const[t,n]=o.useState(og());return rg((()=>{e||n((e=>e??String(ig++)))}),[e]),e||(t?`radix-${t}`:"")}(),f=o.useRef(0),m=a??c.disableHoverableContent,g=l??c.delayDuration,y=o.useRef(!1),[v=!1,b]=sv({prop:r,defaultProp:i,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(fv))):c.onClose(),s?.(e)}}),w=o.useMemo((()=>v?y.current?"delayed-open":"instant-open":"closed"),[v]),x=o.useCallback((()=>{window.clearTimeout(f.current),f.current=0,y.current=!1,b(!0)}),[b]),k=o.useCallback((()=>{window.clearTimeout(f.current),f.current=0,b(!1)}),[b]),S=o.useCallback((()=>{window.clearTimeout(f.current),f.current=window.setTimeout((()=>{y.current=!0,b(!0),f.current=0}),g)}),[g,b]);return o.useEffect((()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)}),[]),(0,Xr.jsx)(Zy,{...u,children:(0,Xr.jsx)(bv,{scope:t,contentId:p,open:v,stateAttribute:w,trigger:d,onTriggerChange:h,onTriggerEnter:o.useCallback((()=>{c.isOpenDelayedRef.current?S():x()}),[c.isOpenDelayedRef,S,x]),onTriggerLeave:o.useCallback((()=>{m?k():(window.clearTimeout(f.current),f.current=0)}),[k,m]),onOpen:x,onClose:k,disableHoverableContent:m,children:n})})};xv.displayName=vv;var kv="TooltipTrigger",Sv=o.forwardRef(((e,t)=>{const{__scopeTooltip:n,...r}=e,i=wv(kv,n),s=gv(kv,n),a=dv(n),l=Im(t,o.useRef(null),i.onTriggerChange),c=o.useRef(!1),u=o.useRef(!1),d=o.useCallback((()=>c.current=!1),[]);return o.useEffect((()=>()=>document.removeEventListener("pointerup",d)),[d]),(0,Xr.jsx)(ev,{asChild:!0,...a,children:(0,Xr.jsx)(qm.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Pm(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(u.current||s.isPointerInTransitRef.current||(i.onTriggerEnter(),u.current=!0))})),onPointerLeave:Pm(e.onPointerLeave,(()=>{i.onTriggerLeave(),u.current=!1})),onPointerDown:Pm(e.onPointerDown,(()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})})),onFocus:Pm(e.onFocus,(()=>{c.current||i.onOpen()})),onBlur:Pm(e.onBlur,i.onClose),onClick:Pm(e.onClick,i.onClose)})})}));Sv.displayName=kv;var Cv="TooltipPortal",[Ev,Tv]=cv(Cv,{forceMount:void 0}),Nv=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,i=wv(Cv,t);return(0,Xr.jsx)(Ev,{scope:t,forceMount:n,children:(0,Xr.jsx)(ov,{present:n||i.open,children:(0,Xr.jsx)(rv,{asChild:!0,container:o,children:r})})})};Nv.displayName=Cv;var Ov="TooltipContent",jv=o.forwardRef(((e,t)=>{const n=Tv(Ov,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=e,s=wv(Ov,e.__scopeTooltip);return(0,Xr.jsx)(ov,{present:r||s.open,children:s.disableHoverableContent?(0,Xr.jsx)(Dv,{side:o,...i,ref:t}):(0,Xr.jsx)(Mv,{side:o,...i,ref:t})})})),Mv=o.forwardRef(((e,t)=>{const n=wv(Ov,e.__scopeTooltip),r=gv(Ov,e.__scopeTooltip),i=o.useRef(null),s=Im(t,i),[a,l]=o.useState(null),{trigger:c,onClose:u}=n,d=i.current,{onPointerInTransitChange:h}=r,p=o.useCallback((()=>{l(null),h(!1)}),[h]),f=o.useCallback(((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),i=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...o,...function(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}(t.getBoundingClientRect())]);l(i),h(!0)}),[h]);return o.useEffect((()=>()=>p()),[p]),o.useEffect((()=>{if(c&&d){const e=e=>f(e,d),t=e=>f(e,c);return c.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}}),[c,d,f,p]),o.useEffect((()=>{if(a){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=c?.contains(t)||d?.contains(t),o=!function(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const e=t[i].x,a=t[i].y,l=t[s].x,c=t[s].y;a>r!==c>r&&n<(l-e)*(r-a)/(c-a)+e&&(o=!o)}return o}(n,a);r?p():o&&(p(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[c,d,a,u,p]),(0,Xr.jsx)(Dv,{...e,ref:s})})),[Av,_v]=cv(vv,{isInside:!1}),Rv=Um("TooltipContent"),Dv=o.forwardRef(((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...l}=e,c=wv(Ov,n),u=dv(n),{onClose:d}=c;return o.useEffect((()=>(document.addEventListener(fv,d),()=>document.removeEventListener(fv,d))),[d]),o.useEffect((()=>{if(c.trigger){const e=e=>{const t=e.target;t?.contains(c.trigger)&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[c.trigger,d]),(0,Xr.jsx)(Zm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:(0,Xr.jsxs)(tv,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,Xr.jsx)(Rv,{children:r}),(0,Xr.jsx)(Av,{scope:n,isInside:!0,children:(0,Xr.jsx)(lv,{id:c.contentId,role:"tooltip",children:i||r})})]})})}));jv.displayName=Ov;var Pv="TooltipArrow",Lv=o.forwardRef(((e,t)=>{const{__scopeTooltip:n,...r}=e,o=dv(n);return _v(Pv,n).isInside?null:(0,Xr.jsx)(nv,{...o,...r,ref:t})}));Lv.displayName=Pv;var $v=yv,Iv=xv,zv=Sv,Bv=Nv,Fv=jv,Vv=Lv;const Hv=e=>{let{children:t,label:n}=e;return(0,Xr.jsx)($v,{delayDuration:1e3,children:(0,Xr.jsxs)(Iv,{children:[(0,Xr.jsx)(zv,{asChild:!0,children:t}),(0,Xr.jsx)(Bv,{children:(0,Xr.jsxs)(Fv,{side:"right",sideOffset:10,className:"tooltip-content",children:[n,(0,Xr.jsx)(Vv,{className:"tooltip-arrow"})]})})]})})},Uv=ri("newspaper",[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]]),Wv=ri("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),qv=ri("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Kv=ri("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Jv=e=>{let{onLogout:t,user:n,apiUrl:r,token:i}=e;const s=Z(),a=ne(),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{try{const e=JSON.parse(localStorage.getItem("user")),t=localStorage.getItem("token"),n=await fetch(`${r}/api/news`,{headers:{Authorization:`Bearer ${t}`}}),o=(await n.json()).some((t=>{var n;return!(null!==e&&void 0!==e&&null!==(n=e.readNews)&&void 0!==n&&n.includes(t._id))}));p(o)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439",e)}})()}),[s]);const f=[{path:`/profile/${n._id}`,label:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",icon:(0,Xr.jsx)(pm,{})},{path:"/news",label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",icon:(0,Xr.jsx)(Uv,{color:"black"})},{path:"/homework",label:"\u0414\u0417",icon:(0,Xr.jsx)(Wv,{color:"black"})},{path:"/groups",label:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",icon:(0,Xr.jsx)(Em,{})},{path:"/grades",label:"\u0416\u0443\u0440\u043d\u0430\u043b",icon:(0,Xr.jsx)(jm,{})}],m=[{path:"news",label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",icon:(0,Xr.jsx)(Dm,{})}],g=[{path:"/dashboard",label:"\u0410\u0434\u043c\u0438\u043d \u043f\u0430\u043d\u0435\u043b\u044c",icon:(0,Xr.jsx)(qv,{color:"black"})}];return(0,Xr.jsxs)("div",{className:"sidebar-main",children:[h&&(0,Xr.jsx)("div",{className:"sidebar-nav-message "+(l?"none":""),children:m.map((e=>(0,Xr.jsx)(Hv,{label:e.label,children:(0,Xr.jsx)(ot,{to:e.path,className:"sidebar-nav__item "+(s.pathname===e.path?"active":""),children:(0,Xr.jsx)("span",{className:"sidebar-icon",children:e.icon})})},e.path)))}),("director"===n.role||"admin"===n.role)&&(0,Xr.jsx)("div",{className:"sidebar-nav-admin "+(l?"none":""),style:{padding:"15px 0"},children:g.map((e=>(0,Xr.jsx)(Hv,{label:e.label,children:(0,Xr.jsx)(ot,{to:e.path,className:"sidebar-nav__item "+(s.pathname===e.path?"active":""),children:(0,Xr.jsx)("span",{className:"sidebar-icon",children:e.icon})},e.path)},e.path)))}),(0,Xr.jsx)("div",{className:"sidebar-nav "+(l?"expanded":""),children:u?(0,Xr.jsxs)("div",{className:"confirm-logout",children:[(0,Xr.jsx)("p",{children:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438 \u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"}),(0,Xr.jsx)("button",{onClick:()=>{d(!1),c(!1)},className:"cancel-logout",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Xr.jsx)("button",{onClick:()=>{t(),a("/login")},className:"confirm-logout-btn",children:"\u0412\u044b\u0439\u0442\u0438"})]}):(0,Xr.jsxs)(Xr.Fragment,{children:[f.map((e=>(0,Xr.jsx)(Hv,{label:e.label,children:(0,Xr.jsx)(ot,{to:e.path,className:"sidebar-nav__item "+(s.pathname===e.path?"active":""),children:(0,Xr.jsx)("div",{className:"sidebar-icon",children:e.icon})},e.path)},e.path))),(0,Xr.jsx)("button",{onClick:()=>{d(!0),c(!0)},className:"logout-btn",children:(0,Xr.jsx)("div",{className:"sidebar-icon",children:(0,Xr.jsx)(Kv,{color:"black"})})})]})})]})},Gv=ri("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Qv=e=>{let{token:t,apiUrl:n,user:r}=e;const[i,s]=(0,o.useState)("all"),[a,l]=(0,o.useState)(""),[c,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)([]),p=async()=>{if(!a.trim())return;const e=encodeURIComponent(a.trim());try{let r="";switch(i){case"users":r=`${n}/api/users/search?query=${e}`;break;case"news":r=`${n}/api/news/search?query=${e}`;break;case"groups":r=`${n}/api/groups/search?query=${e}`;break;case"homework":r=`${n}/api/homework/search?query=${e}`;break;default:r=`${n}/api/search?query=${e}`}const o=await Qr.get(r,{headers:{Authorization:`Bearer ${t}`}});if("all"===i){const{users:e,news:t,groups:n,homework:r}=o.data,i=[...e.map((e=>({...e,type:"user"}))),...t.map((e=>({...e,type:"news"}))),...n.map((e=>({...e,type:"group"}))),...r.map((e=>({...e,type:"homework"})))];h(i)}else{const e=o.data.map((e=>({...e,type:"users"===i?"user":"news"===i?"news":"groups"===i?"group":"homework"===i?"homework":"unknown"})));h(e)}}catch(r){console.error("Error searching:",r)}};return(0,Xr.jsxs)("div",{className:"search-bar-container",children:[(0,Xr.jsxs)("div",{className:"search-filter",onClick:()=>u(!c),children:["all"===i&&"\u0412\u0441\u0451","users"===i&&"\u041b\u044e\u0434\u0438","news"===i&&"\u041d\u043e\u0432\u043e\u0441\u0442\u0438","groups"===i&&"\u0413\u0440\u0443\u043f\u043f\u044b","homework"===i&&"\u0414\u0417",(0,Xr.jsx)("span",{className:"arrow",children:"\u25be"}),c&&(0,Xr.jsxs)("div",{className:"filter-dropdown",children:[(0,Xr.jsx)("div",{onClick:()=>s("all"),children:"\u0412\u0441\u0451"}),(0,Xr.jsx)("div",{onClick:()=>s("users"),children:"\u041b\u044e\u0434\u0438"}),(0,Xr.jsx)("div",{onClick:()=>s("news"),children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),(0,Xr.jsx)("div",{onClick:()=>s("groups"),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),(0,Xr.jsx)("div",{onClick:()=>s("homework"),children:"\u0414\u0417"})]})]}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a...",value:a,onChange:e=>l(e.target.value),className:"search-input",onKeyDown:e=>"Enter"===e.key&&p()}),(0,Xr.jsx)("button",{onClick:p,style:{padding:"9px 10px"},children:(0,Xr.jsx)(Gv,{color:"black",height:"15px"})}),(0,Xr.jsx)("div",{className:"clear-button",onClick:()=>{l(""),h([])},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),d&&d.length>0&&(0,Xr.jsxs)("div",{className:"search-results-count",children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e: ",(0,Xr.jsx)("span",{children:d.length})," \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",(0,Xr.jsx)("div",{className:"search-results",children:d.map((e=>(0,Xr.jsx)("div",{className:"search-result-item",children:"user"===e.type?(0,Xr.jsx)(ot,{to:`/profile/${e._id}`,children:(0,Xr.jsxs)("p",{className:"search-result-item-link",children:["\ud83d\udc64 ",e.username]})}):"news"===e.type?(0,Xr.jsxs)(ot,{to:`/news?highlight=${e._id}`,children:["\ud83d\udcf0 ",e.title]}):"group"===e.type?(0,Xr.jsx)(ot,{to:`/groups?highlight=${e._id}`,children:(0,Xr.jsxs)("p",{children:["\ud83c\udfeb ",e.name]})}):"homework"===e.type?(0,Xr.jsx)(ot,{to:(r.role,`/homework?highlight=${e._id}`),children:(0,Xr.jsxs)("p",{children:["\ud83d\udcd8 ",e.subject," \u2014"," ",new Date(e.date).toLocaleDateString()]})}):null},e._id)))})]})]})},Xv=(e,t)=>{const{type:n,attrs:r,content:o,text:i}=e;switch(n){case"paragraph":return(0,Xr.jsx)("p",{children:null===o||void 0===o?void 0:o.map(Xv)},t);case"text":let n=i;return e.marks&&e.marks.forEach((e=>{switch(e.type){case"bold":n=(0,Xr.jsx)("strong",{children:n},t);break;case"italic":n=(0,Xr.jsx)("em",{children:n},t);break;case"underline":n=(0,Xr.jsx)("u",{children:n},t);break;case"strike":n=(0,Xr.jsx)("s",{children:n},t);break;case"highlight":n=(0,Xr.jsx)("mark",{children:n},t)}})),n;case"mention":return(0,Xr.jsx)(ot,{to:`/profile/${r.id}`,className:"mention-link",children:r.label},t);default:return null}},Yv=e=>{let{content:t}=e;return t&&"doc"===t.type?(0,Xr.jsx)("div",{className:"news-renderer",children:t.content.map(Xv)}):null},Zv=e=>{let{user:t,token:n,apiUrl:r}=e;const[i]=ct(),s=i.get("highlight"),a=(0,o.useRef)(null),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)({title:"",content:""}),[h,p]=(0,o.useState)(null),[f,m]=(0,o.useState)([]),[g,y]=(0,o.useState)(!1),[v,b]=(0,o.useState)(!0),[w,x]=(0,o.useState)(""),[k,S]=(0,o.useState)({title:"",content:"",image:""}),C=t&&("director"===t.role||"editor"===t.role);(0,o.useEffect)((()=>{if(a.current){a.current.scrollIntoView({behavior:"smooth",block:"center"});const e=setTimeout((()=>{var e;null===(e=a.current)||void 0===e||e.classList.remove("highlighted")}),5e3);return()=>clearTimeout(e)}}),[s]),(0,o.useEffect)((()=>{E()}),[n,r,t,g]);const E=async()=>{try{const e=(await Qr.get(`${r}/api/news`,{headers:{Authorization:`Bearer ${n}`}})).data;c(e);const o=e.filter((e=>!(t.readNews||[]).includes(e._id)));if(m(o),o.length>0&&!g){const e=o.map((e=>e._id));await Qr.post(`${r}/api/news/mark-read`,{newsIds:e},{headers:{Authorization:`Bearer ${n}`}});const i={...t,readNews:[...t.readNews||[],...e]};sessionStorage.setItem("user",JSON.stringify(i)),y(!0)}}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439:",e)}finally{b(!1)}},T=()=>{Qr.put(`${r}/api/news/${h._id}`,{...k},{headers:{Authorization:`Bearer ${n}`}}).then((e=>{c((t=>t.map((t=>t._id===e.data._id?e.data:t)))),p(null)})).catch((e=>console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438",e)))};return(0,Xr.jsxs)("div",{className:"news-page glass-card",children:[(0,Xr.jsx)("h2",{className:"news-title",style:{marginTop:"0"},children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),(0,Xr.jsx)(Qv,{token:n,apiUrl:r,user:t}),C&&(0,Xr.jsxs)("div",{className:"news-form",children:[(0,Xr.jsx)("input",{type:"text",placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:u.title,onChange:e=>d({...u,title:e.target.value})}),(0,Xr.jsx)(im,{apiUrl:r,token:n,initialContent:null===l||void 0===l?void 0:l.content,onChange:e=>x(e),className:"edit-input-textarea"}),(0,Xr.jsx)("button",{onClick:async()=>{try{await Qr.post(`${r}/api/news`,{title:u.title,content:w},{headers:{Authorization:`Bearer ${n}`}}),d({title:"",content:""});const e=await Qr.get(`${r}/api/news`);c(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",e)}E()},children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]}),v&&(0,Xr.jsx)(io,{className:"profile-loading"}),l.length>0?(0,Xr.jsx)("div",{className:"news-list",children:l.map(((e,i)=>{var u,d;const m=f.some((t=>t._id===e._id)),g=i>0&&f.some((e=>e._id===l[i-1]._id))&&!m;return(0,Xr.jsxs)(o.Fragment,{children:[g&&(0,Xr.jsx)("hr",{className:"news-divider"}),(0,Xr.jsxs)("div",{ref:e._id===s?a:null,className:"news-item "+(e._id===s?"highlighted":""),children:[(null===h||void 0===h?void 0:h._id)===e._id?(0,Xr.jsxs)("div",{className:"edit-form",children:[(0,Xr.jsx)("input",{value:k.title,onChange:e=>S({...k,title:e.target.value}),className:"edit-input-field"}),(0,Xr.jsx)(im,{apiUrl:r,token:n,initialContent:k.content,onChange:e=>S((t=>({...t,content:e}))),className:"edit-input-textarea"}),(0,Xr.jsx)("input",{value:k.image,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",onChange:e=>S({...k,image:e.target.value}),style:{display:"none"}}),(0,Xr.jsxs)("div",{className:"edit-btns",children:[(0,Xr.jsx)("button",{onClick:T,children:"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>p(null),children:"\u274c \u041e\u0442\u043c\u0435\u043d\u0430"})]})]}):(0,Xr.jsxs)("div",{children:[(0,Xr.jsx)("h3",{children:e.title}),e.image&&(0,Xr.jsx)("img",{src:e.image,alt:"",className:"news-image"}),(0,Xr.jsx)(Yv,{content:e.content}),(0,Xr.jsxs)("small",{children:["\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043e:"," ",new Date(e.createdAt).toLocaleString(),e.author&&` \u2022 ${null===(u=e.author)||void 0===u?void 0:u.username}`]})]}),(0,Xr.jsxs)("div",{className:"news-control-buttons",children:[C&&(0,Xr.jsx)("button",{onClick:()=>(async e=>{try{await Qr.delete(`${r}/api/news/${e}`,{headers:{Authorization:`Bearer ${n}`}}),c(l.filter((t=>t._id!==e)))}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",t)}})(e._id),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),"director"===t.role||t.username===(null===(d=e.author)||void 0===d?void 0:d.username)?(0,Xr.jsx)("button",{onClick:()=>(e=>{p(e),S({title:e.title,content:e.content,image:e.image||""})})(e),children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}):null]})]})]},e._id)}))}):null]})},eb=e=>{let{user:t,hw:n,isHighlighted:r,isEditable:o,onDelete:i}=e;const s=n.createdBy._id===t._id,a=ne();return(0,Xr.jsx)("div",{className:"homework-container",children:(0,Xr.jsxs)("div",{className:"homework-item "+(r?"highlighted":""),onClick:()=>{a(`/homework/${n._id}`)},children:[(0,Xr.jsx)("div",{className:"homework-field homework-subject",children:(0,Xr.jsx)("strong",{children:n.subject})}),(0,Xr.jsx)("div",{className:"homework-field homework-description",children:(0,Xr.jsx)("span",{children:n.description})}),n.files&&n.files.length>0&&(0,Xr.jsx)("div",{className:"homework-files",children:n.files.map(((e,t)=>(0,Xr.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"homework-file-link",children:["\ud83d\udcce \u0424\u0430\u0439\u043b ",t+1]},t)))}),(0,Xr.jsxs)("div",{className:"homework-meta-block",children:[(0,Xr.jsxs)("span",{className:"homework-date",children:["\ud83d\udcc5 ",new Date(n.createdAt).toLocaleDateString()]}),(0,Xr.jsxs)(ot,{to:`/profile/${n.createdBy._id}`,className:"homework-meta",children:["\ud83d\udc68\u200d\ud83c\udfeb ",n.createdBy.username]})]}),s&&(0,Xr.jsx)("button",{onClick:()=>i(n._id),className:"delete-btn",children:"\u274c"})]})})},tb=e=>{let{date:t,homework:n,token:r,user:o,apiUrl:i}=e;const s=new Date(t).toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"}),a=n.filter((e=>new Date(e.date).toDateString()===new Date(t).toDateString()));return(0,Xr.jsxs)("div",{className:"homework-day",children:[(0,Xr.jsx)("h3",{children:s}),0===a.length?(0,Xr.jsx)("p",{className:"no-homework",children:"\u0414\u043e\u043c\u0430\u0448\u043d\u0438\u0445 \u0437\u0430\u0434\u0430\u043d\u0438\u0439 \u043d\u0435\u0442"}):a.map((e=>(0,Xr.jsx)(eb,{hw:e,user:o,token:r,apiUrl:i},e._id)))]})},nb=e=>{var t;let{token:n,apiUrl:r,user:i}=e;const[s,a]=(0,o.useState)(!0),l=Array.isArray(i.groupId)?null===(t=i.groupId[0])||void 0===t?void 0:t.toString():i.groupId,[c,u]=(0,o.useState)((e=>{const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(0===n?-6:1);return new Date(t.setDate(r))})(new Date)),[d,h]=(0,o.useState)([]);(0,o.useEffect)((()=>{(async e=>{if(l)try{e.toISOString();const t=await Qr.get(`${r}/api/homework/week/${e.toISOString()}?groupId=${l}`,{headers:{Authorization:`Bearer ${n}`}});h(t.data)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0437:",t)}finally{a(!1)}})(c)}),[c,l]);const p=(f=c,Array.from({length:6},((e,t)=>{const n=new Date(f);return n.setDate(f.getDate()+t),n})));var f;return(0,Xr.jsxs)("div",{className:"homework-calendar",children:[(0,Xr.jsxs)("div",{className:"week-navigation",children:[(0,Xr.jsx)("button",{onClick:()=>{const e=new Date(c);e.setDate(e.getDate()-7),u(e)},children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,Xr.jsxs)("span",{children:["\u041d\u0435\u0434\u0435\u043b\u044f \u0441 ",p[0].toLocaleDateString()," \u043f\u043e"," ",p[5].toLocaleDateString()]}),s&&(0,Xr.jsx)("p",{className:"loading-hw",children:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435..."}),(0,Xr.jsx)("button",{onClick:()=>{const e=new Date(c);e.setDate(e.getDate()+7),u(e)},children:"\u0412\u043f\u0435\u0440\u0435\u0434 \u2192"})]}),(0,Xr.jsx)("div",{className:"week-days",children:p.map((e=>(0,Xr.jsx)(tb,{token:n,apiUrl:r,user:i,date:e,homework:d.filter((t=>new Date(t.date).toDateString()===e.toDateString()))},e.toISOString())))})]})},rb=e=>{let{token:t,apiUrl:n,user:r}=e;const[i,s]=(0,o.useState)([]),[a,l]=(0,o.useState)([]),[c,u]=(0,o.useState)({groupId:"",subject:"",date:"",description:"",files:[]}),[d,h]=(0,o.useState)(!1),[p,f]=(0,o.useState)("");(0,o.useEffect)((()=>{(async()=>{try{const e="director"===r.role?`${n}/api/groups`:`${n}/api/groups/teacher/${r._id}`,o=await Qr.get(e,{headers:{Authorization:`Bearer ${t}`}});s(o.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0433\u0440\u0443\u043f\u043f:",e)}})()}),[r,n,t]);const m=e=>{const{name:t,value:n}=e.target;u((e=>({...e,[t]:n})))},g=async()=>{if(c.groupId)try{const e=await Qr.get(`${n}/api/homework/group/${c.groupId}`,{headers:{Authorization:`Bearer ${t}`}});l(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0414\u0417:",e)}},y=async e=>{if(window.confirm("\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e \u0437\u0430\u0434\u0430\u043d\u0438\u0435?"))try{await Qr.delete(`${n}/api/homework/${e}`,{headers:{Authorization:`Bearer ${t}`}}),g()}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0434\u043e\u043c\u0430\u0448\u043a\u0438:",r)}};return(0,o.useEffect)((()=>{g()}),[c.groupId]),(0,Xr.jsxs)("div",{className:"homework-editor",children:[(0,Xr.jsxs)("div",{className:"homework-main-header",children:[(0,Xr.jsx)("h2",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435"}),(0,Xr.jsxs)("div",{className:"homework-main-header-h1",children:[(0,Xr.jsxs)("select",{name:"groupId",value:c.groupId,onChange:m,children:[(0,Xr.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"}),i.map((e=>(0,Xr.jsx)("option",{value:e._id,children:e.name},e._id)))]}),(0,Xr.jsx)("input",{className:"input-type-text",name:"subject",type:"text",placeholder:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",value:c.subject,onChange:m}),(0,Xr.jsx)("input",{className:"input-type-date",name:"date",type:"date",value:c.date,onChange:m})]}),(0,Xr.jsx)("textarea",{className:"input-type-area",name:"description",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043e\u043c\u0430\u0448\u043d\u0435\u0433\u043e \u0437\u0430\u0434\u0430\u043d\u0438\u044f",value:c.description,onChange:m}),(0,Xr.jsx)("input",{type:"file",multiple:!0,onChange:e=>{u((t=>({...t,files:Array.from(e.target.files)})))},className:"input-type-file"}),d&&(0,Xr.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432..."}),c.files.length>0&&(0,Xr.jsxs)("div",{className:"uploaded-file-preview",children:[(0,Xr.jsx)("p",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b:"}),c.files.map(((e,t)=>(0,Xr.jsxs)("div",{className:"file-preview-item",children:[e.type.startsWith("image/")?(0,Xr.jsx)("img",{src:URL.createObjectURL(e),alt:`preview-${t}`,className:"preview-image"}):(0,Xr.jsxs)("div",{children:["\ud83d\udcce ",(0,Xr.jsx)("strong",{children:e.name})]}),(0,Xr.jsx)("button",{className:"delete-file-button",onClick:()=>u((e=>({...e,files:e.files.filter(((e,n)=>n!==t))}))),children:"\u274c \u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},t)))]}),(0,Xr.jsx)("button",{onClick:async()=>{try{const e=await(async()=>{if(!c.files.length)return[];try{h(!0);const e=[];for(const r of c.files){const o=new FormData;o.append("file",r);const i=await Qr.post(`${n}/api/homework/upload`,o,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}});e.push(i.data.url)}return e}catch(e){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430:",e),[]}finally{h(!1)}})(),r={groupId:c.groupId,subject:c.subject,date:c.date,description:c.description,files:e};await Qr.post(`${n}/api/homework`,r,{headers:{Authorization:`Bearer ${t}`}}),u({groupId:"",subject:"",date:"",description:"",files:[]}),g()}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0414\u0417:",e)}},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),(0,Xr.jsx)("h3",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0414\u0417:"}),(0,Xr.jsx)("div",{className:"homework-search-bar",children:(0,Xr.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0414\u0417 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u043f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u0434.\u043c\u043c.\u0433\u0433)",value:p,onChange:e=>f(e.target.value)})}),a.filter((e=>{const t=p.toLowerCase(),n=/(\d{2})[./-](\d{2})[./-](\d{2,4})/,r=t.match(n);let o=null;if(r){const[e,t,n,i]=r;o=`${t}.${n}.${2===i.length?i:i.slice(-2)}`}const i=t.replace(n,"").trim(),s=(e=>{const t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}.${String(t.getMonth()+1).padStart(2,"0")}.${String(t.getFullYear()).slice(-2)}`})(e.date),a=e.subject.toLowerCase().includes(i),l=e.description.toLowerCase().includes(i);return o&&i?(a||l)&&(!o||s===o):o?s===o:a||l})).map((e=>(0,Xr.jsx)(eb,{user:r,token:t,apiUrl:n,hw:e,onDelete:y,onUpdate:g},e._id)))]})},ob=e=>{let{token:t,apiUrl:n,user:r}=e;if(!r||!t)return null;if("student"===r.role){if(!r.groupId)return(0,Xr.jsx)("p",{children:"\u0412\u044b \u043d\u0435 \u0441\u043e\u0441\u0442\u043e\u0438\u0442\u0435 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435"});const e=r.groupId[0];return(0,Xr.jsx)(nb,{token:t,user:r,apiUrl:n,groupId:e})}return"teacher"===r.role||"director"===r.role?(0,Xr.jsx)(rb,{token:t,user:r,apiUrl:n}):(0,Xr.jsx)("p",{children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u043c \u0437\u0430\u0434\u0430\u043d\u0438\u044f\u043c"})},ib=e=>{let{onClose:t,onConfirm:n}=e;const[r,i]=(0,o.useState)(""),[s,a]=(0,o.useState)("");return(0,Xr.jsx)("div",{className:"pcm-container",children:(0,Xr.jsxs)("div",{className:"pcm-modal",children:[(0,Xr.jsx)("h2",{children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),(0,Xr.jsx)("input",{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:r,onChange:e=>i(e.target.value),className:"pcm-input"}),s&&(0,Xr.jsx)("p",{className:"pcm-error",children:s}),(0,Xr.jsxs)("div",{className:"pcm-buttons",children:[(0,Xr.jsx)("button",{className:"pcm-cancel",onClick:t,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Xr.jsx)("button",{className:"pcm-confirm",onClick:()=>{r.trim()?(n(r),i(""),a("")):a("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c")},children:"\u0414\u0430\u043b\u0435\u0435"})]})]})})},sb=e=>{let{isOpen:t,onClose:n,onSubmit:r}=e;const[i,s]=(0,o.useState)("");return t?(0,Xr.jsx)("div",{className:"drm-container",children:(0,Xr.jsxs)("div",{className:"modal",children:[(0,Xr.jsx)("h2",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"}),(0,Xr.jsx)("textarea",{onChange:e=>s(e.target.value),className:"delete-reason",placeholder:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",required:!0}),(0,Xr.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,Xr.jsx)("button",{onClick:n,className:"cancel-deletion",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Xr.jsx)("button",{onClick:()=>{r(i),n()},className:"submit-deletion",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}):null},ab=e=>{let{token:t,apiUrl:n,user:r,theme:i,setTheme:s}=e;const{id:a}=re(),[l,c]=(0,o.useState)("idle"),[u,d]=(0,o.useState)(""),[h,p]=(0,o.useState)(!1),[f,m]=(0,o.useState)(!0),[g,y]=(0,o.useState)(null),[v,b]=(0,o.useState)(null),[w,x]=(0,o.useState)(""),[k,S]=(0,o.useState)(!1),[C,E]=(0,o.useState)(""),[T,N]=(0,o.useState)(!1),[O,j]=(0,o.useState)(!1),[M,A]=(0,o.useState)(!1),[_,R]=(0,o.useState)(""),[D,P]=(0,o.useState)(""),[L,$]=(0,o.useState)(!1),[I,z]=(0,o.useState)(!1),[B,F]=(0,o.useState)(!1),V=ne();(0,o.useEffect)((()=>{t&&(async()=>{try{const e=await Qr.get(`${n}/api/users/settings`,{headers:{Authorization:`Bearer ${t}`}});p(e.data.twoFAEnabled),A(e.data.allowComments),R(e.data.email||""),P(e.data.phone||"")}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a:",e)}finally{m(!1)}})()}),[t,n]);const H=async e=>{try{await Qr.put(`${n}/api/users/${r._id}/update-contacts`,{email:"email"===e?_:r.email,phone:"phone"===e?D:r.phone},{headers:{Authorization:`Bearer ${t}`}}),Io.success("\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"),"email"===e&&$(!1),"phone"===e&&z(!1)}catch(o){Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432"),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432",o)}};return f?(0,Xr.jsx)("div",{children:(0,Xr.jsx)(io,{})}):(0,Xr.jsxs)("div",{style:{padding:"20px"},className:"settings-container",children:[(0,Xr.jsx)("h2",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),(0,Xr.jsx)("button",{onClick:()=>V(-1),className:"back-button",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,Xr.jsxs)("div",{className:"contacts-settings",children:[(0,Xr.jsx)("h3",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),(0,Xr.jsxs)("div",{className:"contact-field",children:[(0,Xr.jsx)("label",{children:"Email:"}),L?(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("input",{type:"email",value:_,onChange:e=>R(e.target.value),placeholder:r.email||"example@example.com"}),(0,Xr.jsx)("button",{onClick:()=>H("email"),children:"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("span",{children:_||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"}),(0,Xr.jsx)("button",{onClick:()=>$(!0),children:"\u270f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),(0,Xr.jsxs)("div",{className:"contact-field",children:[(0,Xr.jsx)("label",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"}),I?(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("input",{type:"tel",value:D,onChange:e=>P(e.target.value),placeholder:r.phone||"+7 (XXX) XXX-XX-XX"}),(0,Xr.jsx)("button",{onClick:()=>H("phone"),children:"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("span",{children:D||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"}),(0,Xr.jsx)("button",{onClick:()=>z(!0),children:"\u270f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})]}),(0,Xr.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Xr.jsx)("h4",{children:"\u0414\u0432\u0443\u0445\u0444\u0430\u043a\u0442\u043e\u0440\u043d\u0430\u044f \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f (2FA)"}),h?(0,Xr.jsx)("p",{style:{color:"green",fontWeight:"bold"},children:"2FA \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u2705"}):(0,Xr.jsx)("p",{style:{color:"red",fontWeight:"bold"},children:"2FA \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u274c"}),(0,Xr.jsx)("button",{onClick:()=>h?N(!0):(async()=>{if(h)N(!0);else try{const e=await Qr.post(`${n}/api/users/2fa/setup`,{},{headers:{Authorization:`Bearer ${t}`}});y(e.data.qrCodeUrl),b(e.data.secret),p(e.data.twoFAEnabled),j(!0)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 2FA:",e),E("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c 2FA")}})(),style:{marginTop:"10px"},children:h?"\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c 2FA":"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c 2FA"}),C&&(0,Xr.jsx)("p",{style:{color:"red"},children:C})]}),(0,Xr.jsx)("div",{className:"theme-toggle-setting",children:(0,Xr.jsxs)("select",{value:i,onChange:e=>s(e.target.value),children:[(0,Xr.jsx)("option",{value:"default-light",children:"\u0421\u0432\u0435\u0442\u043b\u0430\u044f"}),(0,Xr.jsx)("option",{value:"default-dark",children:"\u0422\u0435\u043c\u043d\u0430\u044f"}),(0,Xr.jsx)("option",{value:"default-ultra-dark",children:"\u041d\u043e\u0447\u044c"})]})}),(0,Xr.jsx)("div",{className:"comments-toggle-setting",children:(0,Xr.jsxs)("label",{className:"switch",children:[(0,Xr.jsx)("input",{type:"checkbox",checked:M,onChange:async e=>{const o=e.target.checked;A(o);try{await Qr.put(`${n}/api/users/${r._id}/update-comments-setting`,{allowComments:o},{headers:{Authorization:`Bearer ${t}`}})}catch(i){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432:",i)}}}),(0,Xr.jsx)("span",{className:"slider"}),(0,Xr.jsx)("span",{className:"switch-label",children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u043c \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"})]})}),(0,Xr.jsx)("div",{className:"account-deletion",children:(0,Xr.jsx)("button",{onClick:()=>{c("password")},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0410\u043a\u043a\u0430\u0443\u043d\u0442"})}),"password"===l&&(0,Xr.jsx)(ib,{onClose:()=>c("idle"),onConfirm:e=>{d(e),c(h?"2fa":"confirm")}}),"2fa"===l&&(0,Xr.jsx)(Zr,{mode:"",apiUrl:n,userId:r._id,showQRCode:!1,onClose:()=>c("idle"),onSuccess:()=>c("confirm")}),"confirm"===l&&(0,Xr.jsx)(sb,{isOpen:!0,onClose:()=>c("idle"),onSubmit:async e=>{try{await Qr.post(`${n}/api/deletion`,{reason:e},{headers:{Authorization:`Bearer ${t}`}}),Io.success("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u043b\u0430\u0435\u043d\u0438\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d")}catch(r){Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430")}}}),O&&g&&(0,Xr.jsx)(Zr,{mode:"verify-only",apiUrl:n,userId:r._id,showQRCode:!0,qrCodeUrl:g,onClose:()=>j(!1),onSuccess:()=>{p(!0),y(null),j(!1)}}),T&&(0,Xr.jsx)(Zr,{mode:"",apiUrl:n,userId:r._id,showQRCode:!1,onClose:()=>N(!1),onSuccess:()=>{(async()=>{try{await Qr.post(`${n}/api/users/2fa/disable`,{},{headers:{Authorization:`Bearer ${t}`}}),p(!1)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 2FA:",e),E("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c 2FA")}})(),N(!1)}})]})},lb=e=>{let{apiUrl:t,token:n,user:r}=e;const[i,s]=(0,o.useState)([]),[a,l]=(0,o.useState)(!0),c=async()=>{try{const e=await Qr.get(`${t}/api/reports`,{headers:{Authorization:`Bearer ${n}`}});s(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0436\u0430\u043b\u043e\u0431",e)}finally{l(!1)}};(0,o.useEffect)((()=>{c()}),[]);return a?(0,Xr.jsx)(io,{}):i.length?(0,Xr.jsxs)("div",{className:"reports-container",children:[(0,Xr.jsx)("h2",{children:"\u0416\u0430\u043b\u043e\u0431\u044b"}),(0,Xr.jsxs)("div",{className:"counter",children:["\u0416\u0430\u043b\u043e\u0431: ",i.length]}),i.map((e=>{var r,o,i,s;return(0,Xr.jsxs)("div",{className:"report-item",children:[(0,Xr.jsxs)("div",{className:"report-content",children:[(0,Xr.jsx)("strong",{children:(0,Xr.jsx)(ot,{to:`/profile/${null===(r=e.author)||void 0===r?void 0:r._id}`,children:null===(o=e.author)||void 0===o?void 0:o.username})}),e.target&&(0,Xr.jsxs)(Xr.Fragment,{children:[" ","\u2192"," ",(0,Xr.jsx)("strong",{children:(0,Xr.jsx)(ot,{to:`/profile/${null===(i=e.target)||void 0===i?void 0:i._id}`,children:null===(s=e.target)||void 0===s?void 0:s.username})})]})]}),(0,Xr.jsx)("div",{className:"report-message",children:e.message}),(0,Xr.jsx)("div",{className:"report-date",children:new Date(e.createdAt).toLocaleString()}),(0,Xr.jsxs)("div",{className:"report-controls",children:[e.resolved?(0,Xr.jsx)("span",{style:{color:"#00d26a"},children:"\u2705 \u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e"}):(0,Xr.jsx)("button",{onClick:()=>(async e=>{try{await Qr.patch(`${t}/api/reports/${e}/resolve`,{},{headers:{Authorization:`Bearer ${n}`}}),c()}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043c\u0435\u0442\u043a\u0435 \u043a\u0430\u043a \u0440\u0435\u0448\u0435\u043d\u043d\u043e\u0439",r)}})(e._id),children:"\u041f\u043e\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0440\u0435\u0448\u0435\u043d\u043d\u0443\u044e"}),(0,Xr.jsx)("button",{onClick:()=>(async e=>{try{await Qr.delete(`${t}/api/reports/${e}`,{headers:{Authorization:`Bearer ${n}`}}),c()}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0436\u0430\u043b\u043e\u0431\u044b",r)}})(e._id),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]},e._id)}))]}):(0,Xr.jsx)("p",{children:"\u0416\u0430\u043b\u043e\u0431 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \ud83c\udf89"})},cb=e=>{let{user:t,apiUrl:n,token:r}=e;const[i,s]=(0,o.useState)(!0),[a,l]=(0,o.useState)([]),c=async()=>{try{const e=await Qr.get(`${n}/api/deletion`,{headers:{Authorization:`Bearer ${r}`}});l(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043d\u0430 \u0443\u0434\u043b\u0430\u043d\u0438\u0435",e)}finally{s(!1)}};(0,o.useEffect)((()=>{c()}),[]);return i?(0,Xr.jsx)(io,{}):0===a.length?(0,Xr.jsx)("p",{children:"\u0417\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043d\u0435\u0442 \ud83c\udf89"}):(0,Xr.jsxs)("div",{className:"delete-request-tab-container",children:[(0,Xr.jsx)("h2",{children:"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),(0,Xr.jsxs)("div",{className:"counter",children:["\u0417\u0430\u043f\u0440\u043e\u0441\u043e\u0432: ",a.length]}),a.map((e=>(0,Xr.jsxs)("div",{className:"drt-item",children:[(0,Xr.jsxs)("div",{className:"drt-content",children:[(0,Xr.jsxs)("div",{className:"drt-user-info",children:[(0,Xr.jsx)("div",{className:"drt-req-username",children:(0,Xr.jsx)(ot,{to:`/profile/${e.user._id}`,children:e.user.username})}),(0,Xr.jsx)("div",{className:"divider",children:" | "}),(0,Xr.jsx)("div",{className:"drt-req-role",children:e.user.role})]}),(0,Xr.jsx)("div",{className:"drt-req-reason",children:e.reason}),(0,Xr.jsx)("small",{children:new Date(e.createdAt).toLocaleString()})]}),(0,Xr.jsxs)("div",{className:"drt-buttons",children:[(0,Xr.jsx)("button",{onClick:()=>(async e=>{try{await Qr.delete(`${n}/api/deletion/${e}/delete-user`,{headers:{Authorization:`Bearer ${r}`}}),c(),Io.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0434\u0430\u043b\u0451\u043d")}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",t),Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}})(e._id),children:"\ud83d\uddd1 \u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>(async e=>{try{await Qr.delete(`${n}/api/deletion/${e}`,{headers:{Authorization:`Bearer ${r}`}}),c(),Io.success("\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0434\u0430\u043b\u0451\u043d")}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",t),Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430")}})(e._id),children:"\u274c \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]},e._id)))]})},ub=e=>{let{apiUrl:t,token:n}=e;const[r,i]=(0,o.useState)(""),[s,a]=(0,o.useState)(""),[l,c]=(0,o.useState)("student");return(0,Xr.jsxs)("div",{className:"reg-user-container",children:[(0,Xr.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,Xr.jsxs)("div",{className:"name-field-container",children:[(0,Xr.jsx)("label",{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,Xr.jsx)("input",{type:"text",className:"name-input",placeholder:"\u0424.\u0418.\u041e",value:r,onChange:e=>i(e.target.value)})]}),(0,Xr.jsxs)("div",{className:"pass-field-container",children:[(0,Xr.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,Xr.jsxs)("div",{className:"pass-field-controls",children:[(0,Xr.jsx)("input",{type:"text",className:"pass-input",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:s,onChange:e=>a(e.target.value)}),(0,Xr.jsx)("button",{onClick:()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let t="";for(let n=0;n<10;n++)t+=e.charAt(Math.floor(70*Math.random()));a(t)},className:"pass-gen-button",children:"\ud83c\udfb2"}),(0,Xr.jsx)("button",{onClick:()=>{s&&(navigator.clipboard.writeText(s),Io.info("\u041f\u0430\u0440\u043e\u043b\u044c \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d"))},className:"copy-button",children:"\ud83d\udccb"})]})]}),(0,Xr.jsx)("div",{className:"role-select-container",children:(0,Xr.jsxs)("select",{className:"role-select",value:l,onChange:e=>c(e.target.value),children:[(0,Xr.jsx)("option",{value:"student",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),(0,Xr.jsx)("option",{value:"teacher",children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,Xr.jsx)("option",{value:"director",children:"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440"}),(0,Xr.jsx)("option",{value:"editor",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440"})]})}),(0,Xr.jsx)("button",{onClick:async()=>{if(r&&s&&l)try{await Qr.post(`${t}/api/users`,{username:r,password:s,role:l},{headers:{Authorization:`Bearer ${n}`}}),Io.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d"),i(""),a(""),c("student")}catch(o){var e;console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",o),409===(null===(e=o.response)||void 0===e?void 0:e.status)?Io.error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"):Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}else Io.error("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f!")},className:"reg-button",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})},db=e=>{let{user:t,apiUrl:n,token:r}=e;const[i,s]=(0,o.useState)([]),[a,l]=(0,o.useState)({top:0,left:0}),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(""),[p,f]=(0,o.useState)([]),[m,g]=(0,o.useState)({name:"",description:"",icon:""}),[y,v]=(0,o.useState)(null),[b,w]=(0,o.useState)(!1),[x,k]=(0,o.useState)({name:"",description:""});(0,o.useEffect)((()=>{(async()=>{try{const e=await Qr.get(`${n}/api/badges`,{headers:{Authorization:`Bearer ${r}`}});s(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0437\u043d\u0430\u0447\u043a\u043e\u0432",e)}})()}),[n,r]),(0,o.useEffect)((()=>{if(!c)return;const e=document.querySelector(".badge-item.selected");if(e){const t=e.getBoundingClientRect(),n=window.scrollY||document.documentElement.scrollTop,r=window.scrollX||document.documentElement.scrollLeft;l({top:t.top+n-20,left:t.left+r+t.width/2})}}),[c]);const S=async e=>{if(d&&c)try{const e=(await Qr.get(`${n}/api/users/search?query=${d}`,{headers:{Authorization:`Bearer ${r}`}})).data.find((e=>e.username===d));if(!e)return void Io.error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");await Qr.put(`${n}/api/users/${e._id}/give-badge`,{badgeId:c._id},{headers:{Authorization:`Bearer ${r}`}}),Io.success(`\ud83c\udf89 \u0417\u043d\u0430\u0447\u043e\u043a \xab${c.name}\xbb \u0432\u044b\u0434\u0430\u043d ${e.username}`),h("")}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0434\u0430\u0447\u0435 \u0437\u043d\u0430\u0447\u043a\u0430",t),Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0434\u0430\u0447\u0435 \u0437\u043d\u0430\u0447\u043a\u0430")}else Io.error("\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f")};return(0,Xr.jsxs)("div",{className:"badges-tab",children:[(0,Xr.jsx)("h2",{children:"\u0417\u043d\u0430\u0447\u043a\u0438"}),(0,Xr.jsxs)("div",{className:"create-badge-container",children:[(0,Xr.jsx)("h3",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0437\u043d\u0430\u0447\u043e\u043a"}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:m.name,onChange:e=>g((t=>({...t,name:e.target.value})))}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:m.description,onChange:e=>g((t=>({...t,description:e.target.value})))}),(0,Xr.jsxs)("label",{className:"badge-upload-label",children:[y?(0,Xr.jsx)("img",{src:y,alt:"preview",className:"badge-preview"}):"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u043a\u043e\u043d\u043a\u0443",(0,Xr.jsx)("input",{type:"file",accept:"image/png, image/jpeg",style:{display:"none"},onChange:async e=>{const t=e.target.files[0];if(!t)return;const o=new FormData;o.append("badge-icon",t);try{const e=await Qr.post(`${n}/api/badges/upload-icon`,o,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"multipart/form-data"}});g((t=>({...t,icon:e.data.url,dominantColor:e.data.dominantColor}))),console.log(m),v(e.data.url)}catch(i){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438\u043a\u043e\u043d\u043a\u0438:",i),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043a\u043e\u043d\u043a\u0438")}}})]}),(0,Xr.jsx)("button",{onClick:async()=>{const{name:e,description:t,icon:o,dominantColor:i}=m;if(e&&o)try{const a=await Qr.post(`${n}/api/badges`,{name:e,description:t,icon:o,dominantColor:i},{headers:{Authorization:`Bearer ${r}`}});s((e=>[...e,a.data])),g({name:"",description:"",icon:"",dominantColor:""}),console.log("\u041f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:",m),u(null),Io.success("\ud83c\udf89 \u0411\u0435\u0439\u0434\u0436 \u0441\u043e\u0437\u0434\u0430\u043d!")}catch(a){Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0431\u0435\u0439\u0434\u0436\u0430"),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0431\u0435\u0439\u0434\u0436\u0430",a)}else Io.error("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438 \u0438\u043a\u043e\u043d\u043a\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b")},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]}),(0,Xr.jsx)("div",{className:"badge-list",children:i.map((e=>(0,Xr.jsx)("div",{className:"badge-item "+((null===c||void 0===c?void 0:c._id)===e._id?"selected":""),onClick:()=>u(e),title:e.name,children:(0,Xr.jsx)("img",{src:e.icon,alt:e.name})},e._id)))}),c&&(0,Xr.jsxs)("div",{className:"badge-menu",style:{top:`${a.top}px`,left:`${a.left}px`,background:`radial-gradient(circle at 12%, ${c.dominantColor} 0%, transparent 100%), \n            radial-gradient(ellipse at right, ${c.dominantColor} 0%, transparent 0%)`},children:[(0,Xr.jsx)("div",{className:"badge-menu-left",children:(0,Xr.jsx)("div",{className:"badge-icon-wrapper",children:(0,Xr.jsx)("img",{src:c.icon,alt:c.name,className:"badge-icon-preview"})})}),(0,Xr.jsx)("div",{className:"badge-menu-center",children:b?(0,Xr.jsx)(Xr.Fragment,{children:(0,Xr.jsxs)("div",{className:"badge-edit-form-overlay",children:[(0,Xr.jsx)("input",{type:"text",placeholder:"\u041d\u043e\u0432\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:x.name,onChange:e=>k((t=>({...t,name:e.target.value})))}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041d\u043e\u0432\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:x.description||"",onChange:e=>k((t=>({...t,description:e.target.value})))}),(0,Xr.jsxs)("div",{className:"badge-edit-buttons",children:[(0,Xr.jsx)("button",{onClick:async()=>{if(c&&x.name.trim())try{const e=(await Qr.put(`${n}/api/badges/${c._id}`,{name:x.name,description:x.description},{headers:{Authorization:`Bearer ${r}`}})).data;s((t=>t.map((t=>t._id===e._id?e:t)))),u(e),w(!1),Io.success("\u0417\u043d\u0430\u0447\u043e\u043a \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!")}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0431\u0435\u0439\u0434\u0436\u0430:",e),Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439")}},children:"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>w(!1),children:"\u274c \u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}):(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("h3",{children:c.name}),(0,Xr.jsx)("p",{children:c.description||""}),(0,Xr.jsxs)("div",{className:"badge-edit-buttons",children:[(0,Xr.jsx)("button",{onClick:()=>{w(!0),k({name:c.name,description:c.description})},children:"\u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:async()=>{if(!c)return;if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0431\u0435\u0439\u0434\u0436?"))try{await Qr.delete(`${n}/api/badges/${c._id}`,{headers:{Authorization:`Bearer ${r}`}}),s(i.filter((e=>e._id!==c._id))),u(null),Io.success("\u0417\u043d\u0430\u0447\u043e\u043a \u0443\u0434\u0430\u043b\u0451\u043d!")}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0431\u0435\u0439\u0434\u0436\u0430:",e),Io.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438")}},children:"\ud83d\uddd1\ufe0f \u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}),(0,Xr.jsx)("div",{className:"badge-menu-right",children:!b&&(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("h4",{children:"\u0412\u044b\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e"}),(0,Xr.jsxs)("div",{className:"user-search-container",children:[(0,Xr.jsx)("input",{type:"text",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",value:d,onChange:e=>{h(e.target.value),(async e=>{if(!e.trim())return f([]);try{const t=await Qr.get(`${n}/api/users/search?query=${e}`,{headers:{Authorization:`Bearer ${r}`}}),o=(null===c||void 0===c?void 0:c.receivers)||[],i=t.data.filter((e=>!o.includes(e._id)));f(i)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0438\u0441\u043a\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439:",t)}})(e.target.value)}}),p.length>0&&(0,Xr.jsx)("ul",{className:"user-suggestions",children:p.map((e=>(0,Xr.jsx)("li",{onClick:()=>{h(e.username),f([])},children:e.username},e._id)))})]}),(0,Xr.jsxs)("div",{className:"badge-edit-buttons",children:[d.length>0?(0,Xr.jsx)("button",{onClick:S,children:"\u2795 \u0412\u044b\u0434\u0430\u0442\u044c"}):(0,Xr.jsx)("button",{onClick:S,disabled:!0,style:{cursor:"default"},children:"\u26a0\ufe0f \u0412\u044b\u0434\u0430\u0442\u044c(\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f)"}),(0,Xr.jsx)("button",{onClick:()=>u(null),children:"\u274c \u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})})]})]})},hb=e=>{let{apiUrl:t,token:n,user:r}=e;const i=(0,o.useRef)({}),[s,a]=(0,o.useState)(""),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)(!0),[h,p]=(0,o.useState)(""),[f,m]=(0,o.useState)([]),[g,y]=(0,o.useState)([]),[v,b]=(0,o.useState)(null),[w,x]=(0,o.useState)({direction:"",course:"",curator:""});(0,o.useEffect)((()=>{d(!0);(async()=>{try{const e=await Qr.get(`${t}/api/groups`,{headers:{Authorization:`Bearer ${n}`}});y(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0433\u0440\u0443\u043f\u043f:",e)}finally{d(!1)}})()}),[t,n]),(0,o.useEffect)((()=>{const e=setTimeout((async()=>{if(s.trim())try{const e=await Qr.get(`${t}/api/groups/search?query=${s}`,{headers:{Authorization:`Bearer ${n}`}});c(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0438\u0441\u043a\u0435 \u0433\u0440\u0443\u043f\u043f:",e)}else c([])}),300);return()=>clearTimeout(e)}),[s]);const k=async()=>{try{await Qr.put(`${t}/api/groups/${v}/update-info`,w,{headers:{Authorization:`Bearer ${n}`}}),b(null)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0433\u0440\u0443\u043f\u043f\u044b:",e)}};return u?(0,Xr.jsx)(io,{}):(0,Xr.jsxs)("div",{className:"groups-tab",children:[(0,Xr.jsxs)("div",{className:"groups-tab-header",children:[(0,Xr.jsx)("h2",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),(0,Xr.jsxs)("p",{className:"groups-count",children:["\u0413\u0440\u0443\u043f\u043f: ",g.length]}),(0,Xr.jsxs)("div",{className:"group-search-container",children:[(0,Xr.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u0433\u0440\u0443\u043f\u043f\u044b...",className:"group-search-input",value:s,onChange:e=>a(e.target.value)}),l.length>0&&(0,Xr.jsx)("ul",{className:"group-search-results",children:l.map((e=>(0,Xr.jsx)("li",{onClick:()=>{const t=i.current[e._id];t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("highlighted"),setTimeout((()=>t.classList.remove("highlighted")),2e3)),c([]),a("")},children:e.name},e._id)))})]})]}),g.map((e=>{var r;return(0,Xr.jsxs)("div",{className:"group-card",ref:t=>i.current[e._id]=t,children:[(0,Xr.jsx)("h4",{children:e.name}),v===e._id?(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)("input",{type:"text",placeholder:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",value:w.direction,onChange:e=>x((t=>({...t,direction:e.target.value}))),className:"group-direction-input"}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041a\u0443\u0440\u0441",value:w.course,onChange:e=>x((t=>({...t,course:e.target.value}))),className:"group-course-input"}),(0,Xr.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043a\u0443\u0440\u0430\u0442\u043e\u0440\u0430...",value:h,onChange:async e=>{const r=e.target.value;p(r);try{const e=await Qr.get(`${t}/api/users/search?query=${r}`,{headers:{Authorization:`Bearer ${n}`}});m(e.data.filter((e=>["teacher","admin"].includes(e.role))))}catch(o){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430:",o)}},className:"group-curator-input"}),(0,Xr.jsx)("ul",{className:"curator-search-results",children:f.map((e=>(0,Xr.jsx)("li",{onClick:()=>{x((t=>({...t,curator:e._id}))),p(e.username),m([])},children:e.username},e._id)))}),(0,Xr.jsx)("button",{onClick:k,children:"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):(0,Xr.jsxs)("div",{className:"group-details-container",children:[(0,Xr.jsxs)("p",{className:"group-direction",children:["\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",e.direction||"-"]}),(0,Xr.jsxs)("p",{className:"group-course",children:["\u041a\u0443\u0440\u0441: ",e.course||"-"]}),(0,Xr.jsxs)("p",{className:"group-curator",children:["\u041a\u0443\u0440\u0430\u0442\u043e\u0440: ",(null===(r=e.curator)||void 0===r?void 0:r.username)||"-"]}),(0,Xr.jsx)("button",{className:"group-save",onClick:()=>(e=>{b(e._id),x({direction:e.direction||"",course:e.course||"",curator:e.curator||""})})(e),children:"\u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]},e._id)}))]})},pb=e=>{let{user:t,apiUrl:n,token:r}=e;const[i,s]=(0,o.useState)("reports");return(0,Xr.jsxs)("div",{className:"dashboard-container",children:[(0,Xr.jsxs)("div",{className:"sidebar-left",children:[(0,Xr.jsx)("p",{children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),(0,Xr.jsxs)("div",{className:"tabs-buttons",children:[(0,Xr.jsx)("button",{onClick:()=>s("reports"),children:"\u0416\u0430\u043b\u043e\u0431\u044b"}),(0,Xr.jsx)("button",{onClick:()=>s("deletion"),children:"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435"}),(0,Xr.jsx)("button",{onClick:()=>s("register"),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,Xr.jsx)("button",{onClick:()=>s("groups"),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),(0,Xr.jsx)("button",{onClick:()=>s("give-badge"),children:"\u0417\u043d\u0430\u0447\u043a\u0438"})]}),(0,Xr.jsx)("div",{className:"ap-info",children:"v1.3.0"})]}),(0,Xr.jsxs)("div",{className:"tabs-content",children:["reports"===i&&(0,Xr.jsx)(lb,{apiUrl:n,token:r}),"deletion"===i&&(0,Xr.jsx)(cb,{apiUrl:n,token:r,user:t}),"register"===i&&(0,Xr.jsx)(ub,{apiUrl:n,token:r,user:t}),"give-badge"===i&&(0,Xr.jsx)(db,{apiUrl:n,user:t,token:r}),"groups"===i&&(0,Xr.jsx)(hb,{apiUrl:n,token:r,user:t})]})]})},fb=e=>{var t,n;let{user:r,apiUrl:i,token:s}=e;const{id:a}=re(),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)(!0),[h,p]=(0,o.useState)(!1),[f,m]=(0,o.useState)({title:"",description:""}),g=ne();(0,o.useEffect)((()=>{(async()=>{try{const e=await Qr.get(`${i}/api/homework/${a}`,{headers:{Authorization:`Bearer ${s}`}});c(e.data),m({title:e.data.subject,description:e.data.description})}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0414\u0417")}finally{d(!1)}})()}),[a,i,s]);return u?(0,Xr.jsx)(io,{}):l?(0,Xr.jsxs)("div",{className:"hw-container",children:[(0,Xr.jsx)("button",{onClick:()=>g(-1),className:"back-button",children:"\u041d\u0430\u0437\u0430\u0434"}),h?(0,Xr.jsxs)("div",{className:"hw-editmode",children:[(0,Xr.jsx)("input",{type:"text",value:f.title,onChange:e=>m((t=>({...t,title:e.target.value})))}),(0,Xr.jsx)("textarea",{value:f.description,onChange:e=>m((t=>({...t,description:e.target.value})))}),(0,Xr.jsx)("button",{onClick:async()=>{try{await Qr.patch(`${i}/api/homework/${a}`,f,{headers:{Authorization:`Bearer ${s}`}}),c((e=>({...e,...f}))),p(!1)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0414\u0417:",e)}},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,Xr.jsx)("button",{onClick:()=>p(!1),children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]}):(0,Xr.jsxs)("div",{className:"hw-info",children:[(0,Xr.jsxs)("div",{className:"hw-info-header",children:[(0,Xr.jsx)("h1",{children:l.subject}),(0,Xr.jsx)("h3",{children:new Date(l.date).toLocaleDateString()})]}),(0,Xr.jsxs)("div",{className:"hw-about",children:[(0,Xr.jsxs)("p",{className:"hw-teacher",children:["\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c:"," ",(0,Xr.jsx)(ot,{to:`/profile/${null===(t=l.createdBy)||void 0===t?void 0:t._id}`,className:"hw-author",children:null===(n=l.createdBy)||void 0===n?void 0:n.username})]}),(0,Xr.jsx)("h3",{children:new Date(l.createdAt).toLocaleDateString()})]}),(0,Xr.jsx)("p",{className:"hw-description",children:l.description}),l.files&&l.files.length>0&&(0,Xr.jsxs)("div",{className:"hw-files",children:[(0,Xr.jsx)("p",{children:"\u0424\u0430\u0439\u043b\u044b:"}),(0,Xr.jsx)("ul",{className:"hw-files-list",children:l.files.map(((e,t)=>(0,Xr.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"file-link",children:["\ud83d\udcce \u0424\u0430\u0439\u043b ",t+1]},t)))})]}),("teacher"===r.role||"director"===r.role)&&(0,Xr.jsx)("button",{onClick:()=>p(!0),children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}):(0,Xr.jsxs)("div",{className:"hw-error-page",children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0434\u0437",(0,Xr.jsx)("button",{onClick:()=>g(-1),className:"back-button",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"})]})},mb=()=>(0,Xr.jsxs)("div",{className:"terms-container",children:[(0,Xr.jsx)("h1",{children:"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f"}),(0,Xr.jsxs)("div",{className:"terms-box",children:[(0,Xr.jsx)("h2",{children:"1. \u041e\u0431\u0449\u0438\u0435 \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f"}),(0,Xr.jsx)("p",{children:"\u041c\u044b \u0443\u0432\u0430\u0436\u0430\u0435\u043c \u0432\u0430\u0448\u0443 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c. \u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u0432\u0432\u0435\u0434\u0451\u043d\u043d\u044b\u0435 \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0443, \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b \u0438 \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0442\u0440\u0435\u0442\u044c\u0438\u043c \u043b\u0438\u0446\u0430\u043c."}),(0,Xr.jsx)("h2",{children:"2. \u0423\u0447\u0435\u0442\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438"}),(0,Xr.jsx)("p",{children:"\u0412\u044b \u043d\u0435\u0441\u0451\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0437\u0430 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0441\u0432\u043e\u0435\u0439 \u0443\u0447\u0451\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438. \u041d\u0435 \u0441\u043e\u043e\u0431\u0449\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0442\u0440\u0435\u0442\u044c\u0438\u043c \u043b\u0438\u0446\u0430\u043c."}),(0,Xr.jsx)("h2",{children:"3. \u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),(0,Xr.jsx)("p",{children:"\u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0440\u0430\u0437\u043c\u0435\u0449\u0430\u0442\u044c \u043e\u0441\u043a\u043e\u0440\u0431\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438, \u043d\u0435\u0446\u0435\u043d\u0437\u0443\u0440\u043d\u0443\u044e \u043b\u0435\u043a\u0441\u0438\u043a\u0443 \u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u043d\u0435\u0436\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442."}),(0,Xr.jsx)("h2",{children:"4. \u041a\u043e\u043d\u0442\u0435\u043d\u0442 \u0438 \u043f\u0440\u0430\u0432\u0430"}),(0,Xr.jsx)("p",{children:"\u0412\u0435\u0441\u044c \u043a\u043e\u043d\u0442\u0435\u043d\u0442 (\u043e\u0446\u0435\u043d\u043a\u0438, \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435, \u0414\u0417 \u0438 \u0442.\u0434.) \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u043c\u0443 \u0443\u0447\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044e. \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0432 \u043a\u043e\u043c\u043c\u0435\u0440\u0447\u0435\u0441\u043a\u0438\u0445 \u0446\u0435\u043b\u044f\u0445."}),(0,Xr.jsx)("h2",{children:"5. \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438"}),(0,Xr.jsx)("p",{children:"\u041c\u044b \u043c\u043e\u0436\u0435\u043c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432 \u043b\u044e\u0431\u043e\u0435 \u0432\u0440\u0435\u043c\u044f. \u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0432\u0441\u0435\u0433\u0434\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435."}),(0,Xr.jsx)("p",{className:"last-updated",children:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e: 23 \u0430\u043f\u0440\u0435\u043b\u044f 2025 \u0433."})]})]}),gb=()=>(0,Xr.jsxs)("div",{className:"footer-container",children:[(0,Xr.jsx)("div",{className:"footer-left",children:(0,Xr.jsx)("p",{children:"\xa9 2025 LearningPortal. \u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b."})}),(0,Xr.jsxs)("div",{className:"footer-right",children:[(0,Xr.jsx)(ot,{to:"/policy",children:"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430"}),(0,Xr.jsx)(ot,{to:"https://antiplagiat.ru",target:"_blank",rel:"noopener noreferrer",children:"\u0410\u043d\u0442\u0438\u041f\u043b\u0430\u0433\u0438\u0430\u0442"}),(0,Xr.jsx)("p",{children:"\xa9 \u0421loud, Ink."})]})]});Qr.interceptors.response.use((e=>e),(e=>{var t,n;return 401!==(null===(t=e.response)||void 0===t?void 0:t.status)&&403!==(null===(n=e.response)||void 0===n?void 0:n.status)||(sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)}));const yb="https://mk1-schedule-backend-ff28aedc0b67.herokuapp.com";const vb=function(){const[e,t]=(0,o.useState)(null),[n,r]=(0,o.useState)(null),i=Z(),s=window.matchMedia("(prefers-color-scheme: dark)").matches,[a,l]=(0,o.useState)(sessionStorage.getItem("theme")||(s?"dark":"light"));(0,o.useEffect)((()=>{const e=localStorage.getItem("user"),n=localStorage.getItem("token");if(e&&n)try{const o=JSON.parse(e),i=n.split(".");if(3!==i.length)throw new Error("\u041d\u0435\u043a\u043e\u0440\u0435\u043a\u0442\u0440\u044b\u0439 \u0442\u043e\u043a\u0435\u043d");const s=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4!==0;)t+="=";return atob(t)}(i[1]);if(1e3*JSON.parse(s).exp<Date.now())return console.warn("\u0422\u043e\u043a\u0435\u043d \u0438\u0441\u0442\u0435\u043a"),void c();t(n),r(o)}catch(wb){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0430\u0437\u0431\u043e\u0440\u043a\u0435 \u0442\u043e\u043a\u0435\u043d\u0430",wb),c()}else c()}),[]),(0,o.useEffect)((()=>{document.documentElement.setAttribute("data-theme",a),sessionStorage.setItem("theme",a)}),[a]),(0,o.useEffect)((()=>{e&&n&&"/login"!==i.pathname&&sessionStorage.setItem("lastVisited",i.pathname)}),[i.pathname,e,n]);const c=()=>{t(""),r(null),localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.clear()};return(0,Xr.jsxs)(Xr.Fragment,{children:[e&&(0,Xr.jsx)(Jv,{onLogout:c,token:e,user:n,apiUrl:yb}),(0,Xr.jsxs)("div",{className:"App",style:{marginRight:e?"120px":"0"},children:[(0,Xr.jsx)("header",{className:"App-header"}),(0,Xr.jsx)("main",{children:(0,Xr.jsxs)(xe,{children:[(0,Xr.jsx)(be,{path:"/",element:e?(0,Xr.jsx)(Zv,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/login",element:e&&n?(0,Xr.jsx)(ve,{to:"/login"===sessionStorage.getItem("lastVisited")?"/news":sessionStorage.getItem("lastVisited")||"/news"}):(0,Xr.jsx)(eo,{onLogin:(e,n)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(n)),t(e),r(n)},apiUrl:yb})}),(0,Xr.jsx)(be,{path:"/groups",element:e?(0,Xr.jsx)(so,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/groups/:groupId",element:(0,Xr.jsx)(so,{token:e,user:n})}),(0,Xr.jsx)(be,{path:"/grades",element:e?(0,Xr.jsx)(Yo,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/profile/:id",element:e?(0,Xr.jsx)(lm,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/profile/:id/settings",element:e?(0,Xr.jsx)(ab,{token:e,user:n,apiUrl:yb,theme:a,setTheme:l}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/news",element:e?(0,Xr.jsx)(Zv,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/grades/:studentId",element:e?(0,Xr.jsx)(ao,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/homework",element:e?(0,Xr.jsx)(ob,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/homework/:id",element:e?(0,Xr.jsx)(fb,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/dashboard",element:e?(0,Xr.jsx)(pb,{token:e,user:n,apiUrl:yb}):(0,Xr.jsx)(ve,{to:"/login"})}),(0,Xr.jsx)(be,{path:"/policy",element:(0,Xr.jsx)(mb,{})})]})}),(0,Xr.jsx)("footer",{style:{position:"fixed",bottom:"0",width:"100%"},children:(0,Xr.jsx)(gb,{})})]}),(0,Xr.jsx)(Jo,{})]})},bb=e=>{e&&e instanceof Function&&n.e(488).then(n.bind(n,488)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:s}=t;n(e),r(e),o(e),i(e),s(e)}))};s.createRoot(document.getElementById("root")).render((0,Xr.jsx)(o.StrictMode,{children:(0,Xr.jsx)(nt,{children:(0,Xr.jsx)(vb,{})})})),bb()})();
//# sourceMappingURL=main.9f51969d.js.map